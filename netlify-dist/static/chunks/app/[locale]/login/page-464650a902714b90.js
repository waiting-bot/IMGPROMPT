(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67],{51693:function(e,s,n){Promise.resolve().then(n.bind(n,24607))},24607:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return y}});var t=n(27573),a=n(44251),c=n(7653),l=n(67754),i=n(8950),r=n(23803);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,r.Z)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),u=(0,r.Z)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);function y(){let e=(0,l.useRouter)(),s=(0,l.useSearchParams)(),[n,r]=(0,c.useState)(!1),[y,d]=(0,c.useState)(""),h=s.get("from")||"/dashboard";(0,c.useEffect)(()=>{(async()=>{await (0,a.getSession)()&&e.push(h)})()},[e,h]);let f=async s=>{s.preventDefault(),r(!0),d("");try{let s=await (0,a.signIn)("github",{callbackUrl:h,redirect:!1});(null==s?void 0:s.error)?d("登录失败，请重试"):e.push(h)}catch(e){d("登录失败，请重试")}finally{r(!1)}};return(0,t.jsx)("div",{className:"container flex h-screen w-screen flex-col items-center justify-center",children:(0,t.jsxs)(i.Zb,{className:"w-[400px]",children:[(0,t.jsxs)(i.Ol,{className:"space-y-1",children:[(0,t.jsx)(i.ll,{className:"text-2xl text-center",children:"登录"}),(0,t.jsx)(i.SZ,{className:"text-center",children:"使用您的GitHub账户登录"})]}),(0,t.jsx)(i.aY,{children:(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)(i.zx,{type:"submit",className:"w-full",disabled:n,onClick:()=>(0,a.signIn)("github",{callbackUrl:h}),children:[n?(0,t.jsx)(u,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(x,{className:"mr-2 h-4 w-4"}),"使用GitHub登录"]})}),y&&(0,t.jsx)("div",{className:"text-sm text-red-600 text-center",children:y})]})})]})})}},67754:function(e,s,n){"use strict";n.r(s);var t=n(534),a={};for(var c in t)"default"!==c&&(a[c]=(function(e){return t[e]}).bind(0,c));n.d(s,a)}},function(e){e.O(0,[764,679,251,778,950,293,286,744],function(){return e(e.s=51693)}),_N_E=e.O()}]);