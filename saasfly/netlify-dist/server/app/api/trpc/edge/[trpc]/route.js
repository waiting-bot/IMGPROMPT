(()=>{var e={};e.id=827,e.ids=[827],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},63477:e=>{"use strict";e.exports=require("querystring")},35034:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},62509:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>tM,patchFetch:()=>tJ,requestAsyncStorage:()=>tN,routeModule:()=>tj,serverHooks:()=>tW,staticGenerationAsyncStorage:()=>tU});var n,i={};r.r(i),r.d(i,{GET:()=>tR,POST:()=>tR});var o=r(63036),a=r(5736),s=r(15262);function l(e){let t=Object.create(null);for(let r in e)t[e[r]]=r;return t}let c={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};l(c);let u=l(c),d={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,FORBIDDEN:403,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501};function p(e){return d[e.code]??500}let f=()=>{},h=e=>(function e(t,r){return new Proxy(f,{get(n,i){if("string"==typeof i&&"then"!==i)return e(t,[...r,i])},apply(e,n,i){let o="apply"===r[r.length-1];return t({args:o?i.length>=2?i[1]:[]:i,path:o?r.slice(0,-1):r})}})})(e,[]),y=e=>new Proxy(f,{get(t,r){if("string"==typeof r&&"then"!==r)return e(r)}});function _(e){if(e instanceof g||e instanceof Error&&"TRPCError"===e.name)return e;let t=new g({code:"INTERNAL_SERVER_ERROR",cause:e});return e instanceof Error&&e.stack&&(t.stack=e.stack),t}class m extends Error{}class g extends Error{constructor(e){let t=function(e){if(e instanceof Error)return e;let t=typeof e;if("undefined"!==t&&"function"!==t&&null!==e){if("object"!==t)return Error(String(e));if(e&&!Array.isArray(e)&&"object"==typeof e){let t=new m;for(let r in e)t[r]=e[r];return t}}}(e.cause);super(e.message??t?.message??e.code,{cause:t}),this.code=e.code,this.name="TRPCError",this.cause||(this.cause=t)}}let v={_default:!0,input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}},w=({shape:e})=>e,b=["query","mutation","subscription"],E={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:w,transformer:v},S=["then"];function k(e){return function(t){var r;let n=new Set(Object.keys(t).filter(e=>S.includes(e)));if(n.size>0)throw Error("Reserved words used in `router({})` call: "+Array.from(n).join(", "));let i=(r={},Object.assign(Object.create(null),r));!function e(t,r=""){for(let[n,o]of Object.entries(t??{})){let t=`${r}${n}`;if("router"in o._def){e(o._def.procedures,`${t}.`);continue}if(i[t])throw Error(`Duplicate key: ${t}`);i[t]=o}}(t);let o={_config:e,router:!0,procedures:i,...E,record:t,queries:Object.entries(i).filter(e=>e[1]._def.query).reduce((e,[t,r])=>({...e,[t]:r}),{}),mutations:Object.entries(i).filter(e=>e[1]._def.mutation).reduce((e,[t,r])=>({...e,[t]:r}),{}),subscriptions:Object.entries(i).filter(e=>e[1]._def.subscription).reduce((e,[t,r])=>({...e,[t]:r}),{})};return{...t,_def:o,createCaller:e=>h(({path:t,args:r})=>{if(1===t.length&&b.includes(t[0]))return P({procedures:o.procedures,path:r[0],rawInput:r[1],ctx:e,type:t[0]});let n=t.join("."),i=o.procedures[n],a="query";return i._def.mutation?a="mutation":i._def.subscription&&(a="subscription"),i({path:n,rawInput:r[0],ctx:e,type:a})}),getErrorShape(t){let{path:r,error:n}=t,{code:i}=t.error,o={message:n.message,code:c[i],data:{code:i,httpStatus:p(n)}};return e.isDev&&"string"==typeof t.error.stack&&(o.data.stack=t.error.stack),"string"==typeof r&&(o.data.path=r),this._def._config.errorFormatter({...t,shape:o})}}}}function P(e){let{type:t,path:r}=e;if(!(r in e.procedures)||!e.procedures[r]?._def[t])throw new g({code:"NOT_FOUND",message:`No "${t}"-procedure on path "${r}"`});return(0,e.procedures[r])(e)}let A="undefined"==typeof window||"Deno"in window||globalThis.process?.env?.NODE_ENV==="test"||!!globalThis.process?.env?.JEST_WORKER_ID||!!globalThis.process?.env?.VITEST_WORKER_ID;function O(e){let{path:t,error:r,config:n}=e,{code:i}=e.error,o={message:r.message,code:c[i],data:{code:i,httpStatus:p(r)}};return n.isDev&&"string"==typeof e.error.stack&&(o.data.stack=e.error.stack),"string"==typeof t&&(o.data.path=t),n.errorFormatter({...e,shape:o})}function T(e,t){return"error"in t?{...t,error:e.transformer.output.serialize(t.error)}:"data"in t.result?{...t,result:{...t.result,data:e.transformer.output.serialize(t.result.data)}}:t}function I(e,t){return Array.isArray(t)?t.map(t=>T(e,t)):T(e,t)}let x=(e,t)=>void 0!==e?t.input.deserialize(e):e,C={GET:"query",POST:"mutation"},R={getInputs:e=>{let t=function(e){let{req:t}=e;try{if("GET"===t.method){if(!t.query.has("input"))return;let e=t.query.get("input");return JSON.parse(e)}if(!e.preprocessedBody&&"string"==typeof t.body)return 0===t.body.length?void 0:JSON.parse(t.body);return t.body}catch(e){throw new g({code:"PARSE_ERROR",cause:e})}}(e),r=e.router._def._config.transformer;if(!e.isBatchCall)return{0:x(t,r)};if(null==t||"object"!=typeof t||Array.isArray(t))throw new g({code:"BAD_REQUEST",message:'"input" needs to be an object when doing a batch call'});let n={};for(let e in t){let i=x(t[e],r);n[e]=i}return n}};function j(e){let{ctx:t,paths:r,type:n,responseMeta:i,untransformedJSON:o,errors:a=[]}=e,s=o?function(e){let t=new Set((Array.isArray(e)?e:[e]).map(e=>{if("error"in e){let t=e.error.data;return"number"==typeof t.httpStatus?t.httpStatus:d[u[e.error.code]]??500}return 200}));return 1!==t.size?207:t.values().next().value}(o):200,l={"Content-Type":"application/json"},c=!o,p=c?[]:Array.isArray(o)?o:[o],f=i?.({ctx:t,paths:r,type:n,data:p,errors:a,eagerGeneration:c})??{};for(let[e,t]of Object.entries(f.headers??{}))l[e]=t;return f.status&&(s=f.status),{status:s,headers:l}}async function N(e){let{opts:t,ctx:r,type:n,input:i,path:o}=e;try{return{result:{data:await P({procedures:t.router._def.procedures,path:o,rawInput:i,ctx:r,type:n})}}}catch(a){let e=_(a);return t.onError?.({error:e,path:o,input:i,ctx:r,type:n,req:t.req}),{error:O({config:t.router._def._config,error:e,type:n,path:o,input:i,ctx:r})}}}function U(e,t){let{router:r,req:n,onError:i}=t.opts,o=_(e);i?.({error:o,path:t.path,input:t.input,ctx:t.ctx,type:t.type,req:n});let a={error:O({config:r._def._config,error:o,type:t.type,path:t.path,input:t.input,ctx:t.ctx})},s=JSON.stringify(I(r._def._config,a));return{error:o,untransformedJSON:a,body:s}}async function W(e){let t,r;let{router:n,req:i,unstable_onHead:o,unstable_onChunk:a}=e;if("HEAD"===i.method){let e={status:204};return o?.(e,!1),a?.([-1,""]),e}let s=e.contentTypeHandler??R,l=e.batching?.enabled??!0,c=C[i.method]??"unknown",u=!!i.query.get("batch"),d=u&&o&&a&&"stream"===i.headers["trpc-batch-mode"];try{if(r=await e.createContext(),e.error)throw e.error;if(u&&!l)throw Error("Batching is not enabled on the server");/* istanbul ignore if -- @preserve */if("subscription"===c)throw new g({message:"Subscriptions should use wsLink",code:"METHOD_NOT_SUPPORTED"});if("unknown"===c)throw new g({message:`Unexpected request method ${i.method}`,code:"METHOD_NOT_SUPPORTED"});let p=await s.getInputs({isBatchCall:u,req:i,router:n,preprocessedBody:e.preprocessedBody??!1}),f=(t=u?decodeURIComponent(e.path).split(","):[e.path]).map((t,n)=>N({opts:e,ctx:r,type:c,input:p[n],path:t}));if(!d){let i=await Promise.all(f),s=i.flatMap(e=>"error"in e?[e.error]:[]),l=j({ctx:r,paths:t,type:c,responseMeta:e.responseMeta,untransformedJSON:i,errors:s});o?.(l,!1);let d=u?i:i[0],p=I(n._def._config,d),h=JSON.stringify(p);return a?.([-1,h]),{status:l.status,headers:l.headers,body:h}}let h=j({ctx:r,paths:t,type:c,responseMeta:e.responseMeta});o(h,!0);let y=new Map(f.map((e,t)=>[t,e.then(e=>[t,e])]));for(let i of t){let[i,o]=await Promise.race(y.values());y.delete(i);try{let e=I(n._def._config,o),t=JSON.stringify(e);a([i,t])}catch(l){let n=t[i],o=p[i],{body:s}=U(l,{opts:e,ctx:r,type:c,path:n,input:o});a([i,s])}}return}catch(u){let{error:n,untransformedJSON:i,body:s}=U(u,{opts:e,ctx:r,type:c}),l=j({ctx:r,paths:t,type:c,responseMeta:e.responseMeta,untransformedJSON:i,errors:[n]});return o?.(l,!1),a?.([-1,s]),{status:l.status,headers:l.headers,body:s}}}let M=e=>e=(e=e.startsWith("/")?e.slice(1):e).endsWith("/")?e.slice(0,-1):e;async function J(e){let t,r,n,i;let o=new Headers,a=async()=>e.createContext?.({req:e.req,resHeaders:o}),s=new URL(e.req.url),l=M(s.pathname),c=M(e.endpoint),u=M(l.slice(c.length)),d={query:s.searchParams,method:e.req.method,headers:Object.fromEntries(e.req.headers),body:e.req.headers.get("content-type")?.startsWith("application/json")?await e.req.text():""},p=new Promise(e=>t=e),f=200,h=!1;return W({req:d,createContext:a,path:u,router:e.router,batching:e.batching,responseMeta:e.responseMeta,onError(t){e?.onError?.({...t,req:e.req})},unstable_onHead:(e,a)=>{for(let[t,r]of Object.entries(e.headers??{}))/* istanbul ignore if -- @preserve */if(void 0!==r){if("string"==typeof r){o.set(t,r);continue}for(let e of r)o.append(t,e)}if(f=e.status,a){o.set("Transfer-Encoding","chunked"),o.append("Vary","trpc-batch-mode");let e=new Response(new ReadableStream({start(e){r=e}}),{status:f,headers:o});t(e),n=new TextEncoder,i=function(){let e=!0;function t(t,r){let n=e?"{":",";return e=!1,`${n}"${t}":${r}
`}return t.end=()=>"}",t}(),h=!0}},unstable_onChunk:([e,a])=>{if(-1===e){let e=new Response(a||null,{status:f,headers:o});t(e)}else r.enqueue(n.encode(i(e,a)))}}).then(()=>{h&&(r.enqueue(n.encode(i.end())),r.close())}).catch(()=>{h&&r.close()}),p}let D="middlewareMarker";function H(e){if("function"==typeof e)return e;if("function"==typeof e.parseAsync)return e.parseAsync.bind(e);if("function"==typeof e.parse)return e.parse.bind(e);if("function"==typeof e.validateSync)return e.validateSync.bind(e);if("function"==typeof e.create)return e.create.bind(e);throw Error("Could not find a validator fn")}class K{_def(){return{middlewares:this.middlewares,resolver:this.resolver,inputParser:this.inputParser,outputParser:this.outputParser,meta:this.meta}}async parseInput(e){try{return await this.parseInputFn(e)}catch(e){throw new TRPCError({code:"BAD_REQUEST",cause:e})}}async parseOutput(e){try{return await this.parseOutputFn(e)}catch(e){throw new TRPCError({code:"INTERNAL_SERVER_ERROR",cause:e,message:"Output validation failed"})}}async call(e){let t=this.middlewares.concat([async({ctx:t})=>{let r=await this.parseInput(e.rawInput),n=await this.resolver({...e,ctx:t,input:r});return{marker:D,ok:!0,data:await this.parseOutput(n),ctx:t}}]),r=async(n={index:0,ctx:e.ctx})=>{try{return await t[n.index]({ctx:n.ctx,type:e.type,path:e.path,rawInput:e.rawInput,meta:this.meta,next:async e=>await r({index:n.index+1,ctx:e?e.ctx:n.ctx})})}catch(e){return{ctx:n.ctx,ok:!1,error:getTRPCErrorFromUnknown(e),marker:D}}},n=await r();if(!n)throw new TRPCError({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!n.ok)throw n.error;return n.data}inheritMiddlewares(e){return new this.constructor({middlewares:[...e,...this.middlewares],resolver:this.resolver,inputParser:this.inputParser,outputParser:this.outputParser,meta:this.meta})}constructor(e){this.middlewares=e.middlewares,this.resolver=e.resolver,this.inputParser=e.inputParser,this.parseInputFn=H(this.inputParser),this.outputParser=e.outputParser,this.parseOutputFn=H(this.outputParser),this.meta=e.meta}}function L(e){let t="input"in e?e.input:e=>{if(null!=e)throw new TRPCError({code:"BAD_REQUEST",message:"No input expected"})},r="output"in e&&e.output?e.output:e=>e;return new K({inputParser:t,resolver:e.resolve,middlewares:[],outputParser:r,meta:e.meta})}function $(e){if("function"==typeof e)return e;if("function"==typeof e.parseAsync)return e.parseAsync.bind(e);if("function"==typeof e.parse)return e.parse.bind(e);if("function"==typeof e.validateSync)return e.validateSync.bind(e);if("function"==typeof e.create)return e.create.bind(e);if("function"==typeof e.assert)return t=>(e.assert(t),t);throw Error("Could not find a validator fn")}function B(e,...t){let r=Object.assign(Object.create(null),e);for(let e of t)for(let t in e){if(t in r&&r[t]!==e[t])throw Error(`Duplicate key ${t}`);r[t]=e[t]}return r}function z(e){return e&&"object"==typeof e&&!Array.isArray(e)}function F(e){let t=async({next:t,rawInput:r,input:n})=>{let i;try{i=await e(r)}catch(e){throw new g({code:"BAD_REQUEST",cause:e})}return t({input:z(n)&&z(i)?{...n,...i}:i})};return t._type="input",t}function q(e){let t=async({next:t})=>{let r=await t();if(!r.ok)return r;try{let t=await e(r.data);return{...r,data:t}}catch(e){throw new g({message:"Output validation failed",code:"INTERNAL_SERVER_ERROR",cause:e})}};return t._type="output",t}let G="middlewareMarker";function V(e,t){let{middlewares:r=[],inputs:n,meta:i,...o}=t;return Y({...B(e,o),inputs:[...e.inputs,...n??[]],middlewares:[...e.middlewares,...r],meta:e.meta&&i?{...e.meta,...i}:i??e.meta})}function Y(e={}){let t={inputs:[],middlewares:[],...e};return{_def:t,input(e){let r=$(e);return V(t,{inputs:[e],middlewares:[F(r)]})},output(e){let r=$(e);return V(t,{output:e,middlewares:[q(r)]})},meta:e=>V(t,{meta:e}),unstable_concat:e=>V(t,e._def),use:e=>V(t,{middlewares:"_middlewares"in e?e._middlewares:[e]}),query:e=>X({...t,query:!0},e),mutation:e=>X({...t,mutation:!0},e),subscription:e=>X({...t,subscription:!0},e)}}function X(e,t){return function(e){let t=async function(t){if(!t||!("rawInput"in t))throw Error(Z);let r=async(n={index:0,ctx:t.ctx})=>{try{let i=e.middlewares[n.index];return await i({ctx:n.ctx,type:t.type,path:t.path,rawInput:n.rawInput??t.rawInput,meta:e.meta,input:n.input,next:e=>r({index:n.index+1,ctx:e&&"ctx"in e?{...n.ctx,...e.ctx}:n.ctx,input:e&&"input"in e?e.input:n.input,rawInput:e&&"rawInput"in e?e.rawInput:n.rawInput})})}catch(e){return{ok:!1,error:_(e),marker:G}}},n=await r();if(!n)throw new g({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!n.ok)throw n.error;return n.data};return t._def=e,t.meta=e.meta,t}(V(e,{resolver:t,middlewares:[async function(e){return{marker:G,ok:!0,data:await t(e),ctx:e.ctx}}]})._def)}let Z=`
If you want to call this function on the server, you do the following:
This is a client-only function.

const caller = appRouter.createCaller({
  /* ... your context */
});

const result = await caller.call('myProcedure', input);
`.trim();function Q(e,t){var r,n;let i=e._def(),o=(r=i.inputParser)?$(r):e=>e,a=(n=i.outputParser)?$(n):e=>e,s=F(o);return Y({inputs:[i.inputParser],middlewares:[...i.middlewares,s,q(a)],meta:i.meta,output:i.outputParser,mutation:"mutation"===t,query:"query"===t,subscription:"subscription"===t})[t](e=>i.resolver(e))}let ee={query:"queries",mutation:"mutations",subscription:"subscriptions"};function et(...e){return Object.assign(Object.create(null),...e)}class er{static prefixProcedures(e,t){let r=et();for(let[n,i]of Object.entries(e))r[t+n]=i;return r}query(e,t){let r=new er({queries:et({[e]:L(t)})});return this.merge(r)}mutation(e,t){let r=new er({mutations:et({[e]:L(t)})});return this.merge(r)}subscription(e,t){let r=new er({subscriptions:et({[e]:L(t)})});return this.merge(r)}merge(e,t){let r,n="";if("string"==typeof e&&t instanceof er)n=e,r=t;else if(e instanceof er)r=e;else throw Error("Invalid args");let i=[...Object.keys(r._def.queries).filter(e=>!!this._def.queries[n+e]),...Object.keys(r._def.mutations).filter(e=>!!this._def.mutations[n+e]),...Object.keys(r._def.subscriptions).filter(e=>!!this._def.subscriptions[n+e])];if(i.length)throw Error(`Duplicate endpoint(s): ${i.join(", ")}`);let o=e=>{let t=et();for(let[r,n]of Object.entries(e)){let e=n.inheritMiddlewares(this._def.middlewares);t[r]=e}return er.prefixProcedures(t,n)};return new er({...this._def,queries:et(this._def.queries,o(r._def.queries)),mutations:et(this._def.mutations,o(r._def.mutations)),subscriptions:et(this._def.subscriptions,o(r._def.subscriptions))})}async call(e){let{type:t,path:r}=e,n=ee[t],i=this._def[n][r];if(!i)throw new TRPCError({code:"NOT_FOUND",message:`No "${t}"-procedure on path "${r}"`});return i.call(e)}createCaller(e){return{query:(t,...r)=>this.call({type:"query",ctx:e,path:t,rawInput:r[0]}),mutation:(t,...r)=>this.call({type:"mutation",ctx:e,path:t,rawInput:r[0]}),subscription:(t,...r)=>this.call({type:"subscription",ctx:e,path:t,rawInput:r[0]})}}middleware(e){return new er({...this._def,middlewares:[...this._def.middlewares,e]})}formatError(e){if(this._def.errorFormatter!==defaultFormatter)throw Error("You seem to have double `formatError()`-calls in your router tree");return new er({...this._def,errorFormatter:e})}getErrorShape(e){let{path:t,error:r}=e,{code:n}=e.error,i={message:r.message,code:TRPC_ERROR_CODES_BY_KEY[n],data:{code:n,httpStatus:getHTTPStatusCodeFromError(r)}};return globalThis.process?.env?.NODE_ENV!=="production"&&"string"==typeof e.error.stack&&(i.data.stack=e.error.stack),"string"==typeof t&&(i.data.path=t),this._def.errorFormatter({...e,shape:i})}transformer(e){if(this._def.transformer!==defaultTransformer)throw Error("You seem to have double `transformer()`-calls in your router tree");return new er({...this._def,transformer:"input"in e?e:{input:e,output:e}})}flat(){return this}interop(){return function(e){let t=e._def.errorFormatter,r=e._def.transformer,n={},i={},o={};for(let[t,r]of Object.entries(e._def.queries))n[t]=Q(r,"query");for(let[t,r]of Object.entries(e._def.mutations))i[t]=Q(r,"mutation");for(let[t,r]of Object.entries(e._def.subscriptions))o[t]=Q(r,"subscription");let a=B(n,i,o);return createRouterFactory({transformer:r,errorFormatter:t,isDev:!1})(a)}(this)}constructor(e){this._def={queries:e?.queries??et(),mutations:e?.mutations??et(),subscriptions:e?.subscriptions??et(),middlewares:e?.middlewares??[],errorFormatter:e?.errorFormatter??defaultFormatter,transformer:e?.transformer??defaultTransformer}}}function en(...e){let t=B({},...e.map(e=>e._def.record));return k({errorFormatter:e.reduce((e,t)=>{if(t._def._config.errorFormatter&&t._def._config.errorFormatter!==w){if(e!==w&&e!==t._def._config.errorFormatter)throw Error("You seem to have several error formatters");return t._def._config.errorFormatter}return e},w),transformer:e.reduce((e,t)=>{if(t._def._config.transformer&&t._def._config.transformer!==v){if(e!==v&&e!==t._def._config.transformer)throw Error("You seem to have several transformers");return t._def._config.transformer}return e},v),isDev:e.some(e=>e._def._config.isDev),allowOutsideOfServer:e.some(e=>e._def._config.allowOutsideOfServer),isServer:e.some(e=>e._def._config.isServer),$types:e[0]?._def._config.$types})(t)}class ei{context(){return new ei}meta(){return new ei}create(e){return function(e){var t;let r=e?.errorFormatter??w,n={transformer:"input"in(t=e?.transformer??v)?t:{input:t,output:t},isDev:e?.isDev??globalThis.process?.env?.NODE_ENV!=="production",allowOutsideOfServer:e?.allowOutsideOfServer??!1,errorFormatter:r,isServer:e?.isServer??A,$types:y(e=>{throw Error(`Tried to access "$types.${e}" which is not available at runtime`)})};if(!(e?.isServer??A)&&e?.allowOutsideOfServer!==!0)throw Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.");return{_config:n,procedure:Y({meta:e?.defaultMeta}),middleware:function(e){return function e(t){return{_middlewares:t,unstable_pipe:r=>e([...t,..."_middlewares"in r?r._middlewares:[r]])}}([e])},router:k(n),mergeRouters:en}}(e)}}let eo=new ei;var ea=r(2766);function es(e,t){if(!e)throw Error("[Dinero.js] ".concat(t))}!function(e){e[e.LT=-1]="LT",e[e.EQ=0]="EQ",e[e.GT=1]="GT"}(n||(n={}));var el=function(e){var t=e.calculator,r=e.onCreate,n=e.formatter,i=void 0===n?{toNumber:Number,toString:String}:n;return function e(n){var o=n.amount,a=n.currency,s=a.code,l=a.base,c=a.exponent,u=n.scale,d=void 0===u?c:u,p={code:s,base:l,exponent:c};return null==r||r({amount:o,currency:p,scale:d}),{calculator:t,formatter:i,create:e,toJSON:function(){return{amount:o,currency:p,scale:d}}}}}({calculator:{add:function(e,t){return e+t},compare:function(e,t){return e<t?n.LT:e>t?n.GT:n.EQ},decrement:function(e){return e-1},increment:function(e){return e+1},integerDivide:function(e,t){return Math.trunc(e/t)},modulo:function(e,t){return e%t},multiply:function(e,t){return e*t},power:function(e,t){return Math.pow(e,t)},subtract:function(e,t){return e-t},zero:function(){return 0}},onCreate:function(e){var t=e.amount,r=e.scale;es(Number.isInteger(t),"Amount is invalid."),es(Number.isInteger(r),"Scale is invalid.")}});class ec{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,t){this.keyToValue.set(e,t),this.valueToKey.set(t,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class eu{constructor(e){this.generateIdentifier=e,this.kv=new ec}register(e,t){this.kv.getByValue(e)||(t||(t=this.generateIdentifier(e)),this.kv.set(t,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class ed extends eu{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,t){"object"==typeof t?(t.allowProps&&this.classToAllowedProps.set(e,t.allowProps),super.register(e,t.identifier)):super.register(e,t)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function ep(e,t){Object.entries(e).forEach(([e,r])=>t(r,e))}function ef(e,t){return -1!==e.indexOf(t)}function eh(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n}}class ey{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return function(e,t){let r=function(e){if("values"in Object)return Object.values(e);let t=[];for(let r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}(e);if("find"in r)return r.find(t);for(let e=0;e<r.length;e++){let n=r[e];if(t(n))return n}}(this.transfomers,t=>t.isApplicable(e))}findByName(e){return this.transfomers[e]}}let e_=e=>Object.prototype.toString.call(e).slice(8,-1),em=e=>void 0===e,eg=e=>null===e,ev=e=>"object"==typeof e&&null!==e&&e!==Object.prototype&&(null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e)===Object.prototype),ew=e=>ev(e)&&0===Object.keys(e).length,eb=e=>Array.isArray(e),eE=e=>"string"==typeof e,eS=e=>"number"==typeof e&&!isNaN(e),ek=e=>"boolean"==typeof e,eP=e=>e instanceof Map,eA=e=>e instanceof Set,eO=e=>"Symbol"===e_(e),eT=e=>"number"==typeof e&&isNaN(e),eI=e=>ek(e)||eg(e)||em(e)||eS(e)||eE(e)||eO(e),ex=e=>e===1/0||e===-1/0,eC=e=>e.replace(/\./g,"\\."),eR=e=>e.map(String).map(eC).join("."),ej=e=>{let t=[],r="";for(let n=0;n<e.length;n++){let i=e.charAt(n);if("\\"===i&&"."===e.charAt(n+1)){r+=".",n++;continue}if("."===i){t.push(r),r="";continue}r+=i}let n=r;return t.push(n),t};function eN(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}let eU=[eN(em,"undefined",()=>null,()=>void 0),eN(e=>"bigint"==typeof e,"bigint",e=>e.toString(),e=>"undefined"!=typeof BigInt?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),eN(e=>e instanceof Date&&!isNaN(e.valueOf()),"Date",e=>e.toISOString(),e=>new Date(e)),eN(e=>e instanceof Error,"Error",(e,t)=>{let r={name:e.name,message:e.message};return t.allowedErrorProps.forEach(t=>{r[t]=e[t]}),r},(e,t)=>{let r=Error(e.message);return r.name=e.name,r.stack=e.stack,t.allowedErrorProps.forEach(t=>{r[t]=e[t]}),r}),eN(e=>e instanceof RegExp,"regexp",e=>""+e,e=>new RegExp(e.slice(1,e.lastIndexOf("/")),e.slice(e.lastIndexOf("/")+1))),eN(eA,"set",e=>[...e.values()],e=>new Set(e)),eN(eP,"map",e=>[...e.entries()],e=>new Map(e)),eN(e=>eT(e)||ex(e),"number",e=>eT(e)?"NaN":e>0?"Infinity":"-Infinity",Number),eN(e=>0===e&&1/e==-1/0,"number",()=>"-0",Number),eN(e=>e instanceof URL,"URL",e=>e.toString(),e=>new URL(e))];function eW(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}let eM=eW((e,t)=>!!eO(e)&&!!t.symbolRegistry.getIdentifier(e),(e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)],e=>e.description,(e,t,r)=>{let n=r.symbolRegistry.getValue(t[1]);if(!n)throw Error("Trying to deserialize unknown symbol");return n}),eJ=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,t)=>(e[t.name]=t,e),{}),eD=eW(e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),e=>["typed-array",e.constructor.name],e=>[...e],(e,t)=>{let r=eJ[t[1]];if(!r)throw Error("Trying to deserialize unknown typed array");return new r(e)});function eH(e,t){return!!e?.constructor&&!!t.classRegistry.getIdentifier(e.constructor)}let eK=eW(eH,(e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)],(e,t)=>{let r=t.classRegistry.getAllowedProps(e.constructor);if(!r)return{...e};let n={};return r.forEach(t=>{n[t]=e[t]}),n},(e,t,r)=>{let n=r.classRegistry.getValue(t[1]);if(!n)throw Error("Trying to deserialize unknown class - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564");return Object.assign(Object.create(n.prototype),e)}),eL=eW((e,t)=>!!t.customTransformerRegistry.findApplicable(e),(e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name],(e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e),(e,t,r)=>{let n=r.customTransformerRegistry.findByName(t[1]);if(!n)throw Error("Trying to deserialize unknown custom value");return n.deserialize(e)}),e$=[eK,eM,eL,eD],eB=(e,t)=>{let r=eh(e$,r=>r.isApplicable(e,t));if(r)return{value:r.transform(e,t),type:r.annotation(e,t)};let n=eh(eU,r=>r.isApplicable(e,t));if(n)return{value:n.transform(e,t),type:n.annotation}},ez={};eU.forEach(e=>{ez[e.annotation]=e});let eF=(e,t,r)=>{if(eb(t))switch(t[0]){case"symbol":return eM.untransform(e,t,r);case"class":return eK.untransform(e,t,r);case"custom":return eL.untransform(e,t,r);case"typed-array":return eD.untransform(e,t,r);default:throw Error("Unknown transformation: "+t)}else{let n=ez[t];if(!n)throw Error("Unknown transformation: "+t);return n.untransform(e,r)}},eq=(e,t)=>{let r=e.keys();for(;t>0;)r.next(),t--;return r.next().value};function eG(e){if(ef(e,"__proto__"))throw Error("__proto__ is not allowed as a property");if(ef(e,"prototype"))throw Error("prototype is not allowed as a property");if(ef(e,"constructor"))throw Error("constructor is not allowed as a property")}let eV=(e,t)=>{eG(t);for(let r=0;r<t.length;r++){let n=t[r];if(eA(e))e=eq(e,+n);else if(eP(e)){let i=+n,o=0==+t[++r]?"key":"value",a=eq(e,i);switch(o){case"key":e=a;break;case"value":e=e.get(a)}}else e=e[n]}return e},eY=(e,t,r)=>{if(eG(t),0===t.length)return r(e);let n=e;for(let e=0;e<t.length-1;e++){let r=t[e];if(eb(n))n=n[+r];else if(ev(n))n=n[r];else if(eA(n))n=eq(n,+r);else if(eP(n)){if(e===t.length-2)break;let i=+r,o=0==+t[++e]?"key":"value",a=eq(n,i);switch(o){case"key":n=a;break;case"value":n=n.get(a)}}}let i=t[t.length-1];if(eb(n)?n[+i]=r(n[+i]):ev(n)&&(n[i]=r(n[i])),eA(n)){let e=eq(n,+i),t=r(e);e!==t&&(n.delete(e),n.add(t))}if(eP(n)){let e=eq(n,+t[t.length-2]);switch(0==+i?"key":"value"){case"key":{let t=r(e);n.set(t,n.get(e)),t!==e&&n.delete(e);break}case"value":n.set(e,r(n.get(e)))}}return e},eX=(e,t)=>ev(e)||eb(e)||eP(e)||eA(e)||eH(e,t),eZ=(e,t,r,n,i=[],o=[],a=new Map)=>{let s=eI(e);if(!s){!function(e,t,r){let n=r.get(e);n?n.push(t):r.set(e,[t])}(e,i,t);let r=a.get(e);if(r)return n?{transformedValue:null}:r}if(!eX(e,r)){let t=eB(e,r),n=t?{transformedValue:t.value,annotations:[t.type]}:{transformedValue:e};return s||a.set(e,n),n}if(ef(o,e))return{transformedValue:null};let l=eB(e,r),c=l?.value??e,u=eb(c)?[]:{},d={};ep(c,(s,l)=>{if("__proto__"===l||"constructor"===l||"prototype"===l)throw Error(`Detected property ${l}. This is a prototype pollution risk, please remove it from your object.`);let c=eZ(s,t,r,n,[...i,l],[...o,e],a);u[l]=c.transformedValue,eb(c.annotations)?d[l]=c.annotations:ev(c.annotations)&&ep(c.annotations,(e,t)=>{d[eC(l)+"."+t]=e})});let p=ew(d)?{transformedValue:u,annotations:l?[l.type]:void 0}:{transformedValue:u,annotations:l?[l.type,d]:d};return s||a.set(e,p),p};function eQ(e){return Object.prototype.toString.call(e).slice(8,-1)}function e0(e){return"Array"===eQ(e)}class e1{constructor({dedupe:e=!1}={}){this.classRegistry=new ed,this.symbolRegistry=new eu(e=>e.description??""),this.customTransformerRegistry=new ey,this.allowedErrorProps=[],this.dedupe=e}serialize(e){let t=new Map,r=eZ(e,t,this,this.dedupe),n={json:r.transformedValue};r.annotations&&(n.meta={...n.meta,values:r.annotations});let i=function(e,t){let r;let n={};return(e.forEach(e=>{if(e.length<=1)return;t||(e=e.map(e=>e.map(String)).sort((e,t)=>e.length-t.length));let[i,...o]=e;0===i.length?r=o.map(eR):n[eR(i)]=o.map(eR)}),r)?ew(n)?[r]:[r,n]:ew(n)?void 0:n}(t,this.dedupe);return i&&(n.meta={...n.meta,referentialEqualities:i}),n}deserialize(e){let{json:t,meta:r}=e,n=function e(t,r={}){return e0(t)?t.map(t=>e(t,r)):!function(e){if("Object"!==eQ(e))return!1;let t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}(t)?t:[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)].reduce((n,i)=>{if(e0(r.props)&&!r.props.includes(i))return n;let o=e(t[i],r);return function(e,t,r,n,i){let o=({}).propertyIsEnumerable.call(n,t)?"enumerable":"nonenumerable";"enumerable"===o&&(e[t]=r),i&&"nonenumerable"===o&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}(n,i,o,t,r.nonenumerable),n},{})}(t);if(r?.values){var i,o,a;i=n,o=r.values,a=this,function e(t,r,n=[]){if(!t)return;if(!eb(t)){ep(t,(t,i)=>e(t,r,[...n,...ej(i)]));return}let[i,o]=t;o&&ep(o,(t,i)=>{e(t,r,[...n,...ej(i)])}),r(i,n)}(o,(e,t)=>{i=eY(i,t,t=>eF(t,e,a))}),n=i}return r?.referentialEqualities&&(n=function(e,t){function r(t,r){let n=eV(e,ej(r));t.map(ej).forEach(t=>{e=eY(e,t,()=>n)})}if(eb(t)){let[n,i]=t;n.forEach(t=>{e=eY(e,ej(t),()=>e)}),i&&ep(i,r)}else ep(t,r);return e}(n,r.referentialEqualities)),n}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,t){this.classRegistry.register(e,t)}registerSymbol(e,t){this.symbolRegistry.register(e,t)}registerCustom(e,t){this.customTransformerRegistry.register({name:t,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}e1.defaultInstance=new e1,e1.serialize=e1.defaultInstance.serialize.bind(e1.defaultInstance),e1.deserialize=e1.defaultInstance.deserialize.bind(e1.defaultInstance),e1.stringify=e1.defaultInstance.stringify.bind(e1.defaultInstance),e1.parse=e1.defaultInstance.parse.bind(e1.defaultInstance),e1.registerClass=e1.defaultInstance.registerClass.bind(e1.defaultInstance),e1.registerSymbol=e1.defaultInstance.registerSymbol.bind(e1.defaultInstance),e1.registerCustom=e1.defaultInstance.registerCustom.bind(e1.defaultInstance),e1.allowErrorProps=e1.defaultInstance.allowErrorProps.bind(e1.defaultInstance),e1.serialize,e1.deserialize,e1.stringify,e1.parse,e1.registerClass,e1.registerCustom,e1.registerSymbol,e1.allowErrorProps,e1.registerCustom({isApplicable:e=>{try{return e.calculator.add(1,2),!0}catch{return!1}},serialize:e=>e.toJSON(),deserialize:e=>el(e)},"Dinero");let e2=async e=>({userId:e.auth?.user?.id,user:e.auth?.user,...e}),e5=eo.context().create({transformer:e1,errorFormatter:({shape:e,error:t})=>({...e,data:{...e.data,zodError:t.cause instanceof ea.jm?t.cause.flatten():null}})}),e3=e5.router,e6=e5.procedure,e4=e5.procedure;e5.mergeRouters;let e8=e5.middleware(({next:e,ctx:t})=>{if(!t.userId)throw new g({code:"UNAUTHORIZED"});return e({ctx:{userId:t.userId,user:t.user}})}),e9=e6.use(e8);var e7=r(90358),te=r(26310);let tt=e3({mySubscription:e9.query(async e=>{(0,e7.unstable_noStore)();let t=e.ctx.userId,r=await te.db.selectFrom("Customer").select(["plan","stripeCurrentPeriodEnd"]).where("authUserId","=",t).executeTakeFirst();return r?{plan:r.plan,endsAt:r.stripeCurrentPeriodEnd}:null})});var tr=r(89311),tn=r.n(tr),ti=r(54714),to=r(2203),ta=r(3517);let ts=(0,ta.D)({server:{NEXTAUTH_URL:ea.z.string().url().optional(),NEXTAUTH_SECRET:ea.z.string().min(1),GOOGLE_CLIENT_ID:ea.z.string().min(1),GOOGLE_CLIENT_SECRET:ea.z.string().min(1),GITHUB_CLIENT_ID:ea.z.string().min(1),GITHUB_CLIENT_SECRET:ea.z.string().min(1),STRIPE_API_KEY:ea.z.string().min(1),STRIPE_WEBHOOK_SECRET:ea.z.string().min(1),RESEND_API_KEY:ea.z.string().min(1),RESEND_FROM:ea.z.string().min(1),ADMIN_EMAIL:ea.z.string().optional(),IS_DEBUG:ea.z.string().optional()},client:{NEXT_PUBLIC_APP_URL:ea.z.string().min(1)},runtimeEnv:{NEXTAUTH_URL:process.env.NEXTAUTH_URL,NEXTAUTH_SECRET:process.env.NEXTAUTH_SECRET,GOOGLE_CLIENT_ID:process.env.GOOGLE_CLIENT_ID,GOOGLE_CLIENT_SECRET:process.env.GOOGLE_CLIENT_SECRET,GITHUB_CLIENT_ID:process.env.GITHUB_CLIENT_ID,GITHUB_CLIENT_SECRET:process.env.GITHUB_CLIENT_SECRET,STRIPE_API_KEY:process.env.STRIPE_API_KEY,STRIPE_WEBHOOK_SECRET:process.env.STRIPE_WEBHOOK_SECRET,NEXT_PUBLIC_APP_URL:"http://localhost:3000",RESEND_API_KEY:process.env.RESEND_API_KEY,RESEND_FROM:process.env.RESEND_FROM,ADMIN_EMAIL:process.env.ADMIN_EMAIL,IS_DEBUG:process.env.IS_DEBUG}}),{handlers:tl,auth:tc,signIn:tu,signOut:td}=tn()({providers:[(0,to.Z)({clientId:ts.GOOGLE_CLIENT_ID,clientSecret:ts.GOOGLE_CLIENT_SECRET}),(0,ti.Z)({clientId:ts.GITHUB_CLIENT_ID,clientSecret:ts.GITHUB_CLIENT_SECRET})],pages:{signIn:"/login"},callbacks:{session:async({session:e,token:t})=>{if(t?.sub&&e?.user&&(e.user.id=t.sub),ts.ADMIN_EMAIL&&e?.user?.email){let t=ts.ADMIN_EMAIL.split(",");e.user.isAdmin=t.includes(e.user.email)}return e},jwt:async({user:e,token:t})=>(e&&(t.uid=e.id),t)},session:{strategy:"jwt"}});async function tp(){let e=await tc();return e?.user}let tf=ea.z.object({name:ea.z.string(),userId:ea.z.string()}),th=ea.z.object({userId:ea.z.string()});ea.z.object({userId:ea.z.string()});let ty=e3({updateUserName:e9.input(tf).mutation(async({input:e})=>{let{userId:t}=e,r=await tp();return r&&t===r.id?(await te.db.updateTable("User").set({name:e.name}).where("id","=",t).execute(),{success:!0,reason:""}):{success:!1,reason:"no auth"}}),insertCustomer:e9.input(th).mutation(async({input:e})=>{let{userId:t}=e;await te.db.insertInto("Customer").values({authUserId:t,plan:te.Th.FREE}).executeTakeFirst()}),queryCustomer:e9.input(th).query(async({input:e})=>{(0,e7.unstable_noStore)();let{userId:t}=e;console.log("userId:",t);try{console.log("result:",await te.db.selectFrom("Customer").where("authUserId","=",t).executeTakeFirst())}catch(e){console.error("e:",e)}return await te.db.selectFrom("Customer").where("authUserId","=",t).executeTakeFirst()})}),t_=(0,ta.D)({shared:{NEXT_PUBLIC_STRIPE_PRO_PRODUCT_ID:ea.Z_().optional(),NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID:ea.Z_().optional(),NEXT_PUBLIC_STRIPE_PRO_YEARLY_PRICE_ID:ea.Z_().optional(),NEXT_PUBLIC_STRIPE_BUSINESS_PRODUCT_ID:ea.Z_().optional(),NEXT_PUBLIC_STRIPE_BUSINESS_MONTHLY_PRICE_ID:ea.Z_().optional(),NEXT_PUBLIC_STRIPE_BUSINESS_YEARLY_PRICE_ID:ea.Z_().optional(),NEXTAUTH_URL:ea.Z_()},server:{NEXTAUTH_URL:ea.Z_(),NEXTAUTH_SECRET:ea.Z_().min(1),RESEND_API_KEY:ea.Z_().min(1).optional(),COZE_API_KEY:ea.Z_().min(1).optional(),COZE_API_URL:ea.Z_().default("https://api.coze.cn"),WORKFLOW_ID:ea.Z_().min(1).optional()},runtimeEnv:{NEXTAUTH_URL:process.env.NEXTAUTH_URL,NEXTAUTH_SECRET:process.env.NEXTAUTH_SECRET,RESEND_API_KEY:process.env.RESEND_API_KEY,COZE_API_KEY:process.env.COZE_API_KEY,COZE_API_URL:process.env.COZE_API_URL,WORKFLOW_ID:process.env.WORKFLOW_ID,NEXT_PUBLIC_STRIPE_PRO_PRODUCT_ID:"prod_",NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID:"price_",NEXT_PUBLIC_STRIPE_PRO_YEARLY_PRICE_ID:"price_",NEXT_PUBLIC_STRIPE_BUSINESS_PRODUCT_ID:"prod_",NEXT_PUBLIC_STRIPE_BUSINESS_MONTHLY_PRICE_ID:"price_",NEXT_PUBLIC_STRIPE_BUSINESS_YEARLY_PRICE_ID:"price_"},skipValidation:!!process.env.SKIP_ENV_VALIDATION||"lint"===process.env.npm_lifecycle_event});class tm{constructor(){this.baseUrl=t_.COZE_API_URL||"https://api.coze.cn",this.apiKey=t_.COZE_API_KEY||"",this.timeout=3e4,console.log("\uD83D\uDD27 CozeAPIClient 初始化 - 环境变量检查:",{baseUrl:this.baseUrl,hasApiKey:!!this.apiKey,apiKeyLength:this.apiKey.length,apiKeyPrefix:this.apiKey?this.apiKey.substring(0,10)+"...":"N/A",workflowId:t_.WORKFLOW_ID?"已设置":"未设置",workflowIdValue:t_.WORKFLOW_ID,timeout:this.timeout})}async request(e,t={}){let r=`${this.baseUrl}${e}`,n={Authorization:`Bearer ${this.apiKey}`,"User-Agent":"SaaSfly-AI-Prompt-Generator/1.0.0"},i=new AbortController,o=setTimeout(()=>i.abort(),this.timeout);try{let e=await fetch(r,{...t,headers:{...n,...t.headers},signal:i.signal});if(clearTimeout(o),!e.ok){let t=await e.text();throw Error(`HTTP ${e.status}: ${t}`)}return await e.json()}catch(e){if(clearTimeout(o),e instanceof Error&&"AbortError"===e.name)throw Error("请求超时");throw e}}async uploadImage(e){try{console.log("\uD83D\uDCE4 开始文件上传:",{fileName:e.name,fileSize:e.size,fileType:e.type});let t=new FormData;t.append("file",e),t.append("purpose","prompt_generation"),console.log("\uD83D\uDD27 准备调用Coze文件上传API..."),console.log("\uD83D\uDCCB 请求详情:",{url:`${this.baseUrl}/v1/files/upload`,method:"POST",hasApiKey:!!this.apiKey,apiKeyPrefix:this.apiKey?this.apiKey.substring(0,10)+"...":"N/A",formDataEntries:Array.from(t.entries()).map(([e,t])=>[e,t instanceof File?`File(${t.name}, ${t.size})`:t]),timeout:this.timeout});let r=await this.request("/v1/files/upload",{method:"POST",body:t,headers:{}});if(console.log("\uD83D\uDCE5 文件上传响应:",{code:r.code,message:r.message,hasData:!!r.data}),0!==r.code)throw console.error("❌ 文件上传API返回错误:",r),Error(r.message||r.msg||"文件上传失败");if(!r.data||!r.data.id)throw console.error("❌ 文件上传响应缺少id:",r),Error("文件上传响应缺少id");return console.log("✅ 文件上传成功:",{fileId:r.data.id,fileName:r.data.file_name,fileSize:r.data.bytes}),r.data.id}catch(t){throw console.error("❌ 文件上传失败:",{error:t instanceof Error?t.message:t,stack:t instanceof Error?t.stack:void 0,fileName:e?.name,fileSize:e?.size}),Error("文件上传失败: "+(t instanceof Error?t.message:"未知错误"))}}async generatePrompt(e,t){try{let r;console.log("\uD83D\uDE80 开始上传文件并调用工作流:",{fileName:e.name,fileSize:e.size,fileType:e.type,modelType:t}),console.log("\uD83D\uDCE4 步骤1: 上传文件到Coze...");let n=await this.uploadImage(e);console.log("✅ 文件上传成功, fileId:",n);let i={workflow_id:t_.WORKFLOW_ID,space_id:"7482364475409645579",parameters:{img:`{"file_id": "${n}"}`,promptType:t}};console.log("\uD83D\uDCCB 工作流请求详情:",{url:`${this.baseUrl}/v1/workflow/run`,method:"POST",hasApiKey:!!this.apiKey,apiKeyPrefix:this.apiKey?this.apiKey.substring(0,10)+"...":"N/A",workflowParams:i,headers:{Authorization:`Bearer ${this.apiKey?this.apiKey.substring(0,10)+"...":"N/A"}`,"Content-Type":"application/json","User-Agent":"SaaSfly-AI-Prompt-Generator/1.0.0"}});let o=await fetch(`${this.baseUrl}/v1/workflow/run`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json","User-Agent":"SaaSfly-AI-Prompt-Generator/1.0.0"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout)}),a=await o.text();if(console.log("\uD83D\uDCE5 工作流响应详情:",{status:o.status,statusText:o.statusText,responseText:a.substring(0,1e3)+(a.length>1e3?"...":"")}),!o.ok)throw Error(`HTTP ${o.status}: ${a}`);let s=JSON.parse(a);if(0!==s.code)throw console.error("❌ Coze API返回错误:",s),Error(s.message||s.msg||"工作流调用失败");if("string"==typeof s.data)try{r=JSON.parse(s.data)}catch(e){throw console.error("❌ 解析data字段JSON失败:",e),console.error("❌ data字段内容:",s.data),Error("工作流响应data字段解析失败")}else r=s.data;if(!r||!r.output)throw console.error("❌ 工作流响应缺少output:",s),console.error("❌ parsedData:",r),Error("工作流响应缺少output字段");return console.log("✅ Coze API调用成功:",{code:s.code,message:s.message||s.msg,output_length:r.output.length,usage:s.usage}),r.output}catch(r){throw console.error("❌ 工作流调用失败:",{error:r instanceof Error?r.message:r,stack:r instanceof Error?r.stack:void 0,fileName:e?.name,fileSize:e?.size,modelType:t}),Error("AI生成失败: "+(r instanceof Error?r.message:"未知错误"))}}async healthCheck(){try{return!!this.apiKey&&""!==this.apiKey}catch(e){return console.error("Coze健康检查失败:",e),!1}}}class tg extends tm{constructor(){super()}async uploadImage(e){return await new Promise(e=>setTimeout(e,800+1200*Math.random())),console.log("Mock upload:",e.name),"mock_file_id_"+Date.now()}async generatePrompt(e,t){await new Promise(e=>setTimeout(e,1500+1500*Math.random()));let r={midjourney:["A mystical landscape with floating islands, waterfalls cascading into the clouds, golden hour lighting, epic fantasy art, highly detailed, digital painting, artstation, concept art, matte painting, cinematic, by Greg Rutkowski and Artgerm","Portrait of a cyberpunk ninja in neon-lit Tokyo rain, reflective surfaces, cinematic lighting, detailed character design, science fiction, high quality, sharp focus, 8k","Ancient dragon sleeping on treasure hoard, underground cave with glowing crystals, dramatic lighting, fantasy art, highly detailed, digital painting, by Craig Mullins and Todd Lockwood"],stableDiffusion:["A beautiful landscape photograph of mountains during sunset, golden light, serene atmosphere, professional photography, high resolution, detailed","Modern minimalist living room with large windows, clean design, natural lighting, architectural photography, 4k, detailed","Cute robot reading a book in a cozy library, warm lighting, detailed mechanical design, digital art, charming atmosphere"],flux:["Surreal dreamscape with melting clocks and floating doors, inspired by Salvador Dali, contemporary digital art, vibrant colors, thought-provoking","Futuristic city with organic architecture, bioluminescent plants, flying vehicles, sci-fi concept art, highly detailed, innovative design","Abstract representation of human emotions, flowing colors and shapes, modern digital art, expressive and meaningful"],normal:["A professional headshot of a business person, clean background, good lighting, corporate photography","A red apple on a wooden table, natural lighting, still life photography, detailed","Modern office workspace with computer and supplies, clean and organized, product photography"]},n=r[t]||r.normal;return n[Math.floor(Math.random()*n.length)]||"A beautiful landscape photograph"}async healthCheck(){return!0}}let tv=ea.z.object({image_base64:ea.z.string().min(1,"请提供图片数据"),image_name:ea.z.string().min(1,"请提供图片名称"),model_type:ea.z.enum(["midjourney","stableDiffusion","flux","normal"],{errorMap:()=>({message:"请选择有效的模型类型"})})}),tw={midjourney:["A mystical landscape with floating islands, waterfalls cascading into the clouds, golden hour lighting, epic fantasy art, highly detailed, digital painting, artstation, concept art, matte painting, cinematic, by Greg Rutkowski and Artgerm","Portrait of a cyberpunk ninja in neon-lit Tokyo rain, reflective surfaces, cinematic lighting, detailed character design, science fiction, high quality, sharp focus, 8k","Ancient dragon sleeping on treasure hoard, underground cave with glowing crystals, dramatic lighting, fantasy art, highly detailed, digital painting, by Craig Mullins and Todd Lockwood"],stableDiffusion:["A beautiful landscape photograph of mountains during sunset, golden light, serene atmosphere, professional photography, high resolution, detailed","Modern minimalist living room with large windows, clean design, natural lighting, architectural photography, 4k, detailed","Cute robot reading a book in a cozy library, warm lighting, detailed mechanical design, digital art, charming atmosphere"],flux:["Surreal dreamscape with melting clocks and floating doors, inspired by Salvador Dali, contemporary digital art, vibrant colors, thought-provoking","Futuristic city with organic architecture, bioluminescent plants, flying vehicles, sci-fi concept art, highly detailed, innovative design","Abstract representation of human emotions, flowing colors and shapes, modern digital art, expressive and meaningful"],normal:["A professional headshot of a business person, clean background, good lighting, corporate photography","A red apple on a wooden table, natural lighting, still life photography, detailed","Modern office workspace with computer and supplies, clean and organized, product photography"]},tb=e3({generatePrompt:e4.input(tv).mutation(async({input:e})=>{let{model_type:t,image_base64:r,image_name:n}=e;console.log("\uD83D\uDD27 generatePrompt路由 - zod输入schema验证:",{inputSchema:tv.shape,receivedInput:{model_type:t,image_base64:r?`${r.substring(0,50)}...`:"undefined",image_name:n,base64Length:r?.length||0},schemaValidation:{model_typeValid:["midjourney","stableDiffusion","flux","normal"].includes(t),image_base64Valid:"string"==typeof r&&r.length>0,image_nameValid:"string"==typeof n&&n.length>0}}),console.log("\uD83D\uDD27 Generate Router - 准备创建Coze客户端");let i=(console.log("\uD83D\uDD27 createCozeClient - 环境变量检查:",{hasApiKey:!!t_.COZE_API_KEY,apiKeyLength:t_.COZE_API_KEY?.length||0,apiKeyPrefix:t_.COZE_API_KEY?t_.COZE_API_KEY.substring(0,10)+"...":"N/A",hasWorkflowId:!!t_.WORKFLOW_ID,workflowId:t_.WORKFLOW_ID,workflowIdLength:t_.WORKFLOW_ID?.length||0,decision:t_.COZE_API_KEY&&t_.WORKFLOW_ID?"使用真实Coze客户端":"使用Mock客户端"}),t_.COZE_API_KEY&&t_.WORKFLOW_ID)?(console.log("✅ 环境变量检查通过，创建真实Coze客户端"),new tm):(console.warn("⚠️ COZE_API_KEY或WORKFLOW_ID未配置，将使用Mock数据"),console.warn("\uD83D\uDD27 详细信息:",{missingApiKey:!t_.COZE_API_KEY,missingWorkflowId:!t_.WORKFLOW_ID,apiKeyValue:t_.COZE_API_KEY||"undefined",workflowIdValue:t_.WORKFLOW_ID||"undefined"}),new tg);try{console.log("\uD83D\uDD04 开始处理图片:",{image_name:n,model_type:t,base64Length:r.length,hasBase64Prefix:r.includes(",")});let e=r.split(",")[1]||r,o=Buffer.from(e,"base64"),a=new File([o],n,{type:"image/jpeg"});console.log("\uD83D\uDCC1 图片转换完成:",{fileName:a.name,fileSize:a.size,fileType:a.type,bufferSize:o.length});let s=await i.generatePrompt(a,t);return{success:!0,data:{model:t,prompt:s,analysis:{dominant_colors:["blue","white","gray"],style:"midjourney"===t?"artistic":"realistic",complexity:Math.random()>.5?"high":"medium",subjects:["landscape","architecture","abstract"].filter(()=>Math.random()>.5)},metadata:{processed_at:new Date().toISOString(),image_name:n,processing_time:"2.0s",confidence:.9,api_source:"coze"}}}}catch(e){console.error("❌ Coze API调用失败，使用备用数据:",{error:e instanceof Error?e.message:e,stack:e instanceof Error?e.stack:void 0,errorType:typeof e,errorName:e instanceof Error?e.name:"Unknown",timestamp:new Date().toISOString()})}console.log("使用mock数据作为备用"),await new Promise(e=>setTimeout(e,1e3+2e3*Math.random()));let o=tw[t],a=o[Math.floor(Math.random()*o.length)],s={dominant_colors:["blue","white","gray"],style:"midjourney"===t?"artistic":"realistic",complexity:Math.random()>.5?"high":"medium",subjects:["landscape","architecture","abstract"].filter(()=>Math.random()>.5)};return{success:!0,data:{model:t,prompt:a,analysis:s,metadata:{processed_at:new Date().toISOString(),image_name:n,processing_time:"1.5s",confidence:.85+.1*Math.random(),api_source:"mock"}}}}),generateBatch:e4.input(ea.z.object({requests:ea.z.array(tv).min(1).max(10)})).query(async({input:e})=>{await new Promise(e=>setTimeout(e,2e3));let t=await Promise.all(e.requests.map(async e=>{await new Promise(e=>setTimeout(e,500+1e3*Math.random()));let t=tw[e.model_type],r=t[Math.floor(Math.random()*t.length)];return{model:e.model_type,prompt:r,image_name:e.image_name,success:!0}}));return{success:!0,data:{results:t,total_processed:t.length,processing_time:`${(2+.5*t.length).toFixed(1)}s`}}})}),tE=e3({health:e4.query(async()=>{let e="unknown",t=null;try{await te.db.selectFrom("customer").select("id").limit(1).execute(),e="connected"}catch(r){e="error",t=r instanceof Error?r.message:"Unknown error"}return{status:"connected"===e?"ok":"degraded",timestamp:new Date().toISOString(),uptime:process.uptime(),database:{status:e,error:t}}})}),tS=ea.z.object({id:ea.z.number().optional(),name:ea.z.string(),location:ea.z.string()}),tk=ea.z.object({id:ea.z.number()}),tP=e3({getClusters:e9.query(async e=>{let t=await tp(),r=e.ctx.userId;if(t)return await te.db.selectFrom("K8sClusterConfig").selectAll().where("authUserId","=",r).execute()}),createCluster:e9.input(tS).mutation(async({ctx:e,input:t})=>{let r=e.userId;if(!await tp())throw new g({code:"UNAUTHORIZED",message:"You must be logged in to create a cluster"});try{let e=await te.db.insertInto("K8sClusterConfig").values({name:t.name,location:t.location,network:"Default",plan:te.Th.FREE,authUserId:r}).returning("id").executeTakeFirst();if(!e)throw new g({code:"INTERNAL_SERVER_ERROR",message:"Failed to create the cluster"});return{id:e.id,clusterName:t.name,location:t.location,success:!0}}catch(e){if(e instanceof ea.z.ZodError)throw new g({code:"BAD_REQUEST",cause:e});throw new g({code:"INTERNAL_SERVER_ERROR",cause:e})}}),updateCluster:e9.input(tS).mutation(async e=>{let t=e.input.id,r=e.ctx.userId,n=e.input.name,i=e.input.location,o=await te.db.selectFrom("K8sClusterConfig").selectAll().where("id","=",t).executeTakeFirst();if(!o)throw new g({code:"NOT_FOUND",message:"Cluster not found"});if(o.authUserId&&o.authUserId!==r)throw new g({code:"FORBIDDEN",message:"You don't have access to this cluster"});if(n||i){let e={};n&&(e.name=n),i&&(e.location=i),await te.db.updateTable("K8sClusterConfig").where("id","=",t).set(e).execute()}return{success:!0}}),deleteCluster:e9.input(tk).mutation(async e=>{let t=e.input.id,r=e.ctx.userId,n=await te.db.selectFrom("K8sClusterConfig").selectAll().where("id","=",t).executeTakeFirst();if(!n)throw new g({code:"NOT_FOUND",message:"Cluster not found"});if(n.authUserId&&n.authUserId!==r)throw new g({code:"FORBIDDEN",message:"You don't have access to this cluster"});return await te.db.deleteFrom("K8sClusterConfig").where("id","=",t).execute(),{success:!0}})});var tA=r(53116);let tO=(0,ta.D)({shared:{NEXT_PUBLIC_STRIPE_PRO_PRODUCT_ID:ea.Z_().optional(),NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID:ea.Z_().optional(),NEXT_PUBLIC_STRIPE_PRO_YEARLY_PRICE_ID:ea.Z_().optional(),NEXT_PUBLIC_STRIPE_BUSINESS_PRODUCT_ID:ea.Z_().optional(),NEXT_PUBLIC_STRIPE_BUSINESS_MONTHLY_PRICE_ID:ea.Z_().optional(),NEXT_PUBLIC_STRIPE_BUSINESS_YEARLY_PRICE_ID:ea.Z_().optional()},server:{NEXTAUTH_SECRET:ea.Z_().min(1),RESEND_API_KEY:ea.Z_().optional()},runtimeEnv:{NEXTAUTH_SECRET:process.env.NEXTAUTH_SECRET,RESEND_API_KEY:process.env.RESEND_API_KEY,NEXT_PUBLIC_STRIPE_PRO_PRODUCT_ID:"prod_",NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID:"price_",NEXT_PUBLIC_STRIPE_PRO_YEARLY_PRICE_ID:"price_",NEXT_PUBLIC_STRIPE_BUSINESS_PRODUCT_ID:"prod_",NEXT_PUBLIC_STRIPE_BUSINESS_MONTHLY_PRICE_ID:"price_",NEXT_PUBLIC_STRIPE_BUSINESS_YEARLY_PRICE_ID:"price_"},skipValidation:!!process.env.SKIP_ENV_VALIDATION||"lint"===process.env.npm_lifecycle_event}),tT=[{title:"Starter",description:"For Beginners",benefits:["Up to 100 monthly posts","Basic analytics and reporting","Access to standard templates"],limitations:["No priority access to new features.","Limited customer support","No custom branding","Limited access to business resources."],prices:{monthly:0,yearly:0},stripeIds:{monthly:null,yearly:null}},{title:"Pro",description:"Unlock Advanced Features",benefits:["Up to 500 monthly posts","Advanced analytics and reporting","Access to business templates","Priority customer support","Exclusive webinars and training."],limitations:["No custom branding","Limited access to business resources."],prices:{monthly:15,yearly:144},stripeIds:{monthly:tO.NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID,yearly:tO.NEXT_PUBLIC_STRIPE_BUSINESS_MONTHLY_PRICE_ID}},{title:"Business",description:"For Power Users",benefits:["Unlimited posts","Real-time analytics and reporting","Access to all templates, including custom branding","24/7 business customer support","Personalized onboarding and account management."],limitations:[],prices:{monthly:30,yearly:300},stripeIds:{monthly:tO.NEXT_PUBLIC_STRIPE_PRO_YEARLY_PRICE_ID,yearly:tO.NEXT_PUBLIC_STRIPE_BUSINESS_YEARLY_PRICE_ID}}],tI=e3({createSession:e9.input(ea.z.object({planId:ea.z.string()})).mutation(async e=>{let t=e.ctx.userId,r=e.input.planId,n=await te.db.selectFrom("Customer").select(["id","plan","stripeCustomerId"]).where("authUserId","=",t).executeTakeFirst(),i=t_.NEXTAUTH_URL+"/dashboard";if(n&&"FREE"!==n.plan)return{success:!0,url:(await tA.A.billingPortal.sessions.create({customer:n.stripeCustomerId,return_url:i})).url};let o=await tp();if(!o)return null;let a=o.email,s=await tA.A.checkout.sessions.create({mode:"subscription",payment_method_types:["card"],customer_email:a,client_reference_id:t,subscription_data:{metadata:{userId:t}},cancel_url:i,success_url:i,line_items:[{price:r,quantity:1}]});return s.url?{success:!0,url:s.url}:{success:!1}}),userPlans:e9.query(async e=>{(0,e7.unstable_noStore)();let t=e.ctx.userId,r=await te.db.selectFrom("Customer").select(["stripeSubscriptionId","stripeCurrentPeriodEnd","stripeCustomerId","stripePriceId"]).where("authUserId","=",t).executeTakeFirst();if(!r){console.log("Custom not found:",t);return}let n=r.stripePriceId&&r.stripeCurrentPeriodEnd&&r.stripeCurrentPeriodEnd.getTime()+864e5>Date.now(),i=tT.find(e=>e.stripeIds.monthly===r.stripePriceId)??tT.find(e=>e.stripeIds.yearly===r.stripePriceId),o=n&&i?i:tT[0],a=n?i?.stripeIds.monthly===r.stripePriceId?"month":i?.stripeIds.yearly===r.stripePriceId?"year":null:null,s=!1;return n&&r.stripeSubscriptionId&&(s=(await tA.A.subscriptions.retrieve(r.stripeSubscriptionId)).cancel_at_period_end),{...o,...r,stripeCurrentPeriodEnd:r.stripeCurrentPeriodEnd?.getTime()??0,isPaid:n,interval:a,isCanceled:s}})}),tx=e3({stripe:tI,healthCheck:tE,generate:tb,k8s:tP,auth:tt,customer:ty}),tC=async e=>{try{return e2({headers:e.headers,auth:null})}catch(t){return console.log("Auth error, using empty context:",t instanceof Error?t.message:String(t)),e2({headers:e.headers,auth:null})}},tR=e=>J({endpoint:"/api/trpc/edge",router:tx,req:e,createContext:()=>tC(e),onError:({error:e,path:t})=>{console.log("Error in tRPC handler (edge) on path",t),console.error(e)}}),tj=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/trpc/edge/[trpc]/route",pathname:"/api/trpc/edge/[trpc]",filename:"route",bundlePath:"app/api/trpc/edge/[trpc]/route"},resolvedPagePath:"/Users/waiting/Documents/VS/img prommpt/saasfly/apps/nextjs/src/app/api/trpc/edge/[trpc]/route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:tN,staticGenerationAsyncStorage:tU,serverHooks:tW}=tj,tM="/api/trpc/edge/[trpc]/route";function tJ(){return(0,s.patchFetch)({serverHooks:tW,staticGenerationAsyncStorage:tU})}},70849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.hkdf=void 0;let n=r(19825);function i(e,t){if("string"==typeof e)return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}async function o(e,t,r,o,a){return(0,n.default)(function(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw TypeError('unsupported "digest" value')}}(e),function(e){let t=i(e,"ikm");if(!t.byteLength)throw TypeError('"ikm" must be at least one byte in length');return t}(t),i(r,"salt"),function(e){let t=i(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}(o),function(e,t){if("number"!=typeof e||!Number.isInteger(e)||e<1)throw TypeError('"keylen" must be a positive integer');if(e>255*(parseInt(t.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return e}(a,e))}t.hkdf=o,t.default=o},19177:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113);t.default=(e,t,r,i,o)=>{let a=parseInt(e.substr(3),10)>>3||20,s=(0,n.createHmac)(e,r.byteLength?r:new Uint8Array(a)).update(t).digest(),l=Math.ceil(o/a),c=new Uint8Array(a*l+i.byteLength+1),u=0,d=0;for(let t=1;t<=l;t++)c.set(i,d),c[d+i.byteLength]=t,c.set((0,n.createHmac)(e,s).update(c.subarray(u,d+i.byteLength+1)).digest(),d),u=d,d+=a;return c.slice(0,o)}},19825:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});let i=r(6113),o=r(19177);"function"!=typeof i.hkdf||process.versions.electron||(n=async(...e)=>new Promise((t,r)=>{i.hkdf(...e,(e,n)=>{e?r(e):t(new Uint8Array(n))})})),t.default=async(e,t,r,i,a)=>(n||o.default)(e,t,r,i,a)},85300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cryptoRuntime=t.base64url=t.generateSecret=t.generateKeyPair=t.errors=t.decodeJwt=t.decodeProtectedHeader=t.importJWK=t.importX509=t.importPKCS8=t.importSPKI=t.exportJWK=t.exportSPKI=t.exportPKCS8=t.UnsecuredJWT=t.createRemoteJWKSet=t.createLocalJWKSet=t.EmbeddedJWK=t.calculateJwkThumbprintUri=t.calculateJwkThumbprint=t.EncryptJWT=t.SignJWT=t.GeneralSign=t.FlattenedSign=t.CompactSign=t.FlattenedEncrypt=t.CompactEncrypt=t.jwtDecrypt=t.jwtVerify=t.generalVerify=t.flattenedVerify=t.compactVerify=t.GeneralEncrypt=t.generalDecrypt=t.flattenedDecrypt=t.compactDecrypt=void 0;var n=r(44616);Object.defineProperty(t,"compactDecrypt",{enumerable:!0,get:function(){return n.compactDecrypt}});var i=r(34970);Object.defineProperty(t,"flattenedDecrypt",{enumerable:!0,get:function(){return i.flattenedDecrypt}});var o=r(17351);Object.defineProperty(t,"generalDecrypt",{enumerable:!0,get:function(){return o.generalDecrypt}});var a=r(86003);Object.defineProperty(t,"GeneralEncrypt",{enumerable:!0,get:function(){return a.GeneralEncrypt}});var s=r(52555);Object.defineProperty(t,"compactVerify",{enumerable:!0,get:function(){return s.compactVerify}});var l=r(90526);Object.defineProperty(t,"flattenedVerify",{enumerable:!0,get:function(){return l.flattenedVerify}});var c=r(61730);Object.defineProperty(t,"generalVerify",{enumerable:!0,get:function(){return c.generalVerify}});var u=r(38756);Object.defineProperty(t,"jwtVerify",{enumerable:!0,get:function(){return u.jwtVerify}});var d=r(4258);Object.defineProperty(t,"jwtDecrypt",{enumerable:!0,get:function(){return d.jwtDecrypt}});var p=r(21879);Object.defineProperty(t,"CompactEncrypt",{enumerable:!0,get:function(){return p.CompactEncrypt}});var f=r(58757);Object.defineProperty(t,"FlattenedEncrypt",{enumerable:!0,get:function(){return f.FlattenedEncrypt}});var h=r(83537);Object.defineProperty(t,"CompactSign",{enumerable:!0,get:function(){return h.CompactSign}});var y=r(18798);Object.defineProperty(t,"FlattenedSign",{enumerable:!0,get:function(){return y.FlattenedSign}});var _=r(52815);Object.defineProperty(t,"GeneralSign",{enumerable:!0,get:function(){return _.GeneralSign}});var m=r(14557);Object.defineProperty(t,"SignJWT",{enumerable:!0,get:function(){return m.SignJWT}});var g=r(87353);Object.defineProperty(t,"EncryptJWT",{enumerable:!0,get:function(){return g.EncryptJWT}});var v=r(62778);Object.defineProperty(t,"calculateJwkThumbprint",{enumerable:!0,get:function(){return v.calculateJwkThumbprint}}),Object.defineProperty(t,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return v.calculateJwkThumbprintUri}});var w=r(64173);Object.defineProperty(t,"EmbeddedJWK",{enumerable:!0,get:function(){return w.EmbeddedJWK}});var b=r(32505);Object.defineProperty(t,"createLocalJWKSet",{enumerable:!0,get:function(){return b.createLocalJWKSet}});var E=r(6877);Object.defineProperty(t,"createRemoteJWKSet",{enumerable:!0,get:function(){return E.createRemoteJWKSet}});var S=r(90231);Object.defineProperty(t,"UnsecuredJWT",{enumerable:!0,get:function(){return S.UnsecuredJWT}});var k=r(20287);Object.defineProperty(t,"exportPKCS8",{enumerable:!0,get:function(){return k.exportPKCS8}}),Object.defineProperty(t,"exportSPKI",{enumerable:!0,get:function(){return k.exportSPKI}}),Object.defineProperty(t,"exportJWK",{enumerable:!0,get:function(){return k.exportJWK}});var P=r(30587);Object.defineProperty(t,"importSPKI",{enumerable:!0,get:function(){return P.importSPKI}}),Object.defineProperty(t,"importPKCS8",{enumerable:!0,get:function(){return P.importPKCS8}}),Object.defineProperty(t,"importX509",{enumerable:!0,get:function(){return P.importX509}}),Object.defineProperty(t,"importJWK",{enumerable:!0,get:function(){return P.importJWK}});var A=r(46043);Object.defineProperty(t,"decodeProtectedHeader",{enumerable:!0,get:function(){return A.decodeProtectedHeader}});var O=r(3764);Object.defineProperty(t,"decodeJwt",{enumerable:!0,get:function(){return O.decodeJwt}}),t.errors=r(96390);var T=r(54684);Object.defineProperty(t,"generateKeyPair",{enumerable:!0,get:function(){return T.generateKeyPair}});var I=r(805);Object.defineProperty(t,"generateSecret",{enumerable:!0,get:function(){return I.generateSecret}}),t.base64url=r(32008);var x=r(29695);Object.defineProperty(t,"cryptoRuntime",{enumerable:!0,get:function(){return x.default}})},44616:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactDecrypt=void 0;let n=r(34970),i=r(96390),o=r(42914);async function a(e,t,r){if(e instanceof Uint8Array&&(e=o.decoder.decode(e)),"string"!=typeof e)throw new i.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:a,1:s,2:l,3:c,4:u,length:d}=e.split(".");if(5!==d)throw new i.JWEInvalid("Invalid Compact JWE");let p=await (0,n.flattenedDecrypt)({ciphertext:c,iv:l||void 0,protected:a||void 0,tag:u||void 0,encrypted_key:s||void 0},t,r),f={plaintext:p.plaintext,protectedHeader:p.protectedHeader};return"function"==typeof t?{...f,key:p.key}:f}t.compactDecrypt=a},21879:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactEncrypt=void 0;let n=r(58757);class i{constructor(e){this._flattened=new n.FlattenedEncrypt(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}t.CompactEncrypt=i},34970:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenedDecrypt=void 0;let n=r(15809),i=r(48019),o=r(89830),a=r(96390),s=r(3304),l=r(55786),c=r(10211),u=r(42914),d=r(39624),p=r(5017),f=r(38666);async function h(e,t,r){var h;let y,_,m,g,v,w,b;if(!(0,l.default)(e))throw new a.JWEInvalid("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new a.JWEInvalid("JOSE Header missing");if("string"!=typeof e.iv)throw new a.JWEInvalid("JWE Initialization Vector missing or incorrect type");if("string"!=typeof e.ciphertext)throw new a.JWEInvalid("JWE Ciphertext missing or incorrect type");if("string"!=typeof e.tag)throw new a.JWEInvalid("JWE Authentication Tag missing or incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new a.JWEInvalid("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new a.JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new a.JWEInvalid("JWE AAD incorrect type");if(void 0!==e.header&&!(0,l.default)(e.header))throw new a.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!(0,l.default)(e.unprotected))throw new a.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=(0,n.decode)(e.protected);y=JSON.parse(u.decoder.decode(t))}catch{throw new a.JWEInvalid("JWE Protected Header is invalid")}if(!(0,s.default)(y,e.header,e.unprotected))throw new a.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let E={...y,...e.header,...e.unprotected};if((0,p.default)(a.JWEInvalid,new Map,null==r?void 0:r.crit,y,E),void 0!==E.zip){if(!y||!y.zip)throw new a.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==E.zip)throw new a.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:S,enc:k}=E;if("string"!=typeof S||!S)throw new a.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof k||!k)throw new a.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let P=r&&(0,f.default)("keyManagementAlgorithms",r.keyManagementAlgorithms),A=r&&(0,f.default)("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(P&&!P.has(S))throw new a.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(A&&!A.has(k))throw new a.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');if(void 0!==e.encrypted_key)try{_=(0,n.decode)(e.encrypted_key)}catch{throw new a.JWEInvalid("Failed to base64url decode the encrypted_key")}let O=!1;"function"==typeof t&&(t=await t(y,e),O=!0);try{m=await (0,c.default)(S,t,_,E,r)}catch(e){if(e instanceof TypeError||e instanceof a.JWEInvalid||e instanceof a.JOSENotSupported)throw e;m=(0,d.default)(k)}try{g=(0,n.decode)(e.iv)}catch{throw new a.JWEInvalid("Failed to base64url decode the iv")}try{v=(0,n.decode)(e.tag)}catch{throw new a.JWEInvalid("Failed to base64url decode the tag")}let T=u.encoder.encode(null!==(h=e.protected)&&void 0!==h?h:"");w=void 0!==e.aad?(0,u.concat)(T,u.encoder.encode("."),u.encoder.encode(e.aad)):T;try{b=(0,n.decode)(e.ciphertext)}catch{throw new a.JWEInvalid("Failed to base64url decode the ciphertext")}let I=await (0,i.default)(k,m,b,g,v,w);"DEF"===E.zip&&(I=await ((null==r?void 0:r.inflateRaw)||o.inflate)(I));let x={plaintext:I};if(void 0!==e.protected&&(x.protectedHeader=y),void 0!==e.aad)try{x.additionalAuthenticatedData=(0,n.decode)(e.aad)}catch{throw new a.JWEInvalid("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(x.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(x.unprotectedHeader=e.header),O)?{...x,key:t}:x}t.flattenedDecrypt=h},58757:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlattenedEncrypt=t.unprotected=void 0;let n=r(15809),i=r(11893),o=r(89830),a=r(39871),s=r(66646),l=r(96390),c=r(3304),u=r(42914),d=r(5017);t.unprotected=Symbol();class p{constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,r){let p,f,h,y,_,m,g;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new l.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,c.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new l.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let v={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,d.default)(l.JWEInvalid,new Map,null==r?void 0:r.crit,this._protectedHeader,v),void 0!==v.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new l.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==v.zip)throw new l.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:w,enc:b}=v;if("string"!=typeof w||!w)throw new l.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof b||!b)throw new l.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if("dir"===w){if(this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===w&&this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let n;({cek:f,encryptedKey:p,parameters:n}=await (0,s.default)(w,b,e,this._cek,this._keyManagementParameters)),n&&(r&&t.unprotected in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...n}:this.setUnprotectedHeader(n):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...n}:this.setProtectedHeader(n))}if(this._iv||(this._iv=(0,a.default)(b)),y=this._protectedHeader?u.encoder.encode((0,n.encode)(JSON.stringify(this._protectedHeader))):u.encoder.encode(""),this._aad?(_=(0,n.encode)(this._aad),h=(0,u.concat)(y,u.encoder.encode("."),u.encoder.encode(_))):h=y,"DEF"===v.zip){let e=await ((null==r?void 0:r.deflateRaw)||o.deflate)(this._plaintext);({ciphertext:m,tag:g}=await (0,i.default)(b,e,f,this._iv,h))}else({ciphertext:m,tag:g}=await (0,i.default)(b,this._plaintext,f,this._iv,h));let E={ciphertext:(0,n.encode)(m),iv:(0,n.encode)(this._iv),tag:(0,n.encode)(g)};return p&&(E.encrypted_key=(0,n.encode)(p)),_&&(E.aad=_),this._protectedHeader&&(E.protected=u.decoder.decode(y)),this._sharedUnprotectedHeader&&(E.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(E.header=this._unprotectedHeader),E}}t.FlattenedEncrypt=p},17351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generalDecrypt=void 0;let n=r(34970),i=r(96390),o=r(55786);async function a(e,t,r){if(!(0,o.default)(e))throw new i.JWEInvalid("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(o.default))throw new i.JWEInvalid("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new i.JWEInvalid("JWE Recipients has no members");for(let i of e.recipients)try{return await (0,n.flattenedDecrypt)({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:i.encrypted_key,header:i.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new i.JWEDecryptionFailed}t.generalDecrypt=a},86003:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralEncrypt=void 0;let n=r(58757),i=r(96390),o=r(39624),a=r(3304),s=r(66646),l=r(15809),c=r(5017);class u{constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class d{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,t){let r=new u(this,e,{crit:null==t?void 0:t.crit});return this._recipients.push(r),r}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var t,r,u;let d;if(!this._recipients.length)throw new i.JWEInvalid("at least one recipient must be added");if(e={deflateRaw:null==e?void 0:e.deflateRaw},1===this._recipients.length){let[t]=this._recipients,r=await new n.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(t.unprotectedHeader).encrypt(t.key,{...t.options,...e}),i={ciphertext:r.ciphertext,iv:r.iv,recipients:[{}],tag:r.tag};return r.aad&&(i.aad=r.aad),r.protected&&(i.protected=r.protected),r.unprotected&&(i.unprotected=r.unprotected),r.encrypted_key&&(i.recipients[0].encrypted_key=r.encrypted_key),r.header&&(i.recipients[0].header=r.header),i}for(let e=0;e<this._recipients.length;e++){let t=this._recipients[e];if(!(0,a.default)(this._protectedHeader,this._unprotectedHeader,t.unprotectedHeader))throw new i.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let r={...this._protectedHeader,...this._unprotectedHeader,...t.unprotectedHeader},{alg:n}=r;if("string"!=typeof n||!n)throw new i.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===n||"ECDH-ES"===n)throw new i.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof r.enc||!r.enc)throw new i.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(d){if(d!==r.enc)throw new i.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else d=r.enc;if((0,c.default)(i.JWEInvalid,new Map,t.options.crit,this._protectedHeader,r),void 0!==r.zip&&(!this._protectedHeader||!this._protectedHeader.zip))throw new i.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}let p=(0,o.default)(d),f={ciphertext:"",iv:"",recipients:[],tag:""};for(let i=0;i<this._recipients.length;i++){let o=this._recipients[i],a={};f.recipients.push(a);let c=({...this._protectedHeader,...this._unprotectedHeader,...o.unprotectedHeader}).alg.startsWith("PBES2")?2048+i:void 0;if(0===i){let t=await new n.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(p).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(o.unprotectedHeader).setKeyManagementParameters({p2c:c}).encrypt(o.key,{...o.options,...e,[n.unprotected]:!0});f.ciphertext=t.ciphertext,f.iv=t.iv,f.tag=t.tag,t.aad&&(f.aad=t.aad),t.protected&&(f.protected=t.protected),t.unprotected&&(f.unprotected=t.unprotected),a.encrypted_key=t.encrypted_key,t.header&&(a.header=t.header);continue}let{encryptedKey:h,parameters:y}=await (0,s.default)((null===(t=o.unprotectedHeader)||void 0===t?void 0:t.alg)||(null===(r=this._protectedHeader)||void 0===r?void 0:r.alg)||(null===(u=this._unprotectedHeader)||void 0===u?void 0:u.alg),d,o.key,p,{p2c:c});a.encrypted_key=(0,l.encode)(h),(o.unprotectedHeader||y)&&(a.header={...o.unprotectedHeader,...y})}return f}}t.GeneralEncrypt=d},64173:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedJWK=void 0;let n=r(30587),i=r(55786),o=r(96390);async function a(e,t){let r={...e,...null==t?void 0:t.header};if(!(0,i.default)(r.jwk))throw new o.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let a=await (0,n.importJWK)({...r.jwk,ext:!0},r.alg,!0);if(a instanceof Uint8Array||"public"!==a.type)throw new o.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return a}t.EmbeddedJWK=a},62778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateJwkThumbprintUri=t.calculateJwkThumbprint=void 0;let n=r(31333),i=r(15809),o=r(96390),a=r(42914),s=r(55786),l=(e,t)=>{if("string"!=typeof e||!e)throw new o.JWKInvalid(`${t} missing or invalid`)};async function c(e,t){let r;if(!(0,s.default)(e))throw TypeError("JWK must be an object");if(null!=t||(t="sha256"),"sha256"!==t&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(e.kty){case"EC":l(e.crv,'"crv" (Curve) Parameter'),l(e.x,'"x" (X Coordinate) Parameter'),l(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":l(e.crv,'"crv" (Subtype of Key Pair) Parameter'),l(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":l(e.e,'"e" (Exponent) Parameter'),l(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":l(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new o.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let c=a.encoder.encode(JSON.stringify(r));return(0,i.encode)(await (0,n.default)(t,c))}async function u(e,t){null!=t||(t="sha256");let r=await c(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}t.calculateJwkThumbprint=c,t.calculateJwkThumbprintUri=u},32505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLocalJWKSet=t.LocalJWKSet=t.isJWKSLike=void 0;let n=r(30587),i=r(96390),o=r(55786);function a(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(s)}function s(e){return(0,o.default)(e)}t.isJWKSLike=a;class l{constructor(e){if(this._cached=new WeakMap,!a(e))throw new i.JWKSInvalid("JSON Web Key Set malformed");this._jwks=function(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}(e)}async getKey(e,t){let{alg:r,kid:n}={...e,...null==t?void 0:t.header},o=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new i.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(r),a=this._jwks.keys.filter(e=>{let t=o===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===r&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t}),{0:s,length:l}=a;if(0===l)throw new i.JWKSNoMatchingKey;if(1!==l){let e=new i.JWKSMultipleMatchingKeys,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(let e of a)try{yield await c(t,e,r)}catch{continue}},e}return c(this._cached,s,r)}}async function c(e,t,r){let o=e.get(t)||e.set(t,{}).get(t);if(void 0===o[r]){let e=await (0,n.importJWK)({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new i.JWKSInvalid("JSON Web Key Set members must be public keys");o[r]=e}return o[r]}t.LocalJWKSet=l,t.createLocalJWKSet=function(e){let t=new l(e);return async function(e,r){return t.getKey(e,r)}}},6877:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRemoteJWKSet=void 0;let n=r(35256),i=r(96390),o=r(32505);class a extends o.LocalJWKSet{constructor(e,t){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:null==t?void 0:t.agent,headers:null==t?void 0:t.headers},this._timeoutDuration="number"==typeof(null==t?void 0:t.timeoutDuration)?null==t?void 0:t.timeoutDuration:5e3,this._cooldownDuration="number"==typeof(null==t?void 0:t.cooldownDuration)?null==t?void 0:t.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof(null==t?void 0:t.cacheMaxAge)?null==t?void 0:t.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(e,t)}catch(r){if(r instanceof i.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),super.getKey(e,t);throw r}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=(0,n.default)(this._url,this._timeoutDuration,this._options).then(e=>{if(!(0,o.isJWKSLike)(e))throw new i.JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}t.createRemoteJWKSet=function(e,t){let r=new a(e,t);return async function(e,t){return r.getKey(e,t)}}},83537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactSign=void 0;let n=r(18798);class i{constructor(e){this._flattened=new n.FlattenedSign(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){let r=await this._flattened.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}t.CompactSign=i},52555:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactVerify=void 0;let n=r(90526),i=r(96390),o=r(42914);async function a(e,t,r){if(e instanceof Uint8Array&&(e=o.decoder.decode(e)),"string"!=typeof e)throw new i.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:a,1:s,2:l,length:c}=e.split(".");if(3!==c)throw new i.JWSInvalid("Invalid Compact JWS");let u=await (0,n.flattenedVerify)({payload:s,protected:a,signature:l},t,r),d={payload:u.payload,protectedHeader:u.protectedHeader};return"function"==typeof t?{...d,key:u.key}:d}t.compactVerify=a},18798:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlattenedSign=void 0;let n=r(15809),i=r(64855),o=r(3304),a=r(96390),s=r(42914),l=r(64425),c=r(5017);class u{constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){let r;if(!this._protectedHeader&&!this._unprotectedHeader)throw new a.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,o.default)(this._protectedHeader,this._unprotectedHeader))throw new a.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let u={...this._protectedHeader,...this._unprotectedHeader},d=(0,c.default)(a.JWSInvalid,new Map([["b64",!0]]),null==t?void 0:t.crit,this._protectedHeader,u),p=!0;if(d.has("b64")&&"boolean"!=typeof(p=this._protectedHeader.b64))throw new a.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:f}=u;if("string"!=typeof f||!f)throw new a.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,l.default)(f,e,"sign");let h=this._payload;p&&(h=s.encoder.encode((0,n.encode)(h))),r=this._protectedHeader?s.encoder.encode((0,n.encode)(JSON.stringify(this._protectedHeader))):s.encoder.encode("");let y=(0,s.concat)(r,s.encoder.encode("."),h),_=await (0,i.default)(f,e,y),m={signature:(0,n.encode)(_),payload:""};return p&&(m.payload=s.decoder.decode(h)),this._unprotectedHeader&&(m.header=this._unprotectedHeader),this._protectedHeader&&(m.protected=s.decoder.decode(r)),m}}t.FlattenedSign=u},90526:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenedVerify=void 0;let n=r(15809),i=r(30539),o=r(96390),a=r(42914),s=r(3304),l=r(55786),c=r(64425),u=r(5017),d=r(38666);async function p(e,t,r){var p;let f,h;if(!(0,l.default)(e))throw new o.JWSInvalid("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new o.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new o.JWSInvalid("JWS Protected Header incorrect type");if(void 0===e.payload)throw new o.JWSInvalid("JWS Payload missing");if("string"!=typeof e.signature)throw new o.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==e.header&&!(0,l.default)(e.header))throw new o.JWSInvalid("JWS Unprotected Header incorrect type");let y={};if(e.protected)try{let t=(0,n.decode)(e.protected);y=JSON.parse(a.decoder.decode(t))}catch{throw new o.JWSInvalid("JWS Protected Header is invalid")}if(!(0,s.default)(y,e.header))throw new o.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let _={...y,...e.header},m=(0,u.default)(o.JWSInvalid,new Map([["b64",!0]]),null==r?void 0:r.crit,y,_),g=!0;if(m.has("b64")&&"boolean"!=typeof(g=y.b64))throw new o.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:v}=_;if("string"!=typeof v||!v)throw new o.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let w=r&&(0,d.default)("algorithms",r.algorithms);if(w&&!w.has(v))throw new o.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(g){if("string"!=typeof e.payload)throw new o.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new o.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let b=!1;"function"==typeof t&&(t=await t(y,e),b=!0),(0,c.default)(v,t,"verify");let E=(0,a.concat)(a.encoder.encode(null!==(p=e.protected)&&void 0!==p?p:""),a.encoder.encode("."),"string"==typeof e.payload?a.encoder.encode(e.payload):e.payload);try{f=(0,n.decode)(e.signature)}catch{throw new o.JWSInvalid("Failed to base64url decode the signature")}if(!await (0,i.default)(v,t,f,E))throw new o.JWSSignatureVerificationFailed;if(g)try{h=(0,n.decode)(e.payload)}catch{throw new o.JWSInvalid("Failed to base64url decode the payload")}else h="string"==typeof e.payload?a.encoder.encode(e.payload):e.payload;let S={payload:h};return(void 0!==e.protected&&(S.protectedHeader=y),void 0!==e.header&&(S.unprotectedHeader=e.header),b)?{...S,key:t}:S}t.flattenedVerify=p},52815:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralSign=void 0;let n=r(18798),i=r(96390);class o{constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setProtectedHeader(e){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class a{constructor(e){this._signatures=[],this._payload=e}addSignature(e,t){let r=new o(this,e,t);return this._signatures.push(r),r}async sign(){if(!this._signatures.length)throw new i.JWSInvalid("at least one signature must be added");let e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){let r=this._signatures[t],o=new n.FlattenedSign(this._payload);o.setProtectedHeader(r.protectedHeader),o.setUnprotectedHeader(r.unprotectedHeader);let{payload:a,...s}=await o.sign(r.key,r.options);if(0===t)e.payload=a;else if(e.payload!==a)throw new i.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");e.signatures.push(s)}return e}}t.GeneralSign=a},61730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generalVerify=void 0;let n=r(90526),i=r(96390),o=r(55786);async function a(e,t,r){if(!(0,o.default)(e))throw new i.JWSInvalid("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(o.default))throw new i.JWSInvalid("JWS Signatures missing or incorrect type");for(let i of e.signatures)try{return await (0,n.flattenedVerify)({header:i.header,payload:e.payload,protected:i.protected,signature:i.signature},t,r)}catch{}throw new i.JWSSignatureVerificationFailed}t.generalVerify=a},4258:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwtDecrypt=void 0;let n=r(44616),i=r(49366),o=r(96390);async function a(e,t,r){let a=await (0,n.compactDecrypt)(e,t,r),s=(0,i.default)(a.protectedHeader,a.plaintext,r),{protectedHeader:l}=a;if(void 0!==l.iss&&l.iss!==s.iss)throw new o.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==l.sub&&l.sub!==s.sub)throw new o.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==l.aud&&JSON.stringify(l.aud)!==JSON.stringify(s.aud))throw new o.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");let c={payload:s,protectedHeader:l};return"function"==typeof t?{...c,key:a.key}:c}t.jwtDecrypt=a},87353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptJWT=void 0;let n=r(21879),i=r(42914),o=r(97231);class a extends o.ProduceJWT{setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){let r=new n.CompactEncrypt(i.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}}t.EncryptJWT=a},97231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProduceJWT=void 0;let n=r(92626),i=r(55786),o=r(3182);class a{constructor(e){if(!(0,i.default)(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:e}:this._payload={...this._payload,nbf:(0,n.default)(new Date)+(0,o.default)(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:e}:this._payload={...this._payload,exp:(0,n.default)(new Date)+(0,o.default)(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:(0,n.default)(new Date)}:this._payload={...this._payload,iat:e},this}}t.ProduceJWT=a},14557:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignJWT=void 0;let n=r(83537),i=r(96390),o=r(42914),a=r(97231);class s extends a.ProduceJWT{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){var r;let a=new n.CompactSign(o.encoder.encode(JSON.stringify(this._payload)));if(a.setProtectedHeader(this._protectedHeader),Array.isArray(null===(r=this._protectedHeader)||void 0===r?void 0:r.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new i.JWTInvalid("JWTs MUST NOT use unencoded payload");return a.sign(e,t)}}t.SignJWT=s},90231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsecuredJWT=void 0;let n=r(15809),i=r(42914),o=r(96390),a=r(49366),s=r(97231);class l extends s.ProduceJWT{encode(){let e=n.encode(JSON.stringify({alg:"none"})),t=n.encode(JSON.stringify(this._payload));return`${e}.${t}.`}static decode(e,t){let r;if("string"!=typeof e)throw new o.JWTInvalid("Unsecured JWT must be a string");let{0:s,1:l,2:c,length:u}=e.split(".");if(3!==u||""!==c)throw new o.JWTInvalid("Invalid Unsecured JWT");try{if(r=JSON.parse(i.decoder.decode(n.decode(s))),"none"!==r.alg)throw Error()}catch{throw new o.JWTInvalid("Invalid Unsecured JWT")}return{payload:(0,a.default)(r,n.decode(l),t),header:r}}}t.UnsecuredJWT=l},38756:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwtVerify=void 0;let n=r(52555),i=r(49366),o=r(96390);async function a(e,t,r){var a;let s=await (0,n.compactVerify)(e,t,r);if((null===(a=s.protectedHeader.crit)||void 0===a?void 0:a.includes("b64"))&&!1===s.protectedHeader.b64)throw new o.JWTInvalid("JWTs MUST NOT use unencoded payload");let l={payload:(0,i.default)(s.protectedHeader,s.payload,r),protectedHeader:s.protectedHeader};return"function"==typeof t?{...l,key:s.key}:l}t.jwtVerify=a},20287:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exportJWK=t.exportPKCS8=t.exportSPKI=void 0;let n=r(83850),i=r(83850),o=r(69920);async function a(e){return(0,n.toSPKI)(e)}async function s(e){return(0,i.toPKCS8)(e)}async function l(e){return(0,o.default)(e)}t.exportSPKI=a,t.exportPKCS8=s,t.exportJWK=l},54684:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateKeyPair=void 0;let n=r(14953);async function i(e,t){return(0,n.generateKeyPair)(e,t)}t.generateKeyPair=i},805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSecret=void 0;let n=r(14953);async function i(e,t){return(0,n.generateSecret)(e,t)}t.generateSecret=i},30587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importJWK=t.importPKCS8=t.importX509=t.importSPKI=void 0;let n=r(15809),i=r(83850),o=r(57675),a=r(96390),s=r(55786);async function l(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,i.fromSPKI)(e,t,r)}async function c(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,i.fromX509)(e,t,r)}async function u(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,i.fromPKCS8)(e,t,r)}async function d(e,t,r){var i;if(!(0,s.default)(e))throw TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');if(null!=r||(r=!0!==e.ext),r)return(0,o.default)({...e,alg:t,ext:null!==(i=e.ext)&&void 0!==i&&i});return(0,n.decode)(e.k);case"RSA":if(void 0!==e.oth)throw new a.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,o.default)({...e,alg:t});default:throw new a.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}t.importSPKI=l,t.importX509=c,t.importPKCS8=u,t.importJWK=d},37570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrap=t.wrap=void 0;let n=r(11893),i=r(48019),o=r(39871),a=r(15809);async function s(e,t,r,i){let s=e.slice(0,7);i||(i=(0,o.default)(s));let{ciphertext:l,tag:c}=await (0,n.default)(s,r,t,i,new Uint8Array(0));return{encryptedKey:l,iv:(0,a.encode)(i),tag:(0,a.encode)(c)}}async function l(e,t,r,n,o){let a=e.slice(0,7);return(0,i.default)(a,t,r,n,o,new Uint8Array(0))}t.wrap=s,t.unwrap=l},42914:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatKdf=t.lengthAndInput=t.uint32be=t.uint64be=t.p2s=t.concat=t.decoder=t.encoder=void 0;let n=r(31333);function i(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;return e.forEach(e=>{t.set(e,r),r+=e.length}),t}function o(e,t,r){if(t<0||t>=4294967296)throw RangeError(`value must be >= 0 and <= ${4294967296-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function a(e){let t=new Uint8Array(4);return o(t,e),t}async function s(e,t,r){let i=Math.ceil((t>>3)/32),o=new Uint8Array(32*i);for(let t=0;t<i;t++){let i=new Uint8Array(4+e.length+r.length);i.set(a(t+1)),i.set(e,4),i.set(r,4+e.length),o.set(await (0,n.default)("sha256",i),32*t)}return o.slice(0,t>>3)}t.encoder=new TextEncoder,t.decoder=new TextDecoder,t.concat=i,t.p2s=function(e,r){return i(t.encoder.encode(e),new Uint8Array([0]),r)},t.uint64be=function(e){let t=new Uint8Array(8);return o(t,Math.floor(e/4294967296),0),o(t,e%4294967296,4),t},t.uint32be=a,t.lengthAndInput=function(e){return i(a(e.length),e)},t.concatKdf=s},39624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitLength=void 0;let n=r(96390),i=r(66091);function o(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new n.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}t.bitLength=o,t.default=e=>(0,i.default)(new Uint8Array(o(e)>>3))},10400:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(96390),i=r(39871);t.default=(e,t)=>{if(t.length<<3!==(0,i.bitLength)(e))throw new n.JWEInvalid("Invalid Initialization Vector length")}},64425:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(95800),i=r(32578),o=(e,t)=>{if(!(t instanceof Uint8Array)){if(!(0,i.default)(t))throw TypeError((0,n.withAlg)(e,t,...i.types,"Uint8Array"));if("secret"!==t.type)throw TypeError(`${i.types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},a=(e,t,r)=>{if(!(0,i.default)(t))throw TypeError((0,n.withAlg)(e,t,...i.types));if("secret"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)};t.default=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?o(e,t):a(e,t,r)}},77692:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(96390);t.default=function(e){if(!(e instanceof Uint8Array)||e.length<8)throw new n.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}},18709:(e,t)=>{"use strict";function r(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function n(e,t){return e.name===t}function i(e){return parseInt(e.name.slice(4),10)}function o(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw TypeError(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkEncCryptoKey=t.checkSigCryptoKey=void 0,t.checkSigCryptoKey=function(e,t,...a){switch(t){case"HS256":case"HS384":case"HS512":{if(!n(e.algorithm,"HMAC"))throw r("HMAC");let o=parseInt(t.slice(2),10);if(i(e.algorithm.hash)!==o)throw r(`SHA-${o}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!n(e.algorithm,"RSASSA-PKCS1-v1_5"))throw r("RSASSA-PKCS1-v1_5");let o=parseInt(t.slice(2),10);if(i(e.algorithm.hash)!==o)throw r(`SHA-${o}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!n(e.algorithm,"RSA-PSS"))throw r("RSA-PSS");let o=parseInt(t.slice(2),10);if(i(e.algorithm.hash)!==o)throw r(`SHA-${o}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw r("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!n(e.algorithm,"ECDSA"))throw r("ECDSA");let i=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==i)throw r(i,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}o(e,a)},t.checkEncCryptoKey=function(e,t,...a){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!n(e.algorithm,"AES-GCM"))throw r("AES-GCM");let i=parseInt(t.slice(1,4),10);if(e.algorithm.length!==i)throw r(i,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!n(e.algorithm,"AES-KW"))throw r("AES-KW");let i=parseInt(t.slice(1,4),10);if(e.algorithm.length!==i)throw r(i,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw r("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!n(e.algorithm,"PBKDF2"))throw r("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!n(e.algorithm,"RSA-OAEP"))throw r("RSA-OAEP");let o=parseInt(t.slice(9),10)||1;if(i(e.algorithm.hash)!==o)throw r(`SHA-${o}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}o(e,a)}},10211:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(47651),i=r(31537),o=r(5359),a=r(67716),s=r(15809),l=r(96390),c=r(39624),u=r(30587),d=r(64425),p=r(55786),f=r(37570);async function h(e,t,r,h,y){switch((0,d.default)(e,t,"decrypt"),e){case"dir":if(void 0!==r)throw new l.JWEInvalid("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new l.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let o,a;if(!(0,p.default)(h.epk))throw new l.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!i.ecdhAllowed(t))throw new l.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let d=await (0,u.importJWK)(h.epk,e);if(void 0!==h.apu){if("string"!=typeof h.apu)throw new l.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=(0,s.decode)(h.apu)}catch{throw new l.JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==h.apv){if("string"!=typeof h.apv)throw new l.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=(0,s.decode)(h.apv)}catch{throw new l.JWEInvalid("Failed to base64url decode the apv")}}let f=await i.deriveKey(d,t,"ECDH-ES"===e?h.enc:e,"ECDH-ES"===e?(0,c.bitLength)(h.enc):parseInt(e.slice(-5,-2),10),o,a);if("ECDH-ES"===e)return f;if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");return(0,n.unwrap)(e.slice(-6),f,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");return(0,a.decrypt)(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let n;if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof h.p2c)throw new l.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let i=(null==y?void 0:y.maxPBES2Count)||1e4;if(h.p2c>i)throw new l.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof h.p2s)throw new l.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{n=(0,s.decode)(h.p2s)}catch{throw new l.JWEInvalid("Failed to base64url decode the p2s")}return(0,o.decrypt)(e,t,r,h.p2c,n)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");return(0,n.unwrap)(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let n,i;if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof h.iv)throw new l.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof h.tag)throw new l.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{n=(0,s.decode)(h.iv)}catch{throw new l.JWEInvalid("Failed to base64url decode the iv")}try{i=(0,s.decode)(h.tag)}catch{throw new l.JWEInvalid("Failed to base64url decode the tag")}return(0,f.unwrap)(e,t,r,n,i)}default:throw new l.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}t.default=h},66646:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(47651),i=r(31537),o=r(5359),a=r(67716),s=r(15809),l=r(39624),c=r(96390),u=r(20287),d=r(64425),p=r(37570);async function f(e,t,r,f,h={}){let y,_,m;switch((0,d.default)(e,r,"encrypt"),e){case"dir":m=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!i.ecdhAllowed(r))throw new c.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:o,apv:a}=h,{epk:d}=h;d||(d=(await i.generateEpk(r)).privateKey);let{x:p,y:g,crv:v,kty:w}=await (0,u.exportJWK)(d),b=await i.deriveKey(r,d,"ECDH-ES"===e?t:e,"ECDH-ES"===e?(0,l.bitLength)(t):parseInt(e.slice(-5,-2),10),o,a);if(_={epk:{x:p,crv:v,kty:w}},"EC"===w&&(_.epk.y=g),o&&(_.apu=(0,s.encode)(o)),a&&(_.apv=(0,s.encode)(a)),"ECDH-ES"===e){m=b;break}m=f||(0,l.default)(t);let E=e.slice(-6);y=await (0,n.wrap)(E,b,m);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":m=f||(0,l.default)(t),y=await (0,a.encrypt)(e,r,m);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{m=f||(0,l.default)(t);let{p2c:n,p2s:i}=h;({encryptedKey:y,..._}=await (0,o.encrypt)(e,r,m,n,i));break}case"A128KW":case"A192KW":case"A256KW":m=f||(0,l.default)(t),y=await (0,n.wrap)(e,r,m);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{m=f||(0,l.default)(t);let{iv:n}=h;({encryptedKey:y,..._}=await (0,p.wrap)(e,r,m,n));break}default:throw new c.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:m,encryptedKey:y,parameters:_}}t.default=f},92626:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>Math.floor(e.getTime()/1e3)},95800:(e,t)=>{"use strict";function r(e,t,...n){if(n.length>2){let t=n.pop();e+=`one of type ${n.join(", ")}, or ${t}.`}else 2===n.length?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}Object.defineProperty(t,"__esModule",{value:!0}),t.withAlg=void 0,t.default=(e,...t)=>r("Key must be ",e,...t),t.withAlg=function(e,t,...n){return r(`Key for the ${e} algorithm must be `,t,...n)}},3304:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(...e)=>{let t;let r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0}},55786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("object"==typeof e&&null!==e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},39871:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitLength=void 0;let n=r(96390),i=r(66091);function o(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new n.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}t.bitLength=o,t.default=e=>(0,i.default)(new Uint8Array(o(e)>>3))},49366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(96390),i=r(42914),o=r(92626),a=r(3182),s=r(55786),l=e=>e.toLowerCase().replace(/^application\//,""),c=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));t.default=(e,t,r={})=>{let u,d;let{typ:p}=r;if(p&&("string"!=typeof e.typ||l(e.typ)!==l(p)))throw new n.JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");try{u=JSON.parse(i.decoder.decode(t))}catch{}if(!(0,s.default)(u))throw new n.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{requiredClaims:f=[],issuer:h,subject:y,audience:_,maxTokenAge:m}=r;for(let e of(void 0!==m&&f.push("iat"),void 0!==_&&f.push("aud"),void 0!==y&&f.push("sub"),void 0!==h&&f.push("iss"),new Set(f.reverse())))if(!(e in u))throw new n.JWTClaimValidationFailed(`missing required "${e}" claim`,e,"missing");if(h&&!(Array.isArray(h)?h:[h]).includes(u.iss))throw new n.JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(y&&u.sub!==y)throw new n.JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(_&&!c(u.aud,"string"==typeof _?[_]:_))throw new n.JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");switch(typeof r.clockTolerance){case"string":d=(0,a.default)(r.clockTolerance);break;case"number":d=r.clockTolerance;break;case"undefined":d=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:g}=r,v=(0,o.default)(g||new Date);if((void 0!==u.iat||m)&&"number"!=typeof u.iat)throw new n.JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(void 0!==u.nbf){if("number"!=typeof u.nbf)throw new n.JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(u.nbf>v+d)throw new n.JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==u.exp){if("number"!=typeof u.exp)throw new n.JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(u.exp<=v-d)throw new n.JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(m){let e=v-u.iat;if(e-d>("number"==typeof m?m:(0,a.default)(m)))throw new n.JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(e<0-d)throw new n.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return u}},3182:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;t.default=e=>{let t=r.exec(e);if(!t)throw TypeError("Invalid time period format");let n=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(n);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*n);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*n);case"day":case"days":case"d":return Math.round(86400*n);case"week":case"weeks":case"w":return Math.round(604800*n);default:return Math.round(31557600*n)}}},38666:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}},5017:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(96390);t.default=function(e,t,r,i,o){let a;if(void 0!==o.crit&&void 0===i.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||void 0===i.crit)return new Set;if(!Array.isArray(i.crit)||0===i.crit.length||i.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let s of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,i.crit)){if(!a.has(s))throw new n.JOSENotSupported(`Extension Header Parameter "${s}" is not recognized`);if(void 0===o[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(a.get(s)&&void 0===i[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(i.crit)}},47651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrap=t.wrap=void 0;let n=r(14300),i=r(6113),o=r(96390),a=r(42914),s=r(5901),l=r(18709),c=r(84975),u=r(95800),d=r(79112),p=r(32578);function f(e,t){if(e.symmetricKeySize<<3!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function h(e,t,r){if((0,c.default)(e))return e;if(e instanceof Uint8Array)return(0,i.createSecretKey)(e);if((0,s.isCryptoKey)(e))return(0,l.checkEncCryptoKey)(e,t,r),i.KeyObject.from(e);throw TypeError((0,u.default)(e,...p.types,"Uint8Array"))}t.wrap=(e,t,r)=>{let s=parseInt(e.slice(1,4),10),l=`aes${s}-wrap`;if(!(0,d.default)(l))throw new o.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let c=h(t,e,"wrapKey");f(c,e);let u=(0,i.createCipheriv)(l,c,n.Buffer.alloc(8,166));return(0,a.concat)(u.update(r),u.final())},t.unwrap=(e,t,r)=>{let s=parseInt(e.slice(1,4),10),l=`aes${s}-wrap`;if(!(0,d.default)(l))throw new o.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let c=h(t,e,"unwrapKey");f(c,e);let u=(0,i.createDecipheriv)(l,c,n.Buffer.alloc(8,166));return(0,a.concat)(u.update(r),u.final())}},83850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromX509=t.fromSPKI=t.fromPKCS8=t.toPKCS8=t.toSPKI=void 0;let n=r(6113),i=r(14300),o=r(5901),a=r(84975),s=r(95800),l=r(32578),c=(e,t,r)=>{let i;if((0,o.isCryptoKey)(r)){if(!r.extractable)throw TypeError("CryptoKey is not extractable");i=n.KeyObject.from(r)}else if((0,a.default)(r))i=r;else throw TypeError((0,s.default)(r,...l.types));if(i.type!==e)throw TypeError(`key is not a ${e} key`);return i.export({format:"pem",type:t})};t.toSPKI=e=>c("public","spki",e),t.toPKCS8=e=>c("private","pkcs8",e),t.fromPKCS8=e=>(0,n.createPrivateKey)({key:i.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),t.fromSPKI=e=>(0,n.createPublicKey)({key:i.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"}),t.fromX509=e=>(0,n.createPublicKey)({key:e,type:"spki",format:"pem"})},9556:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){if(48!==e[0]||(this.buffer=e,this.offset=1,this.decodeLength()!==e.length-this.offset))throw TypeError()}decodeLength(){let e=this.buffer[this.offset++];if(128&e){let t=-129&e;e=0;for(let r=0;r<t;r++)e=e<<8|this.buffer[this.offset+r];this.offset+=t}return e}unsignedInteger(){if(2!==this.buffer[this.offset++])throw TypeError();let e=this.decodeLength();0===this.buffer[this.offset]&&(this.offset++,e--);let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}end(){if(this.offset!==this.buffer.length)throw TypeError()}}t.default=r},61989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(14300),i=r(96390),o=n.Buffer.from([0]),a=n.Buffer.from([2]),s=n.Buffer.from([3]),l=n.Buffer.from([48]),c=n.Buffer.from([4]),u=e=>{if(e<128)return n.Buffer.from([e]);let t=n.Buffer.alloc(5);t.writeUInt32BE(e,1);let r=1;for(;0===t[r];)r++;return t[r-1]=128|5-r,t.slice(r-1)},d=new Map([["P-256",n.Buffer.from("06 08 2A 86 48 CE 3D 03 01 07".replace(/ /g,""),"hex")],["secp256k1",n.Buffer.from("06 05 2B 81 04 00 0A".replace(/ /g,""),"hex")],["P-384",n.Buffer.from("06 05 2B 81 04 00 22".replace(/ /g,""),"hex")],["P-521",n.Buffer.from("06 05 2B 81 04 00 23".replace(/ /g,""),"hex")],["ecPublicKey",n.Buffer.from("06 07 2A 86 48 CE 3D 02 01".replace(/ /g,""),"hex")],["X25519",n.Buffer.from("06 03 2B 65 6E".replace(/ /g,""),"hex")],["X448",n.Buffer.from("06 03 2B 65 6F".replace(/ /g,""),"hex")],["Ed25519",n.Buffer.from("06 03 2B 65 70".replace(/ /g,""),"hex")],["Ed448",n.Buffer.from("06 03 2B 65 71".replace(/ /g,""),"hex")]]);class p{constructor(){this.length=0,this.elements=[]}oidFor(e){let t=d.get(e);if(!t)throw new i.JOSENotSupported("Invalid or unsupported OID");this.elements.push(t),this.length+=t.length}zero(){this.elements.push(a,n.Buffer.from([1]),o),this.length+=3}one(){this.elements.push(a,n.Buffer.from([1]),n.Buffer.from([1])),this.length+=3}unsignedInteger(e){if(128&e[0]){let t=u(e.length+1);this.elements.push(a,t,o,e),this.length+=2+t.length+e.length}else{let t=0;for(;0===e[t]&&(128&e[t+1])==0;)t++;let r=u(e.length-t);this.elements.push(a,u(e.length-t),e.slice(t)),this.length+=1+r.length+e.length-t}}octStr(e){let t=u(e.length);this.elements.push(c,u(e.length),e),this.length+=1+t.length+e.length}bitStr(e){let t=u(e.length+1);this.elements.push(s,u(e.length+1),o,e),this.length+=1+t.length+e.length+1}add(e){this.elements.push(e),this.length+=e.length}end(e=l){let t=u(this.length);return n.Buffer.concat([e,t,...this.elements],1+t.length+this.length)}}t.default=p},15809:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.encodeBase64=t.decodeBase64=void 0;let n=r(14300),i=r(42914);n.Buffer.isEncoding("base64url")?t.encode=e=>n.Buffer.from(e).toString("base64url"):t.encode=e=>n.Buffer.from(e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),t.decodeBase64=e=>n.Buffer.from(e,"base64"),t.encodeBase64=e=>n.Buffer.from(e).toString("base64"),t.decode=e=>n.Buffer.from(function(e){let t=e;return t instanceof Uint8Array&&(t=i.decoder.decode(t)),t}(e),"base64")},65454:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(42914);t.default=function(e,t,r,o,a,s){let l=(0,i.concat)(e,t,r,(0,i.uint64be)(e.length<<3)),c=(0,n.createHmac)(`sha${o}`,a);return c.update(l),c.digest().slice(0,s>>3)}},64621:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(96390),i=r(84975);t.default=(e,t)=>{let r;switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new n.JOSENotSupported(`Content Encryption Algorithm ${e} is not supported either by JOSE or your javascript runtime`)}if(t instanceof Uint8Array){let e=t.byteLength<<3;if(e!==r)throw new n.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}if((0,i.default)(t)&&"secret"===t.type){let e=t.symmetricKeySize<<3;if(e!==r)throw new n.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}throw TypeError("Invalid Content Encryption Key type")}},86065:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setModulusLength=t.weakMap=void 0,t.weakMap=new WeakMap;let r=(e,t)=>{let n=e.readUInt8(1);if((128&n)==0)return 0===t?n:r(e.subarray(2+n),t-1);let i=127&n;n=0;for(let t=0;t<i;t++)n<<=8,n|=e.readUInt8(2+t);return 0===t?n:r(e.subarray(2+n),t-1)},n=(e,t)=>{let n=e.readUInt8(1);return(128&n)==0?r(e.subarray(2),t):r(e.subarray(2+(127&n)),t)},i=e=>{var r,i;if(t.weakMap.has(e))return t.weakMap.get(e);let o=null!==(i=null===(r=e.asymmetricKeyDetails)||void 0===r?void 0:r.modulusLength)&&void 0!==i?i:n(e.export({format:"der",type:"pkcs1"}),"private"===e.type?1:0)-1<<3;return t.weakMap.set(e,o),o};t.setModulusLength=(e,r)=>{t.weakMap.set(e,r)},t.default=(e,t)=>{if(2048>i(e))throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},79112:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});let i=r(6113);t.default=e=>(n||(n=new Set((0,i.getCiphers)())),n.has(e))},48019:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(10400),o=r(64621),a=r(42914),s=r(96390),l=r(8896),c=r(65454),u=r(5901),d=r(18709),p=r(84975),f=r(95800),h=r(79112),y=r(32578);t.default=(e,t,r,_,m,g)=>{let v;if((0,u.isCryptoKey)(t))(0,d.checkEncCryptoKey)(t,e,"decrypt"),v=n.KeyObject.from(t);else if(t instanceof Uint8Array||(0,p.default)(t))v=t;else throw TypeError((0,f.default)(t,...y.types,"Uint8Array"));switch((0,o.default)(e,v),(0,i.default)(e,_),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,i,o,u){let d,f;let y=parseInt(e.slice(1,4),10);(0,p.default)(t)&&(t=t.export());let _=t.subarray(y>>3),m=t.subarray(0,y>>3),g=parseInt(e.slice(-3),10),v=`aes-${y}-cbc`;if(!(0,h.default)(v))throw new s.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let w=(0,c.default)(u,i,r,g,m,y);try{d=(0,l.default)(o,w)}catch{}if(!d)throw new s.JWEDecryptionFailed;try{let e=(0,n.createDecipheriv)(v,_,i);f=(0,a.concat)(e.update(r),e.final())}catch{}if(!f)throw new s.JWEDecryptionFailed;return f}(e,v,r,_,m,g);case"A128GCM":case"A192GCM":case"A256GCM":return function(e,t,r,i,o,a){let l=parseInt(e.slice(1,4),10),c=`aes-${l}-gcm`;if(!(0,h.default)(c))throw new s.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);try{let e=(0,n.createDecipheriv)(c,t,i,{authTagLength:16});e.setAuthTag(o),a.byteLength&&e.setAAD(a,{plaintextLength:r.length});let s=e.update(r);return e.final(),s}catch{throw new s.JWEDecryptionFailed}}(e,v,r,_,m,g);default:throw new s.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},31333:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113);t.default=(e,t)=>(0,n.createHash)(e).update(t).digest()},75214:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(96390);t.default=function(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},31537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ecdhAllowed=t.generateEpk=t.deriveKey=void 0;let n=r(6113),i=r(73837),o=r(49517),a=r(42914),s=r(96390),l=r(5901),c=r(18709),u=r(84975),d=r(95800),p=r(32578),f=(0,i.promisify)(n.generateKeyPair);async function h(e,t,r,i,o=new Uint8Array(0),s=new Uint8Array(0)){let f,h;if((0,l.isCryptoKey)(e))(0,c.checkEncCryptoKey)(e,"ECDH"),f=n.KeyObject.from(e);else if((0,u.default)(e))f=e;else throw TypeError((0,d.default)(e,...p.types));if((0,l.isCryptoKey)(t))(0,c.checkEncCryptoKey)(t,"ECDH","deriveBits"),h=n.KeyObject.from(t);else if((0,u.default)(t))h=t;else throw TypeError((0,d.default)(t,...p.types));let y=(0,a.concat)((0,a.lengthAndInput)(a.encoder.encode(r)),(0,a.lengthAndInput)(o),(0,a.lengthAndInput)(s),(0,a.uint32be)(i)),_=(0,n.diffieHellman)({privateKey:h,publicKey:f});return(0,a.concatKdf)(_,i,y)}async function y(e){let t;if((0,l.isCryptoKey)(e))t=n.KeyObject.from(e);else if((0,u.default)(e))t=e;else throw TypeError((0,d.default)(e,...p.types));switch(t.asymmetricKeyType){case"x25519":return f("x25519");case"x448":return f("x448");case"ec":return f("ec",{namedCurve:(0,o.default)(t)});default:throw new s.JOSENotSupported("Invalid or unsupported EPK")}}t.deriveKey=h,t.generateEpk=y,t.ecdhAllowed=e=>["P-256","P-384","P-521","X25519","X448"].includes((0,o.default)(e))},11893:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(10400),o=r(64621),a=r(42914),s=r(65454),l=r(5901),c=r(18709),u=r(84975),d=r(95800),p=r(96390),f=r(79112),h=r(32578);t.default=(e,t,r,y,_)=>{let m;if((0,l.isCryptoKey)(r))(0,c.checkEncCryptoKey)(r,e,"encrypt"),m=n.KeyObject.from(r);else if(r instanceof Uint8Array||(0,u.default)(r))m=r;else throw TypeError((0,d.default)(r,...h.types,"Uint8Array"));switch((0,o.default)(e,m),(0,i.default)(e,y),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,i,o){let l=parseInt(e.slice(1,4),10);(0,u.default)(r)&&(r=r.export());let c=r.subarray(l>>3),d=r.subarray(0,l>>3),h=`aes-${l}-cbc`;if(!(0,f.default)(h))throw new p.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let y=(0,n.createCipheriv)(h,c,i),_=(0,a.concat)(y.update(t),y.final()),m=parseInt(e.slice(-3),10),g=(0,s.default)(o,i,_,m,d,l);return{ciphertext:_,tag:g}}(e,t,m,y,_);case"A128GCM":case"A192GCM":case"A256GCM":return function(e,t,r,i,o){let a=parseInt(e.slice(1,4),10),s=`aes-${a}-gcm`;if(!(0,f.default)(s))throw new p.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let l=(0,n.createCipheriv)(s,r,i,{authTagLength:16});o.byteLength&&l.setAAD(o,{plaintextLength:t.length});let c=l.update(t);return l.final(),{ciphertext:c,tag:l.getAuthTag()}}(e,t,m,y,_);default:throw new p.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},35256:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(13685),i=r(95687),o=r(82361),a=r(96390),s=r(42914),l=async(e,t,r)=>{let l;switch(e.protocol){case"https:":l=i.get;break;case"http:":l=n.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:c,headers:u}=r,d=l(e.href,{agent:c,timeout:t,headers:u}),[p]=await Promise.race([(0,o.once)(d,"response"),(0,o.once)(d,"timeout")]);if(!p)throw d.destroy(),new a.JWKSTimeout;if(200!==p.statusCode)throw new a.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let f=[];for await(let e of p)f.push(e);try{return JSON.parse(s.decoder.decode((0,s.concat)(...f)))}catch{throw new a.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};t.default=l},56371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwkImport=t.jwkExport=t.rsaPssParams=t.oneShotCallback=void 0;let[r,n]=process.versions.node.split(".").map(e=>parseInt(e,10));t.oneShotCallback=r>=16||15===r&&n>=13,t.rsaPssParams=!("electron"in process.versions)&&(r>=17||16===r&&n>=9),t.jwkExport=r>=16||15===r&&n>=9,t.jwkImport=r>=16||15===r&&n>=12},14953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateKeyPair=t.generateSecret=void 0;let n=r(6113),i=r(73837),o=r(66091),a=r(86065),s=r(96390),l=(0,i.promisify)(n.generateKeyPair);async function c(e,t){let r;switch(e){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new s.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,n.createSecretKey)((0,o.default)(new Uint8Array(r>>3)))}async function u(e,t){var r,n;switch(e){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let e=null!==(r=null==t?void 0:t.modulusLength)&&void 0!==r?r:2048;if("number"!=typeof e||e<2048)throw new s.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");let n=await l("rsa",{modulusLength:e,publicExponent:65537});return(0,a.setModulusLength)(n.privateKey,e),(0,a.setModulusLength)(n.publicKey,e),n}case"ES256":return l("ec",{namedCurve:"P-256"});case"ES256K":return l("ec",{namedCurve:"secp256k1"});case"ES384":return l("ec",{namedCurve:"P-384"});case"ES512":return l("ec",{namedCurve:"P-521"});case"EdDSA":switch(null==t?void 0:t.crv){case void 0:case"Ed25519":return l("ed25519");case"Ed448":return l("ed448");default:throw new s.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":let i=null!==(n=null==t?void 0:t.crv)&&void 0!==n?n:"P-256";switch(i){case void 0:case"P-256":case"P-384":case"P-521":return l("ec",{namedCurve:i});case"X25519":return l("x25519");case"X448":return l("x448");default:throw new s.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}default:throw new s.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}t.generateSecret=c,t.generateKeyPair=u},49517:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCurve=t.weakMap=void 0;let n=r(14300),i=r(6113),o=r(96390),a=r(5901),s=r(84975),l=r(95800),c=r(32578),u=n.Buffer.from([42,134,72,206,61,3,1,7]),d=n.Buffer.from([43,129,4,0,34]),p=n.Buffer.from([43,129,4,0,35]),f=n.Buffer.from([43,129,4,0,10]);t.weakMap=new WeakMap;let h=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new o.JOSENotSupported("Unsupported key curve for this operation")}},y=(e,r)=>{var n;let _;if((0,a.isCryptoKey)(e))_=i.KeyObject.from(e);else if((0,s.default)(e))_=e;else throw TypeError((0,l.default)(e,...c.types));if("secret"===_.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(_.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${_.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${_.asymmetricKeyType.slice(1)}`;case"ec":{if(t.weakMap.has(_))return t.weakMap.get(_);let e=null===(n=_.asymmetricKeyDetails)||void 0===n?void 0:n.namedCurve;if(e||"private"!==_.type){if(!e){let t=_.export({format:"der",type:"spki"}),r=t[1]<128?14:15,n=t[r],i=t.slice(r+1,r+1+n);if(i.equals(u))e="prime256v1";else if(i.equals(d))e="secp384r1";else if(i.equals(p))e="secp521r1";else if(i.equals(f))e="secp256k1";else throw new o.JOSENotSupported("Unsupported key curve for this operation")}}else e=y((0,i.createPublicKey)(_),!0);if(r)return e;let a=h(e);return t.weakMap.set(_,a),a}default:throw TypeError("Invalid asymmetric key type for this operation")}};t.setCurve=function(e,r){t.weakMap.set(e,r)},t.default=y},62351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(5901),o=r(18709),a=r(95800),s=r(32578);t.default=function(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError((0,a.default)(t,...s.types));return(0,n.createSecretKey)(t)}if(t instanceof n.KeyObject)return t;if((0,i.isCryptoKey)(t))return(0,o.checkSigCryptoKey)(t,e,r),n.KeyObject.from(t);throw TypeError((0,a.default)(t,...s.types,"Uint8Array"))}},49572:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(96390);t.default=function(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},32578:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;let n=r(5901),i=r(84975);t.default=e=>(0,i.default)(e)||(0,n.isCryptoKey)(e);let o=["KeyObject"];t.types=o,(globalThis.CryptoKey||(null===n.default||void 0===n.default?void 0:n.default.CryptoKey))&&o.push("CryptoKey")},84975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(73837);t.default=i.types.isKeyObject?e=>i.types.isKeyObject(e):e=>null!=e&&e instanceof n.KeyObject},57675:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(14300),i=r(6113),o=r(15809),a=r(96390),s=r(49517),l=r(86065),c=r(61989),u=r(56371);t.default=e=>{if(u.jwkImport&&"oct"!==e.kty)return e.d?(0,i.createPrivateKey)({format:"jwk",key:e}):(0,i.createPublicKey)({format:"jwk",key:e});switch(e.kty){case"oct":return(0,i.createSecretKey)((0,o.decode)(e.k));case"RSA":{let t=new c.default,r=void 0!==e.d,o=n.Buffer.from(e.n,"base64"),a=n.Buffer.from(e.e,"base64");r?(t.zero(),t.unsignedInteger(o),t.unsignedInteger(a),t.unsignedInteger(n.Buffer.from(e.d,"base64")),t.unsignedInteger(n.Buffer.from(e.p,"base64")),t.unsignedInteger(n.Buffer.from(e.q,"base64")),t.unsignedInteger(n.Buffer.from(e.dp,"base64")),t.unsignedInteger(n.Buffer.from(e.dq,"base64")),t.unsignedInteger(n.Buffer.from(e.qi,"base64"))):(t.unsignedInteger(o),t.unsignedInteger(a));let s={key:t.end(),format:"der",type:"pkcs1"},u=r?(0,i.createPrivateKey)(s):(0,i.createPublicKey)(s);return(0,l.setModulusLength)(u,o.length<<3),u}case"EC":{let t=new c.default,r=void 0!==e.d,o=n.Buffer.concat([n.Buffer.alloc(1,4),n.Buffer.from(e.x,"base64"),n.Buffer.from(e.y,"base64")]);if(r){t.zero();let r=new c.default;r.oidFor("ecPublicKey"),r.oidFor(e.crv),t.add(r.end());let a=new c.default;a.one(),a.octStr(n.Buffer.from(e.d,"base64"));let l=new c.default;l.bitStr(o);let u=l.end(n.Buffer.from([161]));a.add(u);let d=a.end(),p=new c.default;p.add(d);let f=p.end(n.Buffer.from([4]));t.add(f);let h=t.end(),y=(0,i.createPrivateKey)({key:h,format:"der",type:"pkcs8"});return(0,s.setCurve)(y,e.crv),y}let a=new c.default;a.oidFor("ecPublicKey"),a.oidFor(e.crv),t.add(a.end()),t.bitStr(o);let l=t.end(),u=(0,i.createPublicKey)({key:l,format:"der",type:"spki"});return(0,s.setCurve)(u,e.crv),u}case"OKP":{let t=new c.default;if(void 0!==e.d){t.zero();let r=new c.default;r.oidFor(e.crv),t.add(r.end());let o=new c.default;o.octStr(n.Buffer.from(e.d,"base64"));let a=o.end(n.Buffer.from([4]));t.add(a);let s=t.end();return(0,i.createPrivateKey)({key:s,format:"der",type:"pkcs8"})}let r=new c.default;r.oidFor(e.crv),t.add(r.end()),t.bitStr(n.Buffer.from(e.x,"base64"));let o=t.end();return(0,i.createPublicKey)({key:o,format:"der",type:"spki"})}default:throw new a.JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}}},69920:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(15809),o=r(9556),a=r(96390),s=r(49517),l=r(5901),c=r(84975),u=r(95800),d=r(32578),p=r(56371),f=e=>{let t;if((0,l.isCryptoKey)(e)){if(!e.extractable)throw TypeError("CryptoKey is not extractable");t=n.KeyObject.from(e)}else if((0,c.default)(e))t=e;else if(e instanceof Uint8Array)return{kty:"oct",k:(0,i.encode)(e)};else throw TypeError((0,u.default)(e,...d.types,"Uint8Array"));if(p.jwkExport){if("secret"!==t.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(t.asymmetricKeyType))throw new a.JOSENotSupported("Unsupported key asymmetricKeyType");return t.export({format:"jwk"})}switch(t.type){case"secret":return{kty:"oct",k:(0,i.encode)(t.export())};case"private":case"public":switch(t.asymmetricKeyType){case"rsa":{let e;let r=t.export({format:"der",type:"pkcs1"}),n=new o.default(r);"private"===t.type&&n.unsignedInteger();let a=(0,i.encode)(n.unsignedInteger()),s=(0,i.encode)(n.unsignedInteger());return"private"===t.type&&(e={d:(0,i.encode)(n.unsignedInteger()),p:(0,i.encode)(n.unsignedInteger()),q:(0,i.encode)(n.unsignedInteger()),dp:(0,i.encode)(n.unsignedInteger()),dq:(0,i.encode)(n.unsignedInteger()),qi:(0,i.encode)(n.unsignedInteger())}),n.end(),{kty:"RSA",n:a,e:s,...e}}case"ec":{let e,r,o;let l=(0,s.default)(t);switch(l){case"secp256k1":e=64,r=33,o=-1;break;case"P-256":e=64,r=36,o=-1;break;case"P-384":e=96,r=35,o=-3;break;case"P-521":e=132,r=35,o=-3;break;default:throw new a.JOSENotSupported("Unsupported curve")}if("public"===t.type){let r=t.export({type:"spki",format:"der"});return{kty:"EC",crv:l,x:(0,i.encode)(r.subarray(-e,-e/2)),y:(0,i.encode)(r.subarray(-e/2))}}let c=t.export({type:"pkcs8",format:"der"});return c.length<100&&(r+=o),{...f((0,n.createPublicKey)(t)),d:(0,i.encode)(c.subarray(r,r+e/2))}}case"ed25519":case"x25519":{let e=(0,s.default)(t);if("public"===t.type){let r=t.export({type:"spki",format:"der"});return{kty:"OKP",crv:e,x:(0,i.encode)(r.subarray(-32))}}let r=t.export({type:"pkcs8",format:"der"});return{...f((0,n.createPublicKey)(t)),d:(0,i.encode)(r.subarray(-32))}}case"ed448":case"x448":{let e=(0,s.default)(t);if("public"===t.type){let r=t.export({type:"spki",format:"der"});return{kty:"OKP",crv:e,x:(0,i.encode)(r.subarray("Ed448"===e?-57:-56))}}let r=t.export({type:"pkcs8",format:"der"});return{...f((0,n.createPublicKey)(t)),d:(0,i.encode)(r.subarray("Ed448"===e?-57:-56))}}default:throw new a.JOSENotSupported("Unsupported key asymmetricKeyType")}default:throw new a.JOSENotSupported("Unsupported key type")}};t.default=f},85083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(49517),o=r(96390),a=r(86065),s=r(56371),l={padding:n.constants.RSA_PKCS1_PSS_PADDING,saltLength:n.constants.RSA_PSS_SALTLEN_DIGEST},c=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);t.default=function(e,t){switch(e){case"EdDSA":if(!["ed25519","ed448"].includes(t.asymmetricKeyType))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return t;case"RS256":case"RS384":case"RS512":if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,a.default)(t,e),t;case s.rsaPssParams&&"PS256":case s.rsaPssParams&&"PS384":case s.rsaPssParams&&"PS512":if("rsa-pss"===t.asymmetricKeyType){let{hashAlgorithm:r,mgf1HashAlgorithm:n,saltLength:i}=t.asymmetricKeyDetails,o=parseInt(e.slice(-3),10);if(void 0!==r&&(r!==`sha${o}`||n!==r))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(void 0!==i&&i>o>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,a.default)(t,e),{key:t,...l};case!s.rsaPssParams&&"PS256":case!s.rsaPssParams&&"PS384":case!s.rsaPssParams&&"PS512":if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,a.default)(t,e),{key:t,...l};case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let r=(0,i.default)(t),n=c.get(e);if(r!==n)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${n}, got ${r}`);return{dsaEncoding:"ieee-p1363",key:t}}default:throw new o.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},5359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;let n=r(73837),i=r(6113),o=r(66091),a=r(42914),s=r(15809),l=r(47651),c=r(77692),u=r(5901),d=r(18709),p=r(84975),f=r(95800),h=r(32578),y=(0,n.promisify)(i.pbkdf2);function _(e,t){if((0,p.default)(e))return e.export();if(e instanceof Uint8Array)return e;if((0,u.isCryptoKey)(e))return(0,d.checkEncCryptoKey)(e,t,"deriveBits","deriveKey"),i.KeyObject.from(e).export();throw TypeError((0,f.default)(e,...h.types,"Uint8Array"))}let m=async(e,t,r,n=2048,i=(0,o.default)(new Uint8Array(16)))=>{(0,c.default)(i);let u=(0,a.p2s)(e,i),d=parseInt(e.slice(13,16),10)>>3,p=_(t,e),f=await y(p,u,n,d,`sha${e.slice(8,11)}`);return{encryptedKey:await (0,l.wrap)(e.slice(-6),f,r),p2c:n,p2s:(0,s.encode)(i)}};t.encrypt=m;let g=async(e,t,r,n,i)=>{(0,c.default)(i);let o=(0,a.p2s)(e,i),s=parseInt(e.slice(13,16),10)>>3,u=_(t,e),d=await y(u,o,n,s,`sha${e.slice(8,11)}`);return(0,l.unwrap)(e.slice(-6),d,r)};t.decrypt=g},66091:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(6113);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.randomFillSync}})},67716:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;let n=r(6113),i=r(86065),o=r(5901),a=r(18709),s=r(84975),l=r(95800),c=r(32578),u=(e,t)=>{if("rsa"!==e.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,i.default)(e,t)},d=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return n.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return n.constants.RSA_PKCS1_PADDING;default:return}},p=e=>{switch(e){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function f(e,t,...r){if((0,s.default)(e))return e;if((0,o.isCryptoKey)(e))return(0,a.checkEncCryptoKey)(e,t,...r),n.KeyObject.from(e);throw TypeError((0,l.default)(e,...c.types))}t.encrypt=(e,t,r)=>{let i=d(e),o=p(e),a=f(t,e,"wrapKey","encrypt");return u(a,e),(0,n.publicEncrypt)({key:a,oaepHash:o,padding:i},r)},t.decrypt=(e,t,r)=>{let i=d(e),o=p(e),a=f(t,e,"unwrapKey","decrypt");return u(a,e),(0,n.privateDecrypt)({key:a,oaepHash:o,padding:i},r)}},25042:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="node:crypto"},64855:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});let i=r(6113),o=r(73837),a=r(75214),s=r(49572),l=r(85083),c=r(62351);n=i.sign.length>3?(0,o.promisify)(i.sign):i.sign;let u=async(e,t,r)=>{let o=(0,c.default)(e,t,"sign");if(e.startsWith("HS")){let t=i.createHmac((0,s.default)(e),o);return t.update(r),t.digest()}return n((0,a.default)(e),r,(0,l.default)(e,o))};t.default=u},8896:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113).timingSafeEqual;t.default=n},30539:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});let i=r(6113),o=r(73837),a=r(75214),s=r(85083),l=r(64855),c=r(62351),u=r(56371);n=i.verify.length>4&&u.oneShotCallback?(0,o.promisify)(i.verify):i.verify;let d=async(e,t,r,o)=>{let u=(0,c.default)(e,t,"verify");if(e.startsWith("HS")){let t=await (0,l.default)(e,u,o);try{return i.timingSafeEqual(r,t)}catch{return!1}}let d=(0,a.default)(e),p=(0,s.default)(e,u);try{return await n(d,o,p,r)}catch{return!1}};t.default=d},5901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCryptoKey=void 0;let n=r(6113),i=r(73837),o=n.webcrypto;t.default=o,t.isCryptoKey=i.types.isCryptoKey?e=>i.types.isCryptoKey(e):e=>!1},89830:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deflate=t.inflate=void 0;let n=r(73837),i=r(59796),o=r(96390),a=(0,n.promisify)(i.inflateRaw),s=(0,n.promisify)(i.deflateRaw);t.inflate=e=>a(e,{maxOutputLength:25e4}).catch(()=>{throw new o.JWEDecompressionFailed}),t.deflate=e=>s(e)},32008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;let n=r(15809);t.encode=n.encode,t.decode=n.decode},3764:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeJwt=void 0;let n=r(32008),i=r(42914),o=r(55786),a=r(96390);t.decodeJwt=function(e){let t,r;if("string"!=typeof e)throw new a.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:s,length:l}=e.split(".");if(5===l)throw new a.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==l)throw new a.JWTInvalid("Invalid JWT");if(!s)throw new a.JWTInvalid("JWTs must contain a payload");try{t=(0,n.decode)(s)}catch{throw new a.JWTInvalid("Failed to base64url decode the payload")}try{r=JSON.parse(i.decoder.decode(t))}catch{throw new a.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,o.default)(r))throw new a.JWTInvalid("Invalid JWT Claims Set");return r}},46043:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeProtectedHeader=void 0;let n=r(32008),i=r(42914),o=r(55786);t.decodeProtectedHeader=function(e){let t;if("string"==typeof e){let r=e.split(".");(3===r.length||5===r.length)&&([t]=r)}else if("object"==typeof e&&e){if("protected"in e)t=e.protected;else throw TypeError("Token does not contain a Protected Header")}try{if("string"!=typeof t||!t)throw Error();let e=JSON.parse(i.decoder.decode((0,n.decode)(t)));if(!(0,o.default)(e))throw Error();return e}catch{throw TypeError("Invalid Token or Protected Header formatting")}}},96390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JWSSignatureVerificationFailed=t.JWKSTimeout=t.JWKSMultipleMatchingKeys=t.JWKSNoMatchingKey=t.JWKSInvalid=t.JWKInvalid=t.JWTInvalid=t.JWSInvalid=t.JWEInvalid=t.JWEDecompressionFailed=t.JWEDecryptionFailed=t.JOSENotSupported=t.JOSEAlgNotAllowed=t.JWTExpired=t.JWTClaimValidationFailed=t.JOSEError=void 0;class r extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}}t.JOSEError=r;class n extends r{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=r}}t.JWTClaimValidationFailed=n;class i extends r{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=r}}t.JWTExpired=i;class o extends r{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}t.JOSEAlgNotAllowed=o;class a extends r{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}t.JOSENotSupported=a;class s extends r{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}t.JWEDecryptionFailed=s;class l extends r{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}}t.JWEDecompressionFailed=l;class c extends r{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}t.JWEInvalid=c;class u extends r{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}t.JWSInvalid=u;class d extends r{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}t.JWTInvalid=d;class p extends r{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}t.JWKInvalid=p;class f extends r{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}t.JWKSInvalid=f;class h extends r{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}t.JWKSNoMatchingKey=h;class y extends r{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}t.JWKSMultipleMatchingKeys=y,Symbol.asyncIterator;class _ extends r{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}t.JWKSTimeout=_;class m extends r{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}t.JWSSignatureVerificationFailed=m},29695:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(25042);t.default=n.default},90358:(e,t,r)=>{let n={unstable_cache:r(32330).A,revalidateTag:r(99840).revalidateTag,revalidatePath:r(99840).revalidatePath,unstable_noStore:r(96654).P};e.exports=n,t.unstable_cache=n.unstable_cache,t.revalidatePath=n.revalidatePath,t.revalidateTag=n.revalidateTag,t.unstable_noStore=n.unstable_noStore},9362:(e,t,r)=>{"use strict";r.r(t);var n=r(46895),i={};for(let e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i)},7180:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraftMode",{enumerable:!0,get:function(){return o}});let n=r(45869),i=r(99895);class o{get isEnabled(){return this._provider.isEnabled}enable(){let e=n.staticGenerationAsyncStorage.getStore();return e&&(0,i.trackDynamicDataAccessed)(e,"draftMode().enable()"),this._provider.enable()}disable(){let e=n.staticGenerationAsyncStorage.getStore();return e&&(0,i.trackDynamicDataAccessed)(e,"draftMode().disable()"),this._provider.disable()}constructor(e){this._provider=e}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},46895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{cookies:function(){return p},draftMode:function(){return f},headers:function(){return d}});let n=r(72616),i=r(21482),o=r(38521),a=r(72934),s=r(7180),l=r(99895),c=r(45869),u=r(54580);function d(){let e="headers",t=c.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return i.HeadersAdapter.seal(new Headers({}));(0,l.trackDynamicDataAccessed)(t,e)}return(0,u.getExpectedRequestStore)(e).headers}function p(){let e="cookies",t=c.staticGenerationAsyncStorage.getStore();if(t){if(t.forceStatic)return n.RequestCookiesAdapter.seal(new o.RequestCookies(new Headers({})));(0,l.trackDynamicDataAccessed)(t,e)}let r=(0,u.getExpectedRequestStore)(e),i=a.actionAsyncStorage.getStore();return(null==i?void 0:i.isAction)||(null==i?void 0:i.isAppRoute)?r.mutableCookies:r.cookies}function f(){let e=(0,u.getExpectedRequestStore)("draftMode");return new s.DraftMode(e.draftMode)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},21134:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return i},extractInterceptionRouteInformation:function(){return a},isInterceptionRouteAppPath:function(){return o}});let n=r(14198),i=["(..)(..)","(.)","(..)","(...)"];function o(e){return void 0!==e.split("/").find(e=>i.find(t=>e.startsWith(t)))}function a(e){let t,r,o;for(let n of e.split("/"))if(r=i.find(e=>n.startsWith(e))){[t,o]=e.split(r,2);break}if(!t||!r||!o)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=(0,n.normalizeAppPath)(t),r){case"(.)":o="/"===t?`/${o}`:t+"/"+o;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);o=t.split("/").slice(0,-1).concat(o).join("/");break;case"(...)":o="/"+o;break;case"(..)(..)":let a=t.split("/");if(a.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);o=a.slice(0,-2).concat(o).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:o}}},21482:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HeadersAdapter:function(){return o},ReadonlyHeadersError:function(){return i}});let n=r(47312);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class o extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,i){if("symbol"==typeof r)return n.ReflectAdapter.get(t,r,i);let o=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===o);if(void 0!==a)return n.ReflectAdapter.get(t,a,i)},set(t,r,i,o){if("symbol"==typeof r)return n.ReflectAdapter.set(t,r,i,o);let a=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===a);return n.ReflectAdapter.set(t,s??r,i,o)},has(t,r){if("symbol"==typeof r)return n.ReflectAdapter.has(t,r);let i=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==o&&n.ReflectAdapter.has(t,o)},deleteProperty(t,r){if("symbol"==typeof r)return n.ReflectAdapter.deleteProperty(t,r);let i=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===o||n.ReflectAdapter.deleteProperty(t,o)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return i.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new o(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},47312:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},72616:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{MutableRequestCookiesAdapter:function(){return d},ReadonlyRequestCookiesError:function(){return a},RequestCookiesAdapter:function(){return s},appendMutableCookies:function(){return u},getModifiedCookieValues:function(){return c}});let n=r(38521),i=r(47312),o=r(45869);class a extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new a}}class s{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return a.callable;default:return i.ReflectAdapter.get(e,t,r)}}})}}let l=Symbol.for("next.mutated.cookies");function c(e){let t=e[l];return t&&Array.isArray(t)&&0!==t.length?t:[]}function u(e,t){let r=c(t);if(0===r.length)return!1;let i=new n.ResponseCookies(e),o=i.getAll();for(let e of r)i.set(e);for(let e of o)i.set(e);return!0}class d{static wrap(e,t){let r=new n.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let a=[],s=new Set,c=()=>{let e=o.staticGenerationAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),a=r.getAll().filter(e=>s.has(e.name)),t){let e=[];for(let t of a){let r=new n.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case l:return a;case"delete":return function(...t){s.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{c()}};case"set":return function(...t){s.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{c()}};default:return i.ReflectAdapter.get(e,t,r)}}})}}},99840:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{revalidatePath:function(){return c},revalidateTag:function(){return l}});let n=r(99895),i=r(65551),o=r(14152),a=r(13824),s=r(45869);function l(e){return u(e,`revalidateTag ${e}`)}function c(e,t){if(e.length>o.NEXT_CACHE_SOFT_TAG_MAX_LENGTH){console.warn(`Warning: revalidatePath received "${e}" which exceeded max length of ${o.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`);return}let r=`${o.NEXT_CACHE_IMPLICIT_TAG_ID}${e}`;return t?r+=`${r.endsWith("/")?"":"/"}${t}`:(0,i.isDynamicRoute)(e)&&console.warn(`Warning: a dynamic page path "${e}" was passed to "revalidatePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`),u(r,`revalidatePath ${e}`)}function u(e,t){let r=s.staticGenerationAsyncStorage.getStore();if(!r||!r.incrementalCache)throw Error(`Invariant: static generation store missing in ${t}`);if(r.isUnstableCacheCallback)throw Error(`Route ${(0,a.getPathname)(r.urlPathname)} used "${t}" inside a function cached with "unstable_cache(...)" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);(0,n.trackDynamicDataAccessed)(r,t),r.revalidatedTags||(r.revalidatedTags=[]),r.revalidatedTags.includes(e)||r.revalidatedTags.push(e),r.pendingRevalidates||(r.pendingRevalidates={}),r.pendingRevalidates[e]=null==r.incrementalCache.revalidateTag?void 0:r.incrementalCache.revalidateTag.call(r.incrementalCache,e).catch(t=>{console.error(`revalidate failed for ${e}`,t)}),r.pathWasRevalidated=!0}},32330:(e,t,r)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return l}});let n=r(14152),i=r(15262),o=r(45869),a=0;async function s(e,t,r,i,o,a,s){await t.set(r,{kind:"FETCH",data:{headers:{},body:JSON.stringify(e),status:200,url:""},revalidate:"number"!=typeof o?n.CACHE_ONE_YEAR:o},{revalidate:o,fetchCache:!0,tags:i,fetchIdx:a,fetchUrl:s})}function l(e,t,r={}){if(0===r.revalidate)throw Error(`Invariant revalidate: 0 can not be passed to unstable_cache(), must be "false" or "> 0" ${e.toString()}`);let n=r.tags?(0,i.validateTags)(r.tags,`unstable_cache ${e.toString()}`):[];(0,i.validateRevalidate)(r.revalidate,`unstable_cache ${e.name||e.toString()}`);let l=`${e.toString()}-${Array.isArray(t)&&t.join(",")}`;return async(...t)=>{let c=o.staticGenerationAsyncStorage.getStore(),u=(null==c?void 0:c.incrementalCache)||globalThis.__incrementalCache;if(!u)throw Error(`Invariant: incrementalCache missing in unstable_cache ${e.toString()}`);let{pathname:d,searchParams:p}=new URL((null==c?void 0:c.urlPathname)||"/","http://n"),f=[...p.keys()].sort((e,t)=>e.localeCompare(t)).map(e=>`${e}=${p.get(e)}`).join("&"),h=`${l}-${JSON.stringify(t)}`,y=await u.fetchCacheKey(h),_=`unstable_cache ${d}${f.length?"?":""}${f} ${e.name?` ${e.name}`:y}`,m=(c?c.nextFetchId:a)??1;if(c){if(c.nextFetchId=m+1,"number"==typeof r.revalidate?"number"==typeof c.revalidate&&c.revalidate<r.revalidate||(c.revalidate=r.revalidate):!1===r.revalidate&&void 0===c.revalidate&&(c.revalidate=r.revalidate),c.tags)for(let e of n)c.tags.includes(e)||c.tags.push(e);else c.tags=n.slice();let a=(0,i.addImplicitTags)(c);if("force-no-store"!==c.fetchCache&&!c.isOnDemandRevalidate&&!u.isOnDemandRevalidate&&!c.isDraftMode){let i=await u.get(y,{kindHint:"fetch",revalidate:r.revalidate,tags:n,softTags:a,fetchIdx:m,fetchUrl:_});if(i&&i.value){if("FETCH"!==i.value.kind)console.error(`Invariant invalid cacheEntry returned for ${h}`);else{let a=void 0!==i.value.data.body?JSON.parse(i.value.data.body):void 0;return i.isStale&&(c.pendingRevalidates||(c.pendingRevalidates={}),c.pendingRevalidates[h]=o.staticGenerationAsyncStorage.run({...c,fetchCache:"force-no-store",isUnstableCacheCallback:!0},e,...t).then(e=>s(e,u,y,n,r.revalidate,m,_)).catch(e=>console.error(`revalidating cache with key: ${h}`,e))),a}}}let l=await o.staticGenerationAsyncStorage.run({...c,fetchCache:"force-no-store",isUnstableCacheCallback:!0},e,...t);return s(l,u,y,n,r.revalidate,m,_),l}{if(a+=1,!u.isOnDemandRevalidate){let e=c&&(0,i.addImplicitTags)(c),t=await u.get(y,{kindHint:"fetch",revalidate:r.revalidate,tags:n,fetchIdx:m,fetchUrl:_,softTags:e});if(t&&t.value){if("FETCH"!==t.value.kind)console.error(`Invariant invalid cacheEntry returned for ${h}`);else if(!t.isStale)return void 0!==t.value.data.body?JSON.parse(t.value.data.body):void 0}}let l=await o.staticGenerationAsyncStorage.run({fetchCache:"force-no-store",isUnstableCacheCallback:!0,urlPathname:"/",isStaticGeneration:!1,prerenderState:null},e,...t);return s(l,u,y,n,r.revalidate,m,_),l}}}},96654:(e,t,r)=>{"use strict";Object.defineProperty(t,"P",{enumerable:!0,get:function(){return o}});let n=r(45869),i=r(99895);function o(){let e=n.staticGenerationAsyncStorage.getStore();return e?e.forceStatic?void 0:void(e.isUnstableNoStore=!0,(0,i.markCurrentScopeAsDynamic)(e,"unstable_noStore()")):void 0}},32649:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},14198:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return o},normalizeRscURL:function(){return a}});let n=r(32649),i=r(97133);function o(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,t,r,n)=>!t||(0,i.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t,""))}function a(e){return e.replace(/\.rsc($|\?)/,"$1")}},65551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRoutes:function(){return n.getSortedRoutes},isDynamicRoute:function(){return i.isDynamicRoute}});let n=r(49322),i=r(77399)},77399:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return o}});let n=r(21134),i=/\/\[[^/]+?\](?=\/|$)/;function o(e){return(0,n.isInterceptionRouteAppPath)(e)&&(e=(0,n.extractInterceptionRouteInformation)(e).interceptedRoute),i.test(e)}},49322:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSortedRoutes",{enumerable:!0,get:function(){return n}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").');r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,n){if(0===e.length){this.placeholder=!1;return}if(n)throw Error("Catch-all must be the last part of the URL.");let i=e[0];if(i.startsWith("[")&&i.endsWith("]")){let r=i.slice(1,-1),a=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),a=!0),r.startsWith("...")&&(r=r.substring(3),n=!0),r.startsWith("[")||r.endsWith("]"))throw Error("Segment names may not start or end with extra brackets ('"+r+"').");if(r.startsWith("."))throw Error("Segment names may not start with erroneous periods ('"+r+"').");function o(e,r){if(null!==e&&e!==r)throw Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"').");t.forEach(e=>{if(e===r)throw Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path');if(e.replace(/\W/g,"")===i.replace(/\W/g,""))throw Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path')}),t.push(r)}if(n){if(a){if(null!=this.restSlugName)throw Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).');o(this.optionalRestSlugName,r),this.optionalRestSlugName=r,i="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").');o(this.restSlugName,r),this.restSlugName=r,i="[...]"}}else{if(a)throw Error('Optional route parameters are not yet supported ("'+e[0]+'").');o(this.slugName,r),this.slugName=r,i="[]"}}this.children.has(i)||this.children.set(i,new r),this.children.get(i)._insert(e.slice(1),t,n)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function n(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}},97133:(e,t)=>{"use strict";function r(e){return"("===e[0]&&e.endsWith(")")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_SEGMENT_KEY:function(){return i},PAGE_SEGMENT_KEY:function(){return n},isGroupSegment:function(){return r}});let n="__PAGE__",i="__DEFAULT__"},54465:(e,t,r)=>{t.OAuth=r(34459).OAuth,t.OAuthEcho=r(34459).OAuthEcho,t.OAuth2=r(52565).OAuth2},1637:e=>{e.exports.isAnEarlyCloseHost=function(e){return e&&e.match(".*google(apis)?.com$")}},34459:(e,t,r)=>{var n=r(6113),i=r(1493),o=r(13685),a=r(95687),s=r(35034),l=r(63477),c=r(1637);t.OAuth=function(e,t,r,n,i,o,a,s,l){if(this._isEcho=!1,this._requestUrl=e,this._accessUrl=t,this._consumerKey=r,this._consumerSecret=this._encodeData(n),"RSA-SHA1"==a&&(this._privateKey=n),this._version=i,void 0===o?this._authorize_callback="oob":this._authorize_callback=o,"PLAINTEXT"!=a&&"HMAC-SHA1"!=a&&"RSA-SHA1"!=a)throw Error("Un-supported signature method: "+a);this._signatureMethod=a,this._nonceSize=s||32,this._headers=l||{Accept:"*/*",Connection:"close","User-Agent":"Node authentication"},this._clientOptions=this._defaultClientOptions={requestTokenHttpMethod:"POST",accessTokenHttpMethod:"POST",followRedirects:!0},this._oauthParameterSeperator=","},t.OAuthEcho=function(e,t,r,n,i,o,a,s){if(this._isEcho=!0,this._realm=e,this._verifyCredentials=t,this._consumerKey=r,this._consumerSecret=this._encodeData(n),"RSA-SHA1"==o&&(this._privateKey=n),this._version=i,"PLAINTEXT"!=o&&"HMAC-SHA1"!=o&&"RSA-SHA1"!=o)throw Error("Un-supported signature method: "+o);this._signatureMethod=o,this._nonceSize=a||32,this._headers=s||{Accept:"*/*",Connection:"close","User-Agent":"Node authentication"},this._oauthParameterSeperator=","},t.OAuthEcho.prototype=t.OAuth.prototype,t.OAuth.prototype._getTimestamp=function(){return Math.floor(new Date().getTime()/1e3)},t.OAuth.prototype._encodeData=function(e){return null==e||""==e?"":encodeURIComponent(e).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},t.OAuth.prototype._decodeData=function(e){return null!=e&&(e=e.replace(/\+/g," ")),decodeURIComponent(e)},t.OAuth.prototype._getSignature=function(e,t,r,n){var i=this._createSignatureBase(e,t,r);return this._createSignature(i,n)},t.OAuth.prototype._normalizeUrl=function(e){var t=s.parse(e,!0),r="";return t.port&&("http:"==t.protocol&&"80"!=t.port||"https:"==t.protocol&&"443"!=t.port)&&(r=":"+t.port),t.pathname&&""!=t.pathname||(t.pathname="/"),t.protocol+"//"+t.hostname+r+t.pathname},t.OAuth.prototype._isParameterNameAnOAuthParameter=function(e){var t=e.match("^oauth_");return!!t&&"oauth_"===t[0]},t.OAuth.prototype._buildAuthorizationHeaders=function(e){var t="OAuth ";this._isEcho&&(t+='realm="'+this._realm+'",');for(var r=0;r<e.length;r++)this._isParameterNameAnOAuthParameter(e[r][0])&&(t+=""+this._encodeData(e[r][0])+'="'+this._encodeData(e[r][1])+'"'+this._oauthParameterSeperator);return t.substring(0,t.length-this._oauthParameterSeperator.length)},t.OAuth.prototype._makeArrayOfArgumentsHash=function(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(Array.isArray(n))for(var i=0;i<n.length;i++)t[t.length]=[r,n[i]];else t[t.length]=[r,n]}return t},t.OAuth.prototype._sortRequestParams=function(e){return e.sort(function(e,t){return e[0]==t[0]?e[1]<t[1]?-1:1:e[0]<t[0]?-1:1}),e},t.OAuth.prototype._normaliseRequestParams=function(e){for(var t=this._makeArrayOfArgumentsHash(e),r=0;r<t.length;r++)t[r][0]=this._encodeData(t[r][0]),t[r][1]=this._encodeData(t[r][1]);t=this._sortRequestParams(t);for(var e="",r=0;r<t.length;r++)e+=t[r][0]+"="+t[r][1],r<t.length-1&&(e+="&");return e},t.OAuth.prototype._createSignatureBase=function(e,t,r){return t=this._encodeData(this._normalizeUrl(t)),r=this._encodeData(r),e.toUpperCase()+"&"+t+"&"+r},t.OAuth.prototype._createSignature=function(e,t){if(void 0===t)var t="";else t=this._encodeData(t);var r=this._consumerSecret+"&"+t,o="";return"PLAINTEXT"==this._signatureMethod?o=r:"RSA-SHA1"==this._signatureMethod?(r=this._privateKey||"",o=n.createSign("RSA-SHA1").update(e).sign(r,"base64")):o=n.Hmac?n.createHmac("sha1",r).update(e).digest("base64"):i.HMACSHA1(r,e),o},t.OAuth.prototype.NONCE_CHARS=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],t.OAuth.prototype._getNonce=function(e){for(var t,r=[],n=this.NONCE_CHARS,i=n.length,o=0;o<e;o++)t=Math.floor(Math.random()*i),r[o]=n[t];return r.join("")},t.OAuth.prototype._createClient=function(e,t,r,n,i,s){return(s?a:o).request({host:t,port:e,path:n,method:r,headers:i})},t.OAuth.prototype._prepareParameters=function(e,t,r,n,i){var o={oauth_timestamp:this._getTimestamp(),oauth_nonce:this._getNonce(this._nonceSize),oauth_version:this._version,oauth_signature_method:this._signatureMethod,oauth_consumer_key:this._consumerKey};if(e&&(o.oauth_token=e),this._isEcho)u=this._getSignature("GET",this._verifyCredentials,this._normaliseRequestParams(o),t);else{if(i)for(var a in i)i.hasOwnProperty(a)&&(o[a]=i[a]);var c=s.parse(n,!1);if(c.query){var u,d,p=l.parse(c.query);for(var a in p){var f=p[a];if("object"==typeof f)for(d in f)o[a+"["+d+"]"]=f[d];else o[a]=f}}u=this._getSignature(r,n,this._normaliseRequestParams(o),t)}var h=this._sortRequestParams(this._makeArrayOfArgumentsHash(o));return h[h.length]=["oauth_signature",u],h},t.OAuth.prototype._performSecureRequest=function(e,t,r,n,i,o,a,u){var d,p,f=this._prepareParameters(e,t,r,n,i);a||(a="application/x-www-form-urlencoded");var h=s.parse(n,!1);"http:"!=h.protocol||h.port||(h.port=80),"https:"!=h.protocol||h.port||(h.port=443);var y={},_=this._buildAuthorizationHeaders(f);for(var m in this._isEcho?y["X-Verify-Credentials-Authorization"]=_:y.Authorization=_,y.Host=h.host,this._headers)this._headers.hasOwnProperty(m)&&(y[m]=this._headers[m]);for(var m in i)this._isParameterNameAnOAuthParameter(m)&&delete i[m];("POST"==r||"PUT"==r)&&null==o&&null!=i&&(o=l.stringify(i).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")),o?Buffer.isBuffer(o)?y["Content-length"]=o.length:y["Content-length"]=Buffer.byteLength(o):y["Content-length"]=0,y["Content-Type"]=a,h.pathname&&""!=h.pathname||(h.pathname="/"),d=h.query?h.pathname+"?"+h.query:h.pathname,p="https:"==h.protocol?this._createClient(h.port,h.hostname,r,d,y,!0):this._createClient(h.port,h.hostname,r,d,y);var g=this._clientOptions;if(!u)return("POST"==r||"PUT"==r)&&null!=o&&""!=o&&p.write(o),p;var v="",w=this,b=c.isAnEarlyCloseHost(h.hostname),E=!1,S=function(n){E||(E=!0,n.statusCode>=200&&n.statusCode<=299?u(null,v,n):(301==n.statusCode||302==n.statusCode)&&g.followRedirects&&n.headers&&n.headers.location?w._performSecureRequest(e,t,r,n.headers.location,i,o,a,u):u({statusCode:n.statusCode,data:v},v,n))};p.on("response",function(e){e.setEncoding("utf8"),e.on("data",function(e){v+=e}),e.on("end",function(){S(e)}),e.on("close",function(){b&&S(e)})}),p.on("error",function(e){E||(E=!0,u(e))}),("POST"==r||"PUT"==r)&&null!=o&&""!=o&&p.write(o),p.end()},t.OAuth.prototype.setClientOptions=function(e){var t,r={},n=Object.prototype.hasOwnProperty;for(t in this._defaultClientOptions)n.call(e,t)?r[t]=e[t]:r[t]=this._defaultClientOptions[t];this._clientOptions=r},t.OAuth.prototype.getOAuthAccessToken=function(e,t,r,n){var i={};"function"==typeof r?n=r:i.oauth_verifier=r,this._performSecureRequest(e,t,this._clientOptions.accessTokenHttpMethod,this._accessUrl,i,null,null,function(e,t,r){if(e)n(e);else{var i=l.parse(t),o=i.oauth_token;delete i.oauth_token;var a=i.oauth_token_secret;delete i.oauth_token_secret,n(null,o,a,i)}})},t.OAuth.prototype.getProtectedResource=function(e,t,r,n,i){this._performSecureRequest(r,n,t,e,null,"",null,i)},t.OAuth.prototype.delete=function(e,t,r,n){return this._performSecureRequest(t,r,"DELETE",e,null,"",null,n)},t.OAuth.prototype.get=function(e,t,r,n){return this._performSecureRequest(t,r,"GET",e,null,"",null,n)},t.OAuth.prototype._putOrPost=function(e,t,r,n,i,o,a){var s=null;return"function"==typeof o&&(a=o,o=null),"string"==typeof i||Buffer.isBuffer(i)||(o="application/x-www-form-urlencoded",s=i,i=null),this._performSecureRequest(r,n,e,t,s,i,o,a)},t.OAuth.prototype.put=function(e,t,r,n,i,o){return this._putOrPost("PUT",e,t,r,n,i,o)},t.OAuth.prototype.post=function(e,t,r,n,i,o){return this._putOrPost("POST",e,t,r,n,i,o)},t.OAuth.prototype.getOAuthRequestToken=function(e,t){"function"==typeof e&&(t=e,e={}),this._authorize_callback&&(e.oauth_callback=this._authorize_callback),this._performSecureRequest(null,null,this._clientOptions.requestTokenHttpMethod,this._requestUrl,e,null,null,function(e,r,n){if(e)t(e);else{var i=l.parse(r),o=i.oauth_token,a=i.oauth_token_secret;delete i.oauth_token,delete i.oauth_token_secret,t(null,o,a,i)}})},t.OAuth.prototype.signUrl=function(e,t,r,n){if(void 0===n)var n="GET";for(var i=this._prepareParameters(t,r,n,e,{}),o=s.parse(e,!1),a="",l=0;l<i.length;l++)a+=i[l][0]+"="+this._encodeData(i[l][1])+"&";return a=a.substring(0,a.length-1),o.protocol+"//"+o.host+o.pathname+"?"+a},t.OAuth.prototype.authHeader=function(e,t,r,n){if(void 0===n)var n="GET";var i=this._prepareParameters(t,r,n,e,{});return this._buildAuthorizationHeaders(i)}},52565:(e,t,r)=>{var n=r(63477),i=(r(6113),r(95687)),o=r(13685),a=r(35034),s=r(1637);t.OAuth2=function(e,t,r,n,i,o){this._clientId=e,this._clientSecret=t,this._baseSite=r,this._authorizeUrl=n||"/oauth/authorize",this._accessTokenUrl=i||"/oauth/access_token",this._accessTokenName="access_token",this._authMethod="Bearer",this._customHeaders=o||{},this._useAuthorizationHeaderForGET=!1,this._agent=void 0},t.OAuth2.prototype.setAgent=function(e){this._agent=e},t.OAuth2.prototype.setAccessTokenName=function(e){this._accessTokenName=e},t.OAuth2.prototype.setAuthMethod=function(e){this._authMethod=e},t.OAuth2.prototype.useAuthorizationHeaderforGET=function(e){this._useAuthorizationHeaderForGET=e},t.OAuth2.prototype._getAccessTokenUrl=function(){return this._baseSite+this._accessTokenUrl},t.OAuth2.prototype.buildAuthHeader=function(e){return this._authMethod+" "+e},t.OAuth2.prototype._chooseHttpLibrary=function(e){var t=i;return"https:"!=e.protocol&&(t=o),t},t.OAuth2.prototype._request=function(e,t,r,i,o,s){var l=a.parse(t,!0);"https:"!=l.protocol||l.port||(l.port=443);var c=this._chooseHttpLibrary(l),u={};for(var d in this._customHeaders)u[d]=this._customHeaders[d];if(r)for(var d in r)u[d]=r[d];u.Host=l.host,u["User-Agent"]||(u["User-Agent"]="Node-oauth"),i?Buffer.isBuffer(i)?u["Content-Length"]=i.length:u["Content-Length"]=Buffer.byteLength(i):u["Content-length"]=0,!o||"Authorization"in u||(l.query||(l.query={}),l.query[this._accessTokenName]=o);var p=n.stringify(l.query);p&&(p="?"+p);var f={host:l.hostname,port:l.port,path:l.pathname+p,method:e,headers:u};this._executeRequest(c,f,i,s)},t.OAuth2.prototype._executeRequest=function(e,t,r,n){var i=s.isAnEarlyCloseHost(t.host),o=!1;function a(e,t){o||(o=!0,e.statusCode>=200&&e.statusCode<=299||301==e.statusCode||302==e.statusCode?n(null,t,e):n({statusCode:e.statusCode,data:t}))}var l="";this._agent&&(t.agent=this._agent);var c=e.request(t);c.on("response",function(e){e.on("data",function(e){l+=e}),e.on("close",function(t){i&&a(e,l)}),e.addListener("end",function(){a(e,l)})}),c.on("error",function(e){o=!0,n(e)}),("POST"==t.method||"PUT"==t.method)&&r&&c.write(r),c.end()},t.OAuth2.prototype.getAuthorizeUrl=function(e){var e=e||{};return e.client_id=this._clientId,this._baseSite+this._authorizeUrl+"?"+n.stringify(e)},t.OAuth2.prototype.getOAuthAccessToken=function(e,t,r){var t=t||{};t.client_id=this._clientId,t.client_secret=this._clientSecret;var i="refresh_token"===t.grant_type?"refresh_token":"code";t[i]=e;var o=n.stringify(t);this._request("POST",this._getAccessTokenUrl(),{"Content-Type":"application/x-www-form-urlencoded"},o,null,function(e,t,i){if(e)r(e);else{try{o=JSON.parse(t)}catch(e){o=n.parse(t)}var o,a=o.access_token,s=o.refresh_token;delete o.refresh_token,r(null,a,s,o)}})},t.OAuth2.prototype.getProtectedResource=function(e,t,r){this._request("GET",e,{},"",t,r)},t.OAuth2.prototype.get=function(e,t,r){if(this._useAuthorizationHeaderForGET){var n={Authorization:this.buildAuthHeader(t)};t=null}else n={};this._request("GET",e,n,"",t,r)}},1493:(e,t)=>{function r(e){for(var t,r,n="",i=-1;++i<e.length;)t=e.charCodeAt(i),r=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=r&&r<=57343&&(t=65536+((1023&t)<<10)+(1023&r),i++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}function n(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(var r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<24-r%32;return t}function i(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var r=Array(80),n=1732584193,i=-271733879,s=-1732584194,l=271733878,c=-1009589776,u=0;u<e.length;u+=16){for(var d=n,p=i,f=s,h=l,y=c,_=0;_<80;_++){_<16?r[_]=e[u+_]:r[_]=a(r[_-3]^r[_-8]^r[_-14]^r[_-16],1);var m,g,v,w,b,E=o(o(a(n,5),(m=_,g=i,v=s,w=l,m<20?g&v|~g&w:m<40?g^v^w:m<60?g&v|g&w|v&w:g^v^w)),o(o(c,r[_]),(b=_)<20?1518500249:b<40?1859775393:b<60?-1894007588:-899497514));c=l,l=s,s=a(i,30),i=n,n=E}n=o(n,d),i=o(i,p),s=o(s,f),l=o(l,h),c=o(c,y)}return[n,i,s,l,c]}function o(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function a(e,t){return e<<t|e>>>32-t}t.HMACSHA1=function(e,t){return function(e){for(var t="",r=e.length,n=0;n<r;n+=3)for(var i=e.charCodeAt(n)<<16|(n+1<r?e.charCodeAt(n+1)<<8:0)|(n+2<r?e.charCodeAt(n+2):0),o=0;o<4;o++)8*n+6*o>8*e.length?t+="=":t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>>6*(3-o)&63);return t}(function(e,t){var r=n(e);r.length>16&&(r=i(r,8*e.length));for(var o=Array(16),a=Array(16),s=0;s<16;s++)o[s]=909522486^r[s],a[s]=1549556828^r[s];var l=i(o.concat(n(t)),512+8*t.length);return function(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>24-r%32&255);return t}(i(a.concat(l),672))}(r(e),r(t)))}},47197:(e,t,r)=>{"use strict";let n,i;r.r(t),r.d(t,{NIL:()=>E,parse:()=>m,stringify:()=>f,v1:()=>_,v3:()=>v,v4:()=>w,v5:()=>b,validate:()=>d,version:()=>S});var o=r(6113),a=r.n(o);let s=new Uint8Array(256),l=s.length;function c(){return l>s.length-16&&(a().randomFillSync(s),l=0),s.slice(l,l+=16)}let u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(e){return"string"==typeof e&&u.test(e)},p=[];for(let e=0;e<256;++e)p.push((e+256).toString(16).substr(1));let f=function(e,t=0){let r=(p[e[t+0]]+p[e[t+1]]+p[e[t+2]]+p[e[t+3]]+"-"+p[e[t+4]]+p[e[t+5]]+"-"+p[e[t+6]]+p[e[t+7]]+"-"+p[e[t+8]]+p[e[t+9]]+"-"+p[e[t+10]]+p[e[t+11]]+p[e[t+12]]+p[e[t+13]]+p[e[t+14]]+p[e[t+15]]).toLowerCase();if(!d(r))throw TypeError("Stringified UUID is invalid");return r},h=0,y=0,_=function(e,t,r){let o=t&&r||0,a=t||Array(16),s=(e=e||{}).node||n,l=void 0!==e.clockseq?e.clockseq:i;if(null==s||null==l){let t=e.random||(e.rng||c)();null==s&&(s=n=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==l&&(l=i=(t[6]<<8|t[7])&16383)}let u=void 0!==e.msecs?e.msecs:Date.now(),d=void 0!==e.nsecs?e.nsecs:y+1,p=u-h+(d-y)/1e4;if(p<0&&void 0===e.clockseq&&(l=l+1&16383),(p<0||u>h)&&void 0===e.nsecs&&(d=0),d>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");h=u,y=d,i=l;let _=((268435455&(u+=122192928e5))*1e4+d)%4294967296;a[o++]=_>>>24&255,a[o++]=_>>>16&255,a[o++]=_>>>8&255,a[o++]=255&_;let m=u/4294967296*1e4&268435455;a[o++]=m>>>8&255,a[o++]=255&m,a[o++]=m>>>24&15|16,a[o++]=m>>>16&255,a[o++]=l>>>8|128,a[o++]=255&l;for(let e=0;e<6;++e)a[o+e]=s[e];return t||f(a)},m=function(e){let t;if(!d(e))throw TypeError("Invalid UUID");let r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function g(e,t,r){function n(e,n,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=m(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=a[e];return i}return f(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}let v=g("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),a().createHash("md5").update(e).digest()}),w=function(e,t,r){let n=(e=e||{}).random||(e.rng||c)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return f(n)},b=g("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),a().createHash("sha1").update(e).digest()}),E="00000000-0000-0000-0000-000000000000",S=function(e){if(!d(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},97940:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},65543:(e,t,r)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function i(e,t,r,n){if(!(this instanceof i))return new i(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=i,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.tail=new i(e,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},n.prototype.unshift=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.head=new i(e,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,i=this.head;null!==i;)r.push(e.call(t,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,i=this.tail;null!==i;)r.push(e.call(t,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var e=Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)r.push(o.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)r.push(o.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;null!==o&&n<e;n++)o=o.next;for(var a=[],n=0;o&&n<t;n++)a.push(o.value),o=this.removeNode(o);null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var n=0;n<r.length;n++)o=function(e,t,r){var n=t===e.head?new i(r,null,t,e):new i(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}(this,o,r[n]);return a},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(97940)(n)}catch(e){}},35796:(e,t,r)=>{"use strict";var n=r(1258);Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedStrategy=t.UnknownError=t.OAuthCallbackError=t.MissingSecret=t.MissingAuthorize=t.MissingAdapterMethods=t.MissingAdapter=t.MissingAPIRoute=t.InvalidCallbackUrl=t.AccountNotLinkedError=void 0,t.adapterErrorHandler=function(e,t){if(e)return Object.keys(e).reduce(function(r,n){return r[n]=(0,o.default)(i.default.mark(function r(){var o,a,s,l,c,u=arguments;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(r.prev=0,a=Array(o=u.length),s=0;s<o;s++)a[s]=u[s];return t.debug("adapter_".concat(n),{args:a}),l=e[n],r.next=6,l.apply(void 0,a);case 6:return r.abrupt("return",r.sent);case 9:throw r.prev=9,r.t0=r.catch(0),t.error("adapter_error_".concat(n),r.t0),(c=new h(r.t0)).name="".concat(P(n),"Error"),c;case 15:case"end":return r.stop()}},r,null,[[0,9]])})),r},{})},t.capitalize=P,t.eventsErrorHandler=function(e,t){return Object.keys(e).reduce(function(r,n){return r[n]=(0,o.default)(i.default.mark(function r(){var o,a=arguments;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=e[n],r.next=4,o.apply(void 0,a);case 4:return r.abrupt("return",r.sent);case 7:r.prev=7,r.t0=r.catch(0),t.error("".concat(k(n),"_EVENT_ERROR"),r.t0);case 10:case"end":return r.stop()}},r,null,[[0,7]])})),r},{})},t.upperSnake=k;var i=n(r(49937)),o=n(r(13952)),a=n(r(19122)),s=n(r(2280)),l=n(r(20819)),c=n(r(55961)),u=n(r(52602)),d=n(r(31586)),p=n(r(1778));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);return r=t?Reflect.construct(n,arguments,(0,p.default)(this).constructor):n.apply(this,arguments),(0,d.default)(this,r)}}var h=function(e){(0,u.default)(r,e);var t=f(r);function r(e){var n,i;return(0,l.default)(this,r),(i=t.call(this,null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e)).name="UnknownError",i.code=e.code,e instanceof Error&&(i.stack=e.stack),i}return(0,c.default)(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}]),r}((0,n(r(45645)).default)(Error));t.UnknownError=h;var y=function(e){(0,u.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,s.default)((0,a.default)(e),"name","OAuthCallbackError"),e}return(0,c.default)(r)}(h);t.OAuthCallbackError=y;var _=function(e){(0,u.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,s.default)((0,a.default)(e),"name","AccountNotLinkedError"),e}return(0,c.default)(r)}(h);t.AccountNotLinkedError=_;var m=function(e){(0,u.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,s.default)((0,a.default)(e),"name","MissingAPIRouteError"),(0,s.default)((0,a.default)(e),"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),e}return(0,c.default)(r)}(h);t.MissingAPIRoute=m;var g=function(e){(0,u.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,s.default)((0,a.default)(e),"name","MissingSecretError"),(0,s.default)((0,a.default)(e),"code","NO_SECRET"),e}return(0,c.default)(r)}(h);t.MissingSecret=g;var v=function(e){(0,u.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,s.default)((0,a.default)(e),"name","MissingAuthorizeError"),(0,s.default)((0,a.default)(e),"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),e}return(0,c.default)(r)}(h);t.MissingAuthorize=v;var w=function(e){(0,u.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,s.default)((0,a.default)(e),"name","MissingAdapterError"),(0,s.default)((0,a.default)(e),"code","EMAIL_REQUIRES_ADAPTER_ERROR"),e}return(0,c.default)(r)}(h);t.MissingAdapter=w;var b=function(e){(0,u.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,s.default)((0,a.default)(e),"name","MissingAdapterMethodsError"),(0,s.default)((0,a.default)(e),"code","MISSING_ADAPTER_METHODS_ERROR"),e}return(0,c.default)(r)}(h);t.MissingAdapterMethods=b;var E=function(e){(0,u.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,s.default)((0,a.default)(e),"name","UnsupportedStrategyError"),(0,s.default)((0,a.default)(e),"code","CALLBACK_CREDENTIALS_JWT_ERROR"),e}return(0,c.default)(r)}(h);t.UnsupportedStrategy=E;var S=function(e){(0,u.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,s.default)((0,a.default)(e),"name","InvalidCallbackUrl"),(0,s.default)((0,a.default)(e),"code","INVALID_CALLBACK_URL_ERROR"),e}return(0,c.default)(r)}(h);function k(e){return e.replace(/([A-Z])/g,"_$1").toUpperCase()}function P(e){return"".concat(e[0].toUpperCase()).concat(e.slice(1))}t.InvalidCallbackUrl=S},99635:(e,t,r)=>{"use strict";var n=r(1258);Object.defineProperty(t,"__esModule",{value:!0}),t.AuthHandler=_;var i=f(r(83633)),o=r(28293),a=f(r(35814)),s=n(r(96145)),l=r(83629),c=r(55760),u=r(70553),d=r(15693);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}async function h(e){try{return await e.json()}catch(e){}}async function y(e){var t,r,n,i;if(e instanceof Request){let t=new URL(e.url),a=t.pathname.split("/").slice(3),s=Object.fromEntries(e.headers),l=Object.fromEntries(t.searchParams);return l.nextauth=a,{action:a[0],method:e.method,headers:s,body:await h(e),cookies:(0,d.parse)(null!==(r=e.headers.get("cookie"))&&void 0!==r?r:""),providerId:a[1],error:null!==(n=t.searchParams.get("error"))&&void 0!==n?n:a[1],origin:(0,o.detectOrigin)(null!==(i=s["x-forwarded-host"])&&void 0!==i?i:s.host,s["x-forwarded-proto"]),query:l}}let{headers:a}=e,s=null!==(t=null==a?void 0:a["x-forwarded-host"])&&void 0!==t?t:null==a?void 0:a.host;return e.origin=(0,o.detectOrigin)(s,null==a?void 0:a["x-forwarded-proto"]),e}async function _(e){var t,r,n,o,d,p,f,h;let{options:_,req:m}=e,g=await y(m);(0,i.setLogger)(_.logger,_.debug);let v=(0,c.assertConfig)({options:_,req:g});if(Array.isArray(v))v.forEach(i.default.warn);else if(v instanceof Error){if(i.default.error(v.code,v),!["signin","signout","error","verify-request"].includes(g.action)||"GET"!==g.method)return{status:500,headers:[{key:"Content-Type",value:"application/json"}],body:{message:"There is a problem with the server configuration. Check the server logs for more information."}};let{pages:e,theme:t}=_,r=(null==e?void 0:e.error)&&(null===(d=g.query)||void 0===d?void 0:null===(p=d.callbackUrl)||void 0===p?void 0:p.startsWith(e.error));return!(null!=e&&e.error)||r?(r&&i.default.error("AUTH_ON_ERROR_PAGE_ERROR",Error(`The error page ${null==e?void 0:e.error} should not require authentication`)),(0,s.default)({theme:t}).error({error:"configuration"})):{redirect:`${e.error}?error=Configuration`}}let{action:w,providerId:b,error:E,method:S="GET"}=g,{options:k,cookies:P}=await (0,l.init)({authOptions:_,action:w,providerId:b,origin:g.origin,callbackUrl:null!==(t=null===(r=g.body)||void 0===r?void 0:r.callbackUrl)&&void 0!==t?t:null===(n=g.query)||void 0===n?void 0:n.callbackUrl,csrfToken:null===(o=g.body)||void 0===o?void 0:o.csrfToken,cookies:g.cookies,isPost:"POST"===S}),A=new u.SessionStore(k.cookies.sessionToken,g,k.logger);if("GET"===S){let e=(0,s.default)({...k,query:g.query,cookies:P}),{pages:t}=k;switch(w){case"providers":return await a.providers(k.providers);case"session":{let e=await a.session({options:k,sessionStore:A});return e.cookies&&P.push(...e.cookies),{...e,cookies:P}}case"csrf":return{headers:[{key:"Content-Type",value:"application/json"}],body:{csrfToken:k.csrfToken},cookies:P};case"signin":if(t.signIn){let e=`${t.signIn}${t.signIn.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(k.callbackUrl)}`;return E&&(e=`${e}&error=${encodeURIComponent(E)}`),{redirect:e,cookies:P}}return e.signin();case"signout":if(t.signOut)return{redirect:t.signOut,cookies:P};return e.signout();case"callback":if(k.provider){let e=await a.callback({body:g.body,query:g.query,headers:g.headers,cookies:g.cookies,method:S,options:k,sessionStore:A});return e.cookies&&P.push(...e.cookies),{...e,cookies:P}}break;case"verify-request":if(t.verifyRequest)return{redirect:t.verifyRequest,cookies:P};return e.verifyRequest();case"error":if(["Signin","OAuthSignin","OAuthCallback","OAuthCreateAccount","EmailCreateAccount","Callback","OAuthAccountNotLinked","EmailSignin","CredentialsSignin","SessionRequired"].includes(E))return{redirect:`${k.url}/signin?error=${E}`,cookies:P};if(t.error)return{redirect:`${t.error}${t.error.includes("?")?"&":"?"}error=${E}`,cookies:P};return e.error({error:E})}}else if("POST"===S)switch(w){case"signin":if(k.csrfTokenVerified&&k.provider){let e=await a.signin({query:g.query,body:g.body,options:k});return e.cookies&&P.push(...e.cookies),{...e,cookies:P}}return{redirect:`${k.url}/signin?csrf=true`,cookies:P};case"signout":if(k.csrfTokenVerified){let e=await a.signout({options:k,sessionStore:A});return e.cookies&&P.push(...e.cookies),{...e,cookies:P}}return{redirect:`${k.url}/signout?csrf=true`,cookies:P};case"callback":if(k.provider){if("credentials"===k.provider.type&&!k.csrfTokenVerified)return{redirect:`${k.url}/signin?csrf=true`,cookies:P};let e=await a.callback({body:g.body,query:g.query,headers:g.headers,cookies:g.cookies,method:S,options:k,sessionStore:A});return e.cookies&&P.push(...e.cookies),{...e,cookies:P}}break;case"_log":if(_.logger)try{let{code:e,level:t,...r}=null!==(f=g.body)&&void 0!==f?f:{};i.default[t](e,r)}catch(e){i.default.error("LOGGER_ERROR",e)}return{};case"session":if(k.csrfTokenVerified){let e=await a.session({options:k,sessionStore:A,newSession:null===(h=g.body)||void 0===h?void 0:h.data,isUpdate:!0});return e.cookies&&P.push(...e.cookies),{...e,cookies:P}}return{status:400,body:{},cookies:P}}return{status:400,body:`Error: This action with HTTP ${S} is not supported by NextAuth.js`}}},83629:(e,t,r)=>{"use strict";var n=r(1258);Object.defineProperty(t,"__esModule",{value:!0}),t.init=m;var i=r(6113),o=n(r(83633)),a=r(35796),s=n(r(76692)),l=r(17329),c=_(r(70553)),u=_(r(97986)),d=r(93257),p=r(43135),f=r(38614),h=n(r(68869));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}async function m({authOptions:e,providerId:t,action:r,origin:n,cookies:y,callbackUrl:_,csrfToken:m,isPost:g}){var v,w;let b=(0,h.default)(n),E=(0,l.createSecret)({authOptions:e,url:b}),{providers:S,provider:k}=(0,s.default)({providers:e.providers,url:b,providerId:t}),P={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...e,url:b,action:r,provider:k,cookies:{...c.defaultCookies(null!==(v=e.useSecureCookies)&&void 0!==v?v:b.base.startsWith("https://")),...e.cookies},secret:E,providers:S,session:{strategy:e.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>{var e;return null!==(e=null===i.randomUUID||void 0===i.randomUUID?void 0:(0,i.randomUUID)())&&void 0!==e?e:(0,i.randomBytes)(32).toString("hex")},...e.session},jwt:{secret:E,maxAge:2592e3,encode:u.encode,decode:u.decode,...e.jwt},events:(0,a.eventsErrorHandler)(null!==(w=e.events)&&void 0!==w?w:{},o.default),adapter:(0,a.adapterErrorHandler)(e.adapter,o.default),callbacks:{...d.defaultCallbacks,...e.callbacks},logger:o.default,callbackUrl:b.origin},A=[],{csrfToken:O,cookie:T,csrfTokenVerified:I}=(0,p.createCSRFToken)({options:P,cookieValue:null==y?void 0:y[P.cookies.csrfToken.name],isPost:g,bodyValue:m});P.csrfToken=O,P.csrfTokenVerified=I,T&&A.push({name:P.cookies.csrfToken.name,value:T,options:P.cookies.csrfToken.options});let{callbackUrl:x,callbackUrlCookie:C}=await (0,f.createCallbackUrl)({options:P,cookieValue:null==y?void 0:y[P.cookies.callbackUrl.name],paramValue:_});return P.callbackUrl=x,C&&A.push({name:P.cookies.callbackUrl.name,value:C,options:P.cookies.callbackUrl.options}),{options:P,cookies:A}}},55760:(e,t,r)=>{"use strict";var n=r(1258);Object.defineProperty(t,"__esModule",{value:!0}),t.assertConfig=function(e){var t,r,n,c,u,d,p,f;let h,y,_;let{options:m,req:g}=e,v=[];if(!s&&(g.origin||v.push("NEXTAUTH_URL"),m.secret,m.debug&&v.push("DEBUG_ENABLED")),!m.secret)return new i.MissingSecret("Please define a `secret` in production.");if(!(null!==(t=g.query)&&void 0!==t&&t.nextauth)&&!g.action)return new i.MissingAPIRoute("Cannot find [...nextauth].{js,ts} in `/pages/api/auth`. Make sure the filename is written correctly.");let w=null===(r=g.query)||void 0===r?void 0:r.callbackUrl,b=(0,o.default)(g.origin);if(w&&!l(w,b.base))return new i.InvalidCallbackUrl(`Invalid callback URL. Received: ${w}`);let{callbackUrl:E}=(0,a.defaultCookies)(null!==(n=m.useSecureCookies)&&void 0!==n?n:b.base.startsWith("https://")),S=null===(c=g.cookies)||void 0===c?void 0:c[null!==(u=null===(d=m.cookies)||void 0===d?void 0:null===(p=d.callbackUrl)||void 0===p?void 0:p.name)&&void 0!==u?u:E.name];if(S&&!l(S,b.base))return new i.InvalidCallbackUrl(`Invalid callback URL. Received: ${S}`);for(let e of m.providers)"credentials"===e.type?h=!0:"email"===e.type?y=!0:"twitter"===e.id&&"2.0"===e.version&&(_=!0);if(h){let e=(null===(f=m.session)||void 0===f?void 0:f.strategy)==="database",t=!m.providers.some(e=>"credentials"!==e.type);if(e&&t)return new i.UnsupportedStrategy("Signin in with credentials only supported if JWT strategy is enabled");if(m.providers.some(e=>"credentials"===e.type&&!e.authorize))return new i.MissingAuthorize("Must define an authorize() handler to use credentials authentication provider")}if(y){let{adapter:e}=m;if(!e)return new i.MissingAdapter("E-mail login requires an adapter.");let t=["createVerificationToken","useVerificationToken","getUserByEmail"].filter(t=>!e[t]);if(t.length)return new i.MissingAdapterMethods(`Required adapter methods were missing: ${t.join(", ")}`)}return s||(_&&v.push("TWITTER_OAUTH_2_BETA"),s=!0),v};var i=r(35796),o=n(r(68869)),a=r(70553);let s=!1;function l(e,t){try{return/^https?:/.test(new URL(e,e.startsWith("/")?t:void 0).protocol)}catch(e){return!1}}},34862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=r(35796),i=r(17329);async function o(e){var t,r,o,a,s,l;let{sessionToken:c,profile:u,account:d,options:p}=e;if(!(null!=d&&d.providerAccountId)||!d.type)throw Error("Missing or invalid provider account");if(!["email","oauth"].includes(d.type))throw Error("Provider not supported");let{adapter:f,jwt:h,events:y,session:{strategy:_,generateSessionToken:m}}=p;if(!f)return{user:u,account:d};let{createUser:g,updateUser:v,getUser:w,getUserByAccount:b,getUserByEmail:E,linkAccount:S,createSession:k,getSessionAndUser:P,deleteSession:A}=f,O=null,T=null,I=!1,x="jwt"===_;if(c){if(x)try{(O=await h.decode({...h,token:c}))&&"sub"in O&&O.sub&&(T=await w(O.sub))}catch(e){}else{let e=await P(c);e&&(O=e.session,T=e.user)}}if("email"===d.type){let e=await E(u.email);if(e)(null===(t=T)||void 0===t?void 0:t.id)!==e.id&&!x&&c&&await A(c),T=await v({id:e.id,emailVerified:new Date}),await (null===(r=y.updateUser)||void 0===r?void 0:r.call(y,{user:T}));else{let{id:e,...t}={...u,emailVerified:new Date};T=await g(t),await (null===(o=y.createUser)||void 0===o?void 0:o.call(y,{user:T})),I=!0}return{session:O=x?{}:await k({sessionToken:await m(),userId:T.id,expires:(0,i.fromDate)(p.session.maxAge)}),user:T,isNewUser:I}}if("oauth"===d.type){let e=await b({providerAccountId:d.providerAccountId,provider:d.provider});if(e){if(T){if(e.id===T.id)return{session:O,user:T,isNewUser:I};throw new n.AccountNotLinkedError("The account is already associated with another user")}return{session:O=x?{}:await k({sessionToken:await m(),userId:e.id,expires:(0,i.fromDate)(p.session.maxAge)}),user:e,isNewUser:I}}{if(T)return await S({...d,userId:T.id}),await (null===(l=y.linkAccount)||void 0===l?void 0:l.call(y,{user:T,account:d,profile:u})),{session:O,user:T,isNewUser:I};let e=u.email?await E(u.email):null;if(e){let t=p.provider;if(null!=t&&t.allowDangerousEmailAccountLinking)T=e;else throw new n.AccountNotLinkedError("Another account already exists with the same e-mail address")}else{let{id:e,...t}={...u,emailVerified:null};T=await g(t)}return await (null===(a=y.createUser)||void 0===a?void 0:a.call(y,{user:T})),await S({...d,userId:T.id}),await (null===(s=y.linkAccount)||void 0===s?void 0:s.call(y,{user:T,account:d,profile:u})),{session:O=x?{}:await k({sessionToken:await m(),userId:T.id,expires:(0,i.fromDate)(p.session.maxAge)}),user:T,isNewUser:!0}}}throw Error("Unsupported account type")}},38614:(e,t)=>{"use strict";async function r({options:e,paramValue:t,cookieValue:r}){let{url:n,callbacks:i}=e,o=n.origin;return t?o=await i.redirect({url:t,baseUrl:n.origin}):r&&(o=await i.redirect({url:r,baseUrl:n.origin})),{callbackUrl:o,callbackUrlCookie:o!==r?o:void 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.createCallbackUrl=r},70553:(e,t,r)=>{"use strict";var n=r(1258);Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStore=void 0,t.defaultCookies=function(e){let t=e?"__Secure-":"";return{sessionToken:{name:`${t}next-auth.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},callbackUrl:{name:`${t}next-auth.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},csrfToken:{name:`${e?"__Host-":""}next-auth.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},pkceCodeVerifier:{name:`${t}next-auth.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},state:{name:`${t}next-auth.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},nonce:{name:`${t}next-auth.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}}}};var i=n(r(52674)),o=n(r(94874));function a(e,t){l(e,t),t.add(e)}function s(e,t,r){l(e,t),t.set(e,r)}function l(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,r){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return r}var u=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakSet,h=new WeakSet;class y{constructor(e,t,r){a(this,h),a(this,f),s(this,u,{writable:!0,value:{}}),s(this,d,{writable:!0,value:void 0}),s(this,p,{writable:!0,value:void 0}),(0,o.default)(this,p,r),(0,o.default)(this,d,e);let{cookies:n}=t,{name:l}=e;if("function"==typeof(null==n?void 0:n.getAll))for(let{name:e,value:t}of n.getAll())e.startsWith(l)&&((0,i.default)(this,u)[e]=t);else if(n instanceof Map)for(let e of n.keys())e.startsWith(l)&&((0,i.default)(this,u)[e]=n.get(e));else for(let e in n)e.startsWith(l)&&((0,i.default)(this,u)[e]=n[e])}get value(){return Object.keys((0,i.default)(this,u)).sort((e,t)=>{var r,n;return parseInt(null!==(r=e.split(".").pop())&&void 0!==r?r:"0")-parseInt(null!==(n=t.split(".").pop())&&void 0!==n?n:"0")}).map(e=>(0,i.default)(this,u)[e]).join("")}chunk(e,t){let r=c(this,h,m).call(this);for(let n of c(this,f,_).call(this,{name:(0,i.default)(this,d).name,value:e,options:{...(0,i.default)(this,d).options,...t}}))r[n.name]=n;return Object.values(r)}clean(){return Object.values(c(this,h,m).call(this))}}function _(e){let t=Math.ceil(e.value.length/3933);if(1===t)return(0,i.default)(this,u)[e.name]=e.value,[e];let r=[];for(let n=0;n<t;n++){let t=`${e.name}.${n}`,o=e.value.substr(3933*n,3933);r.push({...e,name:t,value:o}),(0,i.default)(this,u)[t]=o}return(0,i.default)(this,p).debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:163,valueSize:e.value.length,chunks:r.map(e=>e.value.length+163)}),r}function m(){let e={};for(let r in(0,i.default)(this,u)){var t;null===(t=(0,i.default)(this,u))||void 0===t||delete t[r],e[r]={name:r,value:"",options:{...(0,i.default)(this,d).options,maxAge:0}}}return e}t.SessionStore=y},43135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCSRFToken=function({options:e,cookieValue:t,isPost:r,bodyValue:i}){if(t){let[o,a]=t.split("|");if(a===(0,n.createHash)("sha256").update(`${o}${e.secret}`).digest("hex"))return{csrfTokenVerified:r&&o===i,csrfToken:o}}let o=(0,n.randomBytes)(32).toString("hex"),a=(0,n.createHash)("sha256").update(`${o}${e.secret}`).digest("hex");return{cookie:`${o}|${a}`,csrfToken:o}};var n=r(6113)},93257:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCallbacks=void 0,t.defaultCallbacks={signIn:()=>!0,redirect:({url:e,baseUrl:t})=>e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t,session:({session:e})=>e,jwt:({token:e})=>e}},76530:(e,t)=>{"use strict";async function r({email:e,adapter:t}){let{getUserByEmail:r}=t;return(e?await r(e):null)||{id:e,email:e,emailVerified:null}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},66673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=r(6113),i=r(17329);async function o(e,t){var r,o,a,s;let{url:l,adapter:c,provider:u,callbackUrl:d,theme:p}=t,f=null!==(r=await (null===(o=u.generateVerificationToken)||void 0===o?void 0:o.call(u)))&&void 0!==r?r:(0,n.randomBytes)(32).toString("hex"),h=new Date(Date.now()+(null!==(a=u.maxAge)&&void 0!==a?a:86400)*1e3),y=new URLSearchParams({callbackUrl:d,token:f,email:e}),_=`${l}/callback/${u.id}?${y}`;return await Promise.all([u.sendVerificationRequest({identifier:e,token:f,expires:h,url:_,provider:u,theme:p}),null===(s=c.createVerificationToken)||void 0===s?void 0:s.call(c,{identifier:e,token:(0,i.hashToken)(f,t),expires:h})]),`${l}/verify-request?${new URLSearchParams({provider:u.id,type:u.type})}`}},75989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=r(41195),i=r(27406),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(29040));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}async function s({options:e,query:t}){var r,a,s;let{logger:l,provider:c}=e,u={};if("string"==typeof c.authorization){let e=Object.fromEntries(new URL(c.authorization).searchParams);u={...u,...e}}else u={...u,...null===(a=c.authorization)||void 0===a?void 0:a.params};if(u={...u,...t},null!==(r=c.version)&&void 0!==r&&r.startsWith("1.")){let t=(0,i.oAuth1Client)(e),r=await t.getOAuthRequestToken(u),n=`${null===(s=c.authorization)||void 0===s?void 0:s.url}?${new URLSearchParams({oauth_token:r.oauth_token,oauth_token_secret:r.oauth_token_secret,...r.params})}`;return i.oAuth1TokenStore.set(r.oauth_token,r.oauth_token_secret),l.debug("GET_AUTHORIZATION_URL",{url:n,provider:c}),{redirect:n}}let d=await (0,n.openidClient)(e),p=u,f=[];await o.state.create(e,f,p),await o.pkce.create(e,f,p),await o.nonce.create(e,f,p);let h=d.authorizationUrl(p);return l.debug("GET_AUTHORIZATION_URL",{url:h,cookies:f,provider:c}),{redirect:h,cookies:f}}},16910:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var n=r(48838),i=r(41195),o=r(27406),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(29040)),s=r(35796);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}async function c(e){var t,r,l,c,d,p;let{options:f,query:h,body:y,method:_,cookies:m}=e,{logger:g,provider:v}=f,w=null!==(t=null==y?void 0:y.error)&&void 0!==t?t:null==h?void 0:h.error;if(w){let e=Error(w);throw g.error("OAUTH_CALLBACK_HANDLER_ERROR",{error:e,error_description:null==h?void 0:h.error_description,providerId:v.id}),g.debug("OAUTH_CALLBACK_HANDLER_ERROR",{body:y}),e}if(null!==(r=v.version)&&void 0!==r&&r.startsWith("1."))try{let e=await (0,o.oAuth1Client)(f),{oauth_token:t,oauth_verifier:r}=null!=h?h:{},n=await e.getOAuthAccessToken(t,o.oAuth1TokenStore.get(t),r),i=await e.get(v.profileUrl,n.oauth_token,n.oauth_token_secret);return"string"==typeof i&&(i=JSON.parse(i)),{...await u({profile:i,tokens:n,provider:v,logger:g}),cookies:[]}}catch(e){throw g.error("OAUTH_V1_GET_ACCESS_TOKEN_ERROR",e),e}null!=h&&h.oauth_token&&o.oAuth1TokenStore.delete(h.oauth_token);try{let e,t;let r=await (0,i.openidClient)(f),o={},s=[];await a.state.use(m,s,f,o),await a.pkce.use(m,s,f,o),await a.nonce.use(m,s,f,o);let w={...r.callbackParams({url:`http://n?${new URLSearchParams(h)}`,body:y,method:_}),...null===(l=v.token)||void 0===l?void 0:l.params};if(null!==(c=v.token)&&void 0!==c&&c.request){let t=await v.token.request({provider:v,params:w,checks:o,client:r});e=new n.TokenSet(t.tokens)}else e=v.idToken?await r.callback(v.callbackUrl,w,o):await r.oauthCallback(v.callbackUrl,w,o);return Array.isArray(e.scope)&&(e.scope=e.scope.join(" ")),t=null!==(d=v.userinfo)&&void 0!==d&&d.request?await v.userinfo.request({provider:v,tokens:e,client:r}):v.idToken?e.claims():await r.userinfo(e,{params:null===(p=v.userinfo)||void 0===p?void 0:p.params}),{...await u({profile:t,provider:v,tokens:e,logger:g}),cookies:s}}catch(e){throw new s.OAuthCallbackError(e)}}async function u({profile:e,tokens:t,provider:r,logger:n}){try{var i;n.debug("PROFILE_DATA",{OAuthProfile:e});let o=await r.profile(e,t);if(o.email=null===(i=o.email)||void 0===i?void 0:i.toLowerCase(),!o.id)throw TypeError(`Profile id is missing in ${r.name} OAuth profile response`);return{profile:o,account:{provider:r.id,type:r.type,providerAccountId:o.id.toString(),...t},OAuthProfile:e}}catch(t){n.error("OAUTH_PARSE_PROFILE_ERROR",{error:t,OAuthProfile:e})}}},29040:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pkce=t.nonce=t.PKCE_CODE_CHALLENGE_METHOD=void 0,t.signCookie=a,t.state=void 0;var n=r(48838),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(97986));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}async function a(e,t,r,n){let{cookies:o,logger:a}=n;a.debug(`CREATE_${e.toUpperCase()}`,{value:t,maxAge:r});let{name:s}=o[e],l=new Date;return l.setTime(l.getTime()+1e3*r),{name:s,value:await i.encode({...n.jwt,maxAge:r,token:{value:t},salt:s}),options:{...o[e].options,expires:l}}}let s="S256";t.PKCE_CODE_CHALLENGE_METHOD=s,t.pkce={async create(e,t,r){var i,o,l;if(!(null!==(i=e.provider)&&void 0!==i&&null!==(o=i.checks)&&void 0!==o&&o.includes("pkce")))return;let c=n.generators.codeVerifier(),u=n.generators.codeChallenge(c);r.code_challenge=u,r.code_challenge_method=s;let d=null!==(l=e.cookies.pkceCodeVerifier.options.maxAge)&&void 0!==l?l:900;t.push(await a("pkceCodeVerifier",c,d,e))},async use(e,t,r,n){var o,a;if(!(null!==(o=r.provider)&&void 0!==o&&null!==(a=o.checks)&&void 0!==a&&a.includes("pkce")))return;let s=null==e?void 0:e[r.cookies.pkceCodeVerifier.name];if(!s)throw TypeError("PKCE code_verifier cookie was missing.");let{name:l}=r.cookies.pkceCodeVerifier,c=await i.decode({...r.jwt,token:s,salt:l});if(!(null!=c&&c.value))throw TypeError("PKCE code_verifier value could not be parsed.");t.push({name:l,value:"",options:{...r.cookies.pkceCodeVerifier.options,maxAge:0}}),n.code_verifier=c.value}},t.state={async create(e,t,r){var i,o;if(!(null!==(i=e.provider.checks)&&void 0!==i&&i.includes("state")))return;let s=n.generators.state();r.state=s;let l=null!==(o=e.cookies.state.options.maxAge)&&void 0!==o?o:900;t.push(await a("state",s,l,e))},async use(e,t,r,n){var o;if(!(null!==(o=r.provider.checks)&&void 0!==o&&o.includes("state")))return;let a=null==e?void 0:e[r.cookies.state.name];if(!a)throw TypeError("State cookie was missing.");let{name:s}=r.cookies.state,l=await i.decode({...r.jwt,token:a,salt:s});if(!(null!=l&&l.value))throw TypeError("State value could not be parsed.");t.push({name:s,value:"",options:{...r.cookies.state.options,maxAge:0}}),n.state=l.value}},t.nonce={async create(e,t,r){var i,o;if(!(null!==(i=e.provider.checks)&&void 0!==i&&i.includes("nonce")))return;let s=n.generators.nonce();r.nonce=s;let l=null!==(o=e.cookies.nonce.options.maxAge)&&void 0!==o?o:900;t.push(await a("nonce",s,l,e))},async use(e,t,r,n){var o,a;if(!(null!==(o=r.provider)&&void 0!==o&&null!==(a=o.checks)&&void 0!==a&&a.includes("nonce")))return;let s=null==e?void 0:e[r.cookies.nonce.name];if(!s)throw TypeError("Nonce cookie was missing.");let{name:l}=r.cookies.nonce,c=await i.decode({...r.jwt,token:s,salt:l});if(!(null!=c&&c.value))throw TypeError("Nonce value could not be parsed.");t.push({name:l,value:"",options:{...r.cookies.nonce.options,maxAge:0}}),n.nonce=c.value}}},27406:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oAuth1Client=function(e){var t,r;let i=e.provider,o=new n.OAuth(i.requestTokenUrl,i.accessTokenUrl,i.clientId,i.clientSecret,null!==(t=i.version)&&void 0!==t?t:"1.0",i.callbackUrl,null!==(r=i.encoding)&&void 0!==r?r:"HMAC-SHA1"),a=o.get.bind(o);o.get=async(...e)=>await new Promise((t,r)=>{a(...e,(e,n)=>{if(e)return r(e);t(n)})});let s=o.getOAuthAccessToken.bind(o);o.getOAuthAccessToken=async(...e)=>await new Promise((t,r)=>{s(...e,(e,n,i)=>{if(e)return r(e);t({oauth_token:n,oauth_token_secret:i})})});let l=o.getOAuthRequestToken.bind(o);return o.getOAuthRequestToken=async(e={})=>await new Promise((t,r)=>{l(e,(e,n,i,o)=>{if(e)return r(e);t({oauth_token:n,oauth_token_secret:i,params:o})})}),o},t.oAuth1TokenStore=void 0;var n=r(54465);let i=new Map;t.oAuth1TokenStore=i},41195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openidClient=i;var n=r(48838);async function i(e){let t;let r=e.provider;if(r.httpOptions&&n.custom.setHttpOptionsDefaults(r.httpOptions),r.wellKnown)t=await n.Issuer.discover(r.wellKnown);else{var i,o,a;t=new n.Issuer({issuer:r.issuer,authorization_endpoint:null===(i=r.authorization)||void 0===i?void 0:i.url,token_endpoint:null===(o=r.token)||void 0===o?void 0:o.url,userinfo_endpoint:null===(a=r.userinfo)||void 0===a?void 0:a.url,jwks_uri:r.jwks_endpoint})}let s=new t.Client({client_id:r.clientId,client_secret:r.clientSecret,redirect_uris:[r.callbackUrl],...r.client},r.jwks);return s[n.custom.clock_tolerance]=10,s}},76692:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{url:t,providerId:r}=e,o=e.providers.map(({options:e,...r})=>{var o,a;if("oauth"===r.type){let o=i(r),s=i(e,!0),l=null!==(a=null==s?void 0:s.id)&&void 0!==a?a:r.id;return(0,n.merge)(o,{...s,signinUrl:`${t}/signin/${l}`,callbackUrl:`${t}/callback/${l}`})}let s=null!==(o=null==e?void 0:e.id)&&void 0!==o?o:r.id;return(0,n.merge)(r,{...e,signinUrl:`${t}/signin/${s}`,callbackUrl:`${t}/callback/${s}`})});return{providers:o,provider:o.find(({id:e})=>e===r)}};var n=r(35396);function i(e,t=!1){var r,n,i,o,a,s,l;if(!e)return;let c=Object.entries(e).reduce((e,[t,r])=>{if(["authorization","token","userinfo"].includes(t)&&"string"==typeof r){var n;let i=new URL(r);e[t]={url:`${i.origin}${i.pathname}`,params:Object.fromEntries(null!==(n=i.searchParams)&&void 0!==n?n:[])}}else e[t]=r;return e},{});return t||null!==(r=c.version)&&void 0!==r&&r.startsWith("1.")||(c.idToken=!!(null!==(n=null!==(i=c.idToken)&&void 0!==i?i:null===(o=c.wellKnown)||void 0===o?void 0:o.includes("openid-configuration"))&&void 0!==n?n:null===(a=c.authorization)||void 0===a?void 0:null===(s=a.params)||void 0===s?void 0:null===(l=s.scope)||void 0===l?void 0:l.includes("openid")),c.checks||(c.checks=["state"])),c}},17329:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSecret=function(e){var t;let{authOptions:r,url:i}=e;return null!==(t=r.secret)&&void 0!==t?t:(0,n.createHash)("sha256").update(JSON.stringify({...i,...r})).digest("hex")},t.fromDate=function(e,t=Date.now()){return new Date(t+1e3*e)},t.hashToken=function(e,t){var r;let{provider:i,secret:o}=t;return(0,n.createHash)("sha256").update(`${e}${null!==(r=i.secret)&&void 0!==r?r:o}`).digest("hex")};var n=r(6113)},85029:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{url:r,error:i="default",theme:o}=e,a=`${r}/signin`,s={default:{status:200,heading:"Error",message:(0,n.h)("p",null,(0,n.h)("a",{className:"site",href:null==r?void 0:r.origin},null==r?void 0:r.host))},configuration:{status:500,heading:"Server error",message:(0,n.h)("div",null,(0,n.h)("p",null,"There is a problem with the server configuration."),(0,n.h)("p",null,"Check the server logs for more information."))},accessdenied:{status:403,heading:"Access Denied",message:(0,n.h)("div",null,(0,n.h)("p",null,"You do not have permission to sign in."),(0,n.h)("p",null,(0,n.h)("a",{className:"button",href:a},"Sign in")))},verification:{status:403,heading:"Unable to sign in",message:(0,n.h)("div",null,(0,n.h)("p",null,"The sign in link is no longer valid."),(0,n.h)("p",null,"It may have been used already or it may have expired.")),signin:(0,n.h)("a",{className:"button",href:a},"Sign in")}},{status:l,heading:c,message:u,signin:d}=null!==(t=s[i.toLowerCase()])&&void 0!==t?t:s.default;return{status:l,html:(0,n.h)("div",{className:"error"},(null==o?void 0:o.brandColor)&&(0,n.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${null==o?void 0:o.brandColor}
        }
      `}}),(0,n.h)("div",{className:"card"},(null==o?void 0:o.logo)&&(0,n.h)("img",{src:o.logo,alt:"Logo",className:"logo"}),(0,n.h)("h1",null,c),(0,n.h)("div",{className:"message"},u),d))}};var n=r(19425)},96145:(e,t,r)=>{"use strict";var n=r(1258);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{url:t,theme:r,query:n,cookies:u}=e;function d({html:e,title:t,status:n}){var o;return{cookies:u,status:n,headers:[{key:"Content-Type",value:"text/html"}],body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${(0,c.default)()}</style><title>${t}</title></head><body class="__next-auth-theme-${null!==(o=null==r?void 0:r.colorScheme)&&void 0!==o?o:"auto"}"><div class="page">${(0,i.default)(e)}</div></body></html>`}}return{signin:t=>d({html:(0,o.default)({csrfToken:e.csrfToken,providers:e.providers,callbackUrl:e.callbackUrl,theme:r,...n,...t}),title:"Sign In"}),signout:n=>d({html:(0,a.default)({csrfToken:e.csrfToken,url:t,theme:r,...n}),title:"Sign Out"}),verifyRequest:e=>d({html:(0,s.default)({url:t,theme:r,...e}),title:"Verify Request"}),error:e=>d({...(0,l.default)({url:t,theme:r,...e}),title:"Error"})}};var i=n(r(30401)),o=n(r(78818)),a=n(r(82226)),s=n(r(34069)),l=n(r(85029)),c=n(r(3005))},78818:(e,t,r)=>{"use strict";var n=r(1258);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let{csrfToken:r,providers:n,callbackUrl:s,theme:l,email:c,error:u}=e,d=n.filter(e=>"oauth"===e.type||"email"===e.type||"credentials"===e.type&&!!e.credentials);"undefined"!=typeof document&&l.buttonText&&document.documentElement.style.setProperty("--button-text-color",l.buttonText),"undefined"!=typeof document&&l.brandColor&&document.documentElement.style.setProperty("--brand-color",l.brandColor);let p={Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallback:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page.",default:"Unable to sign in."},f=u&&(null!==(t=p[u])&&void 0!==t?t:p.default),h="https://authjs.dev/img/providers";return(0,i.h)("div",{className:"signin"},l.brandColor&&(0,i.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${l.brandColor}
        }
      `}}),l.buttonText&&(0,i.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${l.buttonText}
        }
      `}}),(0,i.h)("div",{className:"card"},l.logo&&(0,i.h)("img",{src:l.logo,alt:"Logo",className:"logo"}),f&&(0,i.h)("div",{className:"error"},(0,i.h)("p",null,f)),d.map((e,t)=>{let n,l,u,p,f,y;if("oauth"===e.type){var _;({bg:n="",text:l="",logo:u="",bgDark:f=n,textDark:y=l,logoDark:p=""}=null!==(_=e.style)&&void 0!==_?_:{}),u=u.startsWith("/")?`${h}${u}`:u,(p=p.startsWith("/")?`${h}${p}`:p||u)||(p=u)}return(0,i.h)("div",{key:e.id,className:"provider"},"oauth"===e.type&&(0,i.h)("form",{action:e.signinUrl,method:"POST"},(0,i.h)("input",{type:"hidden",name:"csrfToken",value:r}),s&&(0,i.h)("input",{type:"hidden",name:"callbackUrl",value:s}),(0,i.h)("button",{type:"submit",className:"button",style:{"--provider-bg":n,"--provider-dark-bg":f,"--provider-color":l,"--provider-dark-color":y,"--provider-bg-hover":a(n,.8),"--provider-dark-bg-hover":a(f,.8)}},u&&(0,i.h)("img",{loading:"lazy",height:24,width:24,id:"provider-logo",src:`${u.startsWith("/")?h:""}${u}`}),p&&(0,i.h)("img",{loading:"lazy",height:24,width:24,id:"provider-logo-dark",src:`${u.startsWith("/")?h:""}${p}`}),(0,i.h)("span",null,"Sign in with ",e.name))),("email"===e.type||"credentials"===e.type)&&t>0&&"email"!==d[t-1].type&&"credentials"!==d[t-1].type&&(0,i.h)("hr",null),"email"===e.type&&(0,i.h)("form",{action:e.signinUrl,method:"POST"},(0,i.h)("input",{type:"hidden",name:"csrfToken",value:r}),(0,i.h)("label",{className:"section-header",htmlFor:`input-email-for-${e.id}-provider`},"Email"),(0,i.h)("input",{id:`input-email-for-${e.id}-provider`,autoFocus:!0,type:"email",name:"email",value:c,placeholder:"email@example.com",required:!0}),(0,i.h)("button",{id:"submitButton",type:"submit"},"Sign in with ",e.name)),"credentials"===e.type&&(0,i.h)("form",{action:e.callbackUrl,method:"POST"},(0,i.h)("input",{type:"hidden",name:"csrfToken",value:r}),Object.keys(e.credentials).map(t=>{var r,n,a;return(0,i.h)("div",{key:`input-group-${e.id}`},(0,i.h)("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`},null!==(r=e.credentials[t].label)&&void 0!==r?r:t),(0,i.h)("input",(0,o.default)({name:t,id:`input-${t}-for-${e.id}-provider`,type:null!==(n=e.credentials[t].type)&&void 0!==n?n:"text",placeholder:null!==(a=e.credentials[t].placeholder)&&void 0!==a?a:""},e.credentials[t])))}),(0,i.h)("button",{type:"submit"},"Sign in with ",e.name)),("email"===e.type||"credentials"===e.type)&&t+1<d.length&&(0,i.h)("hr",null))})))};var i=r(19425),o=n(r(80905));function a(e,t=1){if(!e)return;3===(e=e.replace(/^#/,"")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);let r=parseInt(e,16);return t=Math.min(Math.max(t,0),1),`rgba(${r>>16&255}, ${r>>8&255}, ${255&r}, ${t})`}},82226:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{url:t,csrfToken:r,theme:i}=e;return(0,n.h)("div",{className:"signout"},i.brandColor&&(0,n.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${i.brandColor}
        }
      `}}),i.buttonText&&(0,n.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${i.buttonText}
        }
      `}}),(0,n.h)("div",{className:"card"},i.logo&&(0,n.h)("img",{src:i.logo,alt:"Logo",className:"logo"}),(0,n.h)("h1",null,"Signout"),(0,n.h)("p",null,"Are you sure you want to sign out?"),(0,n.h)("form",{action:`${t}/signout`,method:"POST"},(0,n.h)("input",{type:"hidden",name:"csrfToken",value:r}),(0,n.h)("button",{id:"submitButton",type:"submit"},"Sign out"))))};var n=r(19425)},34069:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{url:t,theme:r}=e;return(0,n.h)("div",{className:"verify-request"},r.brandColor&&(0,n.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${r.brandColor}
        }
      `}}),(0,n.h)("div",{className:"card"},r.logo&&(0,n.h)("img",{src:r.logo,alt:"Logo",className:"logo"}),(0,n.h)("h1",null,"Check your email"),(0,n.h)("p",null,"A sign in link has been sent to your email address."),(0,n.h)("p",null,(0,n.h)("a",{className:"site",href:t.origin},t.host))))};var n=r(19425)},28170:(e,t,r)=>{"use strict";var n=r(1258);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var i=n(r(16910)),o=n(r(34862)),a=r(17329),s=n(r(76530));async function l(e){var t,r,n,l,c,u;let{options:d,query:p,body:f,method:h,headers:y,sessionStore:_}=e,{provider:m,adapter:g,url:v,callbackUrl:w,pages:b,jwt:E,events:S,callbacks:k,session:{strategy:P,maxAge:A},logger:O}=d,T=[],I="jwt"===P;if("oauth"===m.type)try{let{profile:n,account:a,OAuthProfile:s,cookies:l}=await (0,i.default)({query:p,body:f,method:h,options:d,cookies:e.cookies});l.length&&T.push(...l);try{if(O.debug("OAUTH_CALLBACK_RESPONSE",{profile:n,account:a,OAuthProfile:s}),!n||!a||!s)return{redirect:`${v}/signin`,cookies:T};let e=n;if(g){let{getUserByAccount:t}=g,r=await t({providerAccountId:a.providerAccountId,provider:m.id});r&&(e=r)}try{let t=await k.signIn({user:e,account:a,profile:s});if(!t)return{redirect:`${v}/error?error=AccessDenied`,cookies:T};if("string"==typeof t)return{redirect:t,cookies:T}}catch(e){return{redirect:`${v}/error?error=${encodeURIComponent(e.message)}`,cookies:T}}let{user:i,session:l,isNewUser:c}=await (0,o.default)({sessionToken:_.value,profile:n,account:a,options:d});if(I){let e={name:i.name,email:i.email,picture:i.image,sub:null===(r=i.id)||void 0===r?void 0:r.toString()},t=await k.jwt({token:e,user:i,account:a,profile:s,isNewUser:c,trigger:c?"signUp":"signIn"}),n=await E.encode({...E,token:t}),o=new Date;o.setTime(o.getTime()+1e3*A);let l=_.chunk(n,{expires:o});T.push(...l)}else T.push({name:d.cookies.sessionToken.name,value:l.sessionToken,options:{...d.cookies.sessionToken.options,expires:l.expires}});if(await (null===(t=S.signIn)||void 0===t?void 0:t.call(S,{user:i,account:a,profile:n,isNewUser:c})),c&&b.newUser)return{redirect:`${b.newUser}${b.newUser.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(w)}`,cookies:T};return{redirect:w,cookies:T}}catch(e){if("AccountNotLinkedError"===e.name)return{redirect:`${v}/error?error=OAuthAccountNotLinked`,cookies:T};if("CreateUserError"===e.name)return{redirect:`${v}/error?error=OAuthCreateAccount`,cookies:T};return O.error("OAUTH_CALLBACK_HANDLER_ERROR",e),{redirect:`${v}/error?error=Callback`,cookies:T}}}catch(e){if("OAuthCallbackError"===e.name)return O.error("OAUTH_CALLBACK_ERROR",{error:e,providerId:m.id}),{redirect:`${v}/error?error=OAuthCallback`,cookies:T};return O.error("OAUTH_CALLBACK_ERROR",e),{redirect:`${v}/error?error=Callback`,cookies:T}}else if("email"===m.type)try{let e=null==p?void 0:p.token,t=null==p?void 0:p.email;if(!e||!t)return{redirect:`${v}/error?error=configuration`,cookies:T};let r=await g.useVerificationToken({identifier:t,token:(0,a.hashToken)(e,d)});if(!r||r.expires.valueOf()<Date.now())return{redirect:`${v}/error?error=Verification`,cookies:T};let i=await (0,s.default)({email:t,adapter:g}),c={providerAccountId:i.email,type:"email",provider:m.id};try{let e=await k.signIn({user:i,account:c});if(!e)return{redirect:`${v}/error?error=AccessDenied`,cookies:T};if("string"==typeof e)return{redirect:e,cookies:T}}catch(e){return{redirect:`${v}/error?error=${encodeURIComponent(e.message)}`,cookies:T}}let{user:u,session:f,isNewUser:h}=await (0,o.default)({sessionToken:_.value,profile:i,account:c,options:d});if(I){let e={name:u.name,email:u.email,picture:u.image,sub:null===(l=u.id)||void 0===l?void 0:l.toString()},t=await k.jwt({token:e,user:u,account:c,isNewUser:h,trigger:h?"signUp":"signIn"}),r=await E.encode({...E,token:t}),n=new Date;n.setTime(n.getTime()+1e3*A);let i=_.chunk(r,{expires:n});T.push(...i)}else T.push({name:d.cookies.sessionToken.name,value:f.sessionToken,options:{...d.cookies.sessionToken.options,expires:f.expires}});if(await (null===(n=S.signIn)||void 0===n?void 0:n.call(S,{user:u,account:c,isNewUser:h})),h&&b.newUser)return{redirect:`${b.newUser}${b.newUser.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(w)}`,cookies:T};return{redirect:w,cookies:T}}catch(e){if("CreateUserError"===e.name)return{redirect:`${v}/error?error=EmailCreateAccount`,cookies:T};return O.error("CALLBACK_EMAIL_ERROR",e),{redirect:`${v}/error?error=Callback`,cookies:T}}else if("credentials"===m.type&&"POST"===h){let e;try{if(!(e=await m.authorize(f,{query:p,body:f,headers:y,method:h})))return{status:401,redirect:`${v}/error?${new URLSearchParams({error:"CredentialsSignin",provider:m.id})}`,cookies:T}}catch(e){return{status:401,redirect:`${v}/error?error=${encodeURIComponent(e.message)}`,cookies:T}}let t={providerAccountId:e.id,type:"credentials",provider:m.id};try{let r=await k.signIn({user:e,account:t,credentials:f});if(!r)return{status:403,redirect:`${v}/error?error=AccessDenied`,cookies:T};if("string"==typeof r)return{redirect:r,cookies:T}}catch(e){return{redirect:`${v}/error?error=${encodeURIComponent(e.message)}`,cookies:T}}let r={name:e.name,email:e.email,picture:e.image,sub:null===(c=e.id)||void 0===c?void 0:c.toString()},n=await k.jwt({token:r,user:e,account:t,isNewUser:!1,trigger:"signIn"}),i=await E.encode({...E,token:n}),o=new Date;o.setTime(o.getTime()+1e3*A);let a=_.chunk(i,{expires:o});return T.push(...a),await (null===(u=S.signIn)||void 0===u?void 0:u.call(S,{user:e,account:t})),{redirect:w,cookies:T}}return{status:500,body:`Error: Callback for provider type ${m.type} not supported`,cookies:T}}},35814:(e,t,r)=>{"use strict";var n=r(1258);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"callback",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"providers",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"session",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"signin",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"signout",{enumerable:!0,get:function(){return a.default}});var i=n(r(28170)),o=n(r(62639)),a=n(r(44799)),s=n(r(15103)),l=n(r(18120))},18120:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{headers:[{key:"Content-Type",value:"application/json"}],body:e.reduce((e,{id:t,name:r,type:n,signinUrl:i,callbackUrl:o})=>(e[t]={id:t,name:r,type:n,signinUrl:i,callbackUrl:o},e),{})}}},15103:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=r(17329);async function i(e){var t,r,i,o,a,s;let{options:l,sessionStore:c,newSession:u,isUpdate:d}=e,{adapter:p,jwt:f,events:h,callbacks:y,logger:_,session:{strategy:m,maxAge:g}}=l,v={body:{},headers:[{key:"Content-Type",value:"application/json"}],cookies:[]},w=c.value;if(!w)return v;if("jwt"===m)try{let e=await f.decode({...f,token:w});if(!e)throw Error("JWT invalid");let i=await y.jwt({token:e,...d&&{trigger:"update"},session:u}),o=(0,n.fromDate)(g),a=await y.session({session:{user:{name:null==e?void 0:e.name,email:null==e?void 0:e.email,image:null==e?void 0:e.picture},expires:o.toISOString()},token:i});v.body=a;let s=await f.encode({...f,token:i,maxAge:l.session.maxAge}),p=c.chunk(s,{expires:o});null===(t=v.cookies)||void 0===t||t.push(...p),await (null===(r=h.session)||void 0===r?void 0:r.call(h,{session:a,token:i}))}catch(e){_.error("JWT_SESSION_ERROR",e),null===(i=v.cookies)||void 0===i||i.push(...c.clean())}else try{let{getSessionAndUser:e,deleteSession:t,updateSession:r}=p,i=await e(w);if(i&&i.session.expires.valueOf()<Date.now()&&(await t(w),i=null),i){let{user:e,session:t}=i,s=l.session.updateAge,c=t.expires.valueOf()-1e3*g+1e3*s,p=(0,n.fromDate)(g);c<=Date.now()&&await r({sessionToken:w,expires:p});let f=await y.session({session:{user:{name:e.name,email:e.email,image:e.image},expires:t.expires.toISOString()},user:e,newSession:u,...d?{trigger:"update"}:{}});v.body=f,null===(o=v.cookies)||void 0===o||o.push({name:l.cookies.sessionToken.name,value:w,options:{...l.cookies.sessionToken.options,expires:p}}),await (null===(a=h.session)||void 0===a?void 0:a.call(h,{session:f}))}else w&&(null===(s=v.cookies)||void 0===s||s.push(...c.clean()))}catch(e){_.error("SESSION_ERROR",e)}return v}},62639:(e,t,r)=>{"use strict";var n=r(1258);Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var i=n(r(75989)),o=n(r(66673)),a=n(r(76530));async function s(e){let{options:t,query:r,body:n}=e,{url:s,callbacks:l,logger:c,provider:u}=t;if(!u.type)return{status:500,text:`Error: Type not specified for ${u.name}`};if("oauth"===u.type)try{return await (0,i.default)({options:t,query:r})}catch(e){return c.error("SIGNIN_OAUTH_ERROR",{error:e,providerId:u.id}),{redirect:`${s}/error?error=OAuthSignin`}}else if("email"===u.type){var d;let e=null==n?void 0:n.email;if(!e)return{redirect:`${s}/error?error=EmailSignin`};let r=null!==(d=u.normalizeIdentifier)&&void 0!==d?d:e=>{let[t,r]=e.toLowerCase().trim().split("@");return r=r.split(",")[0],`${t}@${r}`};try{e=r(null==n?void 0:n.email)}catch(e){return c.error("SIGNIN_EMAIL_ERROR",{error:e,providerId:u.id}),{redirect:`${s}/error?error=EmailSignin`}}let i=await (0,a.default)({email:e,adapter:t.adapter}),p={providerAccountId:e,userId:e,type:"email",provider:u.id};try{let e=await l.signIn({user:i,account:p,email:{verificationRequest:!0}});if(!e)return{redirect:`${s}/error?error=AccessDenied`};if("string"==typeof e)return{redirect:e}}catch(e){return{redirect:`${s}/error?${new URLSearchParams({error:e})}`}}try{return{redirect:await (0,o.default)(e,t)}}catch(e){return c.error("SIGNIN_EMAIL_ERROR",{error:e,providerId:u.id}),{redirect:`${s}/error?error=EmailSignin`}}}return{redirect:`${s}/signin`}}},44799:(e,t)=>{"use strict";async function r(e){var t,r;let{options:n,sessionStore:i}=e,{adapter:o,events:a,jwt:s,callbackUrl:l,logger:c,session:u}=n,d=null==i?void 0:i.value;if(!d)return{redirect:l};if("jwt"===u.strategy)try{let e=await s.decode({...s,token:d});await (null===(t=a.signOut)||void 0===t?void 0:t.call(a,{token:e}))}catch(e){c.error("SIGNOUT_ERROR",e)}else try{let e=await o.deleteSession(d);await (null===(r=a.signOut)||void 0===r?void 0:r.call(a,{session:e}))}catch(e){c.error("SIGNOUT_ERROR",e)}return{redirect:l,cookies:i.clean()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},39189:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3005:e=>{e.exports=function(){return':root{--border-width:1px;--border-radius:0.5rem;--color-error:#c94b4b;--color-info:#157efb;--color-info-hover:#0f6ddb;--color-info-text:#fff}.__next-auth-theme-auto,.__next-auth-theme-light{--color-background:#ececec;--color-background-hover:hsla(0,0%,93%,.8);--color-background-card:#fff;--color-text:#000;--color-primary:#444;--color-control-border:#bbb;--color-button-active-background:#f9f9f9;--color-button-active-border:#aaa;--color-separator:#ccc}.__next-auth-theme-dark{--color-background:#161b22;--color-background-hover:rgba(22,27,34,.8);--color-background-card:#0d1117;--color-text:#fff;--color-primary:#ccc;--color-control-border:#555;--color-button-active-background:#060606;--color-button-active-border:#666;--color-separator:#444}@media (prefers-color-scheme:dark){.__next-auth-theme-auto{--color-background:#161b22;--color-background-hover:rgba(22,27,34,.8);--color-background-card:#0d1117;--color-text:#fff;--color-primary:#ccc;--color-control-border:#555;--color-button-active-background:#060606;--color-button-active-border:#666;--color-separator:#444}a.button,button{background-color:var(--provider-dark-bg,var(--color-background));color:var(--provider-dark-color,var(--color-primary))}a.button:hover,button:hover{background-color:var(--provider-dark-bg-hover,var(--color-background-hover))!important}#provider-logo{display:none!important}#provider-logo-dark{display:block!important;width:25px}}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit;margin:0;padding:0}body{background-color:var(--color-background);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;margin:0;padding:0}h1{font-weight:400}h1,p{color:var(--color-text);margin-bottom:1.5rem;padding:0 1rem}form{margin:0;padding:0}label{font-weight:500;margin-bottom:.25rem;text-align:left}input[type],label{color:var(--color-text);display:block}input[type]{background:var(--color-background-card);border:var(--border-width) solid var(--color-control-border);border-radius:var(--border-radius);box-sizing:border-box;font-size:1rem;padding:.5rem 1rem;width:100%}input[type]:focus{box-shadow:none}p{font-size:1.1rem;line-height:2rem}a.button{line-height:1rem;text-decoration:none}a.button:link,a.button:visited{background-color:var(--color-background);color:var(--color-primary)}button span{flex-grow:1}a.button,button{align-items:center;background-color:var(--provider-bg);border-color:rgba(0,0,0,.1);border-radius:var(--border-radius);color:var(--provider-color,var(--color-primary));display:flex;font-size:1.1rem;font-weight:500;justify-content:center;min-height:62px;padding:.75rem 1rem;position:relative;transition:all .1s ease-in-out}a.button:hover,button:hover{background-color:var(--provider-bg-hover,var(--color-background-hover));cursor:pointer}a.button:active,button:active{cursor:pointer}a.button #provider-logo,button #provider-logo{display:block;width:25px}a.button #provider-logo-dark,button #provider-logo-dark{display:none}#submitButton{background-color:var(--brand-color,var(--color-info));color:var(--button-text-color,var(--color-info-text));width:100%}#submitButton:hover{background-color:var(--button-hover-bg,var(--color-info-hover))!important}a.site{color:var(--color-primary);font-size:1rem;line-height:2rem;text-decoration:none}a.site:hover{text-decoration:underline}.page{box-sizing:border-box;display:grid;height:100%;margin:0;padding:0;place-items:center;position:absolute;width:100%}.page>div{text-align:center}.error a.button{margin-top:.5rem;padding-left:2rem;padding-right:2rem}.error .message{margin-bottom:1.5rem}.signin input[type=text]{display:block;margin-left:auto;margin-right:auto}.signin hr{border:0;border-top:1px solid var(--color-separator);display:block;margin:2rem auto 1rem;overflow:visible}.signin hr:before{background:var(--color-background-card);color:#888;content:"or";padding:0 .4rem;position:relative;top:-.7rem}.signin .error{background:#f5f5f5;background:var(--color-error);border-radius:.3rem;font-weight:500}.signin .error p{color:var(--color-info-text);font-size:.9rem;line-height:1.2rem;padding:.5rem 1rem;text-align:left}.signin form,.signin>div{display:block}.signin form input[type],.signin>div input[type]{margin-bottom:.5rem}.signin form button,.signin>div button{width:100%}.signin .provider+.provider{margin-top:1rem}.logo{display:inline-block;margin:1.25rem 0;max-height:70px;max-width:150px}.card{background-color:var(--color-background-card);border-radius:2rem;padding:1.25rem 2rem}.card .header{color:var(--color-primary)}.section-header{color:var(--color-text)}@media screen and (min-width:450px){.card{margin:2rem 0;width:368px}}@media screen and (max-width:450px){.card{margin:1rem 0;width:343px}}'}},89311:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}});var i=r(39189);Object.keys(i).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(30844));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}Object.keys(o).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))})},97986:(e,t,r)=>{"use strict";var n=r(1258);Object.defineProperty(t,"__esModule",{value:!0});var i={encode:!0,decode:!0,getToken:!0};t.decode=p,t.encode=d,t.getToken=f;var o=r(85300),a=n(r(70849)),s=r(47197),l=r(70553),c=r(69508);Object.keys(c).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e))&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))});let u=()=>Date.now()/1e3|0;async function d(e){let{token:t={},secret:r,maxAge:n=2592e3,salt:i=""}=e,a=await h(r,i);return await new o.EncryptJWT(t).setProtectedHeader({alg:"dir",enc:"A256GCM"}).setIssuedAt().setExpirationTime(u()+n).setJti((0,s.v4)()).encrypt(a)}async function p(e){let{token:t,secret:r,salt:n=""}=e;if(!t)return null;let i=await h(r,n),{payload:a}=await (0,o.jwtDecrypt)(t,i,{clockTolerance:15});return a}async function f(e){var t,r,n;let{req:i,secureCookie:o=null!==(t=null===(r=process.env.NEXTAUTH_URL)||void 0===r?void 0:r.startsWith("https://"))&&void 0!==t?t:!!process.env.VERCEL,cookieName:a=o?"__Secure-next-auth.session-token":"next-auth.session-token",raw:s,decode:c=p,logger:u=console,secret:d=process.env.NEXTAUTH_SECRET}=e;if(!i)throw Error("Must pass `req` to JWT getToken()");let f=new l.SessionStore({name:a,options:{secure:o}},{cookies:i.cookies,headers:i.headers},u).value,h=i.headers instanceof Headers?i.headers.get("authorization"):null===(n=i.headers)||void 0===n?void 0:n.authorization;if(f||(null==h?void 0:h.split(" ")[0])!=="Bearer"||(f=decodeURIComponent(h.split(" ")[1])),!f)return null;if(s)return f;try{return await c({token:f,secret:d})}catch(e){return null}}async function h(e,t){return await (0,a.default)("sha256",e,t,`NextAuth.js Generated Encryption Key${t?` (${t})`:""}`,32)}},69508:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},30844:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.getServerSession=s,t.unstable_getServerSession=l;var n=r(99635),i=r(43239);async function o(e,t,r){var o,a,s,l,c,u,d,p;let{nextauth:f,...h}=e.query;null!==(o=r.secret)&&void 0!==o||(r.secret=null!==(a=null===(s=r.jwt)||void 0===s?void 0:s.secret)&&void 0!==a?a:process.env.NEXTAUTH_SECRET);let y=await (0,n.AuthHandler)({req:{body:e.body,query:h,cookies:e.cookies,headers:e.headers,method:e.method,action:null==f?void 0:f[0],providerId:null==f?void 0:f[1],error:null!==(l=e.query.error)&&void 0!==l?l:null==f?void 0:f[1]},options:r});if(t.status(null!==(c=y.status)&&void 0!==c?c:200),null===(u=y.cookies)||void 0===u||u.forEach(e=>(0,i.setCookie)(t,e)),null===(d=y.headers)||void 0===d||d.forEach(e=>t.setHeader(e.key,e.value)),y.redirect){if((null===(p=e.body)||void 0===p?void 0:p.json)!=="true"){t.status(302).setHeader("Location",y.redirect),t.end();return}return t.json({url:y.redirect})}return t.send(y.body)}async function a(e,t,o){var a,s,l;null!==(a=o.secret)&&void 0!==a||(o.secret=process.env.NEXTAUTH_SECRET);let{headers:c,cookies:u}=r(9362),d=null===(s=t.params)||void 0===s?void 0:s.nextauth,p=Object.fromEntries(e.nextUrl.searchParams),f=await (0,i.getBody)(e),h=await (0,n.AuthHandler)({req:{body:f,query:p,cookies:Object.fromEntries(u().getAll().map(e=>[e.name,e.value])),headers:Object.fromEntries(c()),method:e.method,action:null==d?void 0:d[0],providerId:null==d?void 0:d[1],error:null!==(l=p.error)&&void 0!==l?l:null==d?void 0:d[1]},options:o}),y=(0,i.toResponse)(h),_=y.headers.get("Location");return(null==f?void 0:f.json)==="true"&&_?(y.headers.delete("Location"),y.headers.set("Content-Type","application/json"),new Response(JSON.stringify({url:_}),{status:h.status,headers:y.headers})):y}async function s(...e){var t,o;let a,l,c;let u=0===e.length||1===e.length;if(u){c=Object.assign({},e[0],{providers:[]});let{headers:t,cookies:n}=r(9362);a={headers:Object.fromEntries(t()),cookies:Object.fromEntries(n().getAll().map(e=>[e.name,e.value]))},l={getHeader(){},setCookie(){},setHeader(){}}}else a=e[0],l=e[1],c=Object.assign({},e[2],{providers:[]});null!==(o=(t=c).secret)&&void 0!==o||(t.secret=process.env.NEXTAUTH_SECRET);let{body:d,cookies:p,status:f=200}=await (0,n.AuthHandler)({options:c,req:{action:"session",method:"GET",cookies:a.cookies,headers:a.headers}});if(null==p||p.forEach(e=>(0,i.setCookie)(l,e)),d&&"string"!=typeof d&&Object.keys(d).length){if(200===f)return u&&delete d.expires,d;throw Error(d.message)}return null}async function l(...e){return await s(...e)}t.default=function(...e){var t;return 1===e.length?async(t,r)=>null!=r&&r.params?await a(t,r,e[0]):await o(t,r,e[0]):null!==(t=e[1])&&void 0!==t&&t.params?a(...e):o(...e)}},43239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBody=i,t.setCookie=function(e,t){var r;let i=null!==(r=e.getHeader("Set-Cookie"))&&void 0!==r?r:[];Array.isArray(i)||(i=[i]);let{name:o,value:a,options:s}=t,l=(0,n.serialize)(o,a,s);i.push(l),e.setHeader("Set-Cookie",i)},t.toResponse=function(e){var t,r,i;let o=new Headers(null===(t=e.headers)||void 0===t?void 0:t.reduce((e,{key:t,value:r})=>(e[t]=r,e),{}));null===(r=e.cookies)||void 0===r||r.forEach(e=>{let{name:t,value:r,options:i}=e,a=(0,n.serialize)(t,r,i);o.has("Set-Cookie")?o.append("Set-Cookie",a):o.set("Set-Cookie",a)});let a=e.body;"application/json"===o.get("content-type")?a=JSON.stringify(e.body):"application/x-www-form-urlencoded"===o.get("content-type")&&(a=new URLSearchParams(e.body).toString());let s=new Response(a,{headers:o,status:e.redirect?302:null!==(i=e.status)&&void 0!==i?i:200});return e.redirect&&s.headers.set("Location",e.redirect),s};var n=r(15693);async function i(e){if(!("body"in e)||!e.body||"POST"!==e.method)return;let t=e.headers.get("content-type");return null!=t&&t.includes("application/json")?await e.json():null!=t&&t.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await e.text())):void 0}},15693:(e,t)=>{"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},n=(t||{}).decode||i,o=0;o<e.length;){var a=e.indexOf("=",o);if(-1===a)break;var s=e.indexOf(";",o);if(-1===s)s=e.length;else if(s<a){o=e.lastIndexOf(";",a-1)+1;continue}var l=e.slice(o,a).trim();if(void 0===r[l]){var c=e.slice(a+1,s).trim();34===c.charCodeAt(0)&&(c=c.slice(1,-1)),r[l]=function(e,t){try{return t(e)}catch(t){return e}}(c,n)}o=s+1}return r},t.serialize=function(e,t,i){var a=i||{},s=a.encode||o;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!n.test(e))throw TypeError("argument name is invalid");var l=s(t);if(l&&!n.test(l))throw TypeError("argument val is invalid");var c=e+"="+l;if(null!=a.maxAge){var u=a.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(u)}if(a.domain){if(!n.test(a.domain))throw TypeError("option domain is invalid");c+="; Domain="+a.domain}if(a.path){if(!n.test(a.path))throw TypeError("option path is invalid");c+="; Path="+a.path}if(a.expires){var d=a.expires;if("[object Date]"!==r.call(d)&&!(d instanceof Date)||isNaN(d.valueOf()))throw TypeError("option expires is invalid");c+="; Expires="+d.toUTCString()}if(a.httpOnly&&(c+="; HttpOnly"),a.secure&&(c+="; Secure"),a.priority)switch("string"==typeof a.priority?a.priority.toLowerCase():a.priority){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(a.sameSite)switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:case"strict":c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"none":c+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return c};var r=Object.prototype.toString,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function o(e){return encodeURIComponent(e)}},65631:(e,t,r)=>{"use strict";let n;let{inspect:i}=r(73837),o=r(13685),a=r(6113),{strict:s}=r(39491),l=r(63477),c=r(35034),{URL:u,URLSearchParams:d}=r(35034),p=r(85300),f=r(73959),h=r(8966),y=r(6234),_=r(33564),m=r(70082),g=r(37590),{assertSigningAlgValuesSupport:v,assertIssuerConfiguration:w}=r(18802),b=r(53826),E=r(29329),S=r(34870),k=r(71541),{OPError:P,RPError:A}=r(41217),O=r(46177),{random:T}=r(34460),I=r(49875),{CLOCK_TOLERANCE:x}=r(75510),{keystores:C}=r(50706),R=r(42230),j=r(21736),{authenticatedPost:N,resolveResponseType:U,resolveRedirectUri:W}=r(95869),{queryKeyStore:M}=r(90093),J=r(23353),[D,H]=process.version.slice(1).split(".").map(e=>parseInt(e,10)),K=D>=17||16===D&&H>=9,L=Symbol(),$=Symbol(),B=Symbol();function z(e){return b(e,"access_token","code","error_description","error_uri","error","expires_in","id_token","iss","response","session_state","state","token_type")}function F(e,t="Bearer"){return`${t} ${e}`}function q(e){let t=c.parse(e);return t.search?l.parse(t.search.substring(1)):{}}function G(e,t,r){if(void 0===e[r])throw new A({message:`missing required JWT property ${r}`,jwt:t})}function V(e){let t={client_id:this.client_id,scope:"openid",response_type:U.call(this),redirect_uri:W.call(this),...e};return Object.entries(t).forEach(([e,r])=>{null==r?delete t[e]:"claims"===e&&"object"==typeof r?t[e]=JSON.stringify(r):"resource"===e&&Array.isArray(r)?t[e]=r:"string"!=typeof r&&(t[e]=String(r))}),t}function Y(e){if(!E(e)||!Array.isArray(e.keys)||e.keys.some(e=>!E(e)||!("kty"in e)))throw TypeError("jwks must be a JSON Web Key Set formatted object");return R.fromJWKS(e,{onlyPrivate:!0})}class X{#e;#t;#r;#n;constructor(e,t,r={},n,i){if(this.#e=new Map,this.#t=e,this.#r=t,"string"!=typeof r.client_id||!r.client_id)throw TypeError("client_id is required");let o={grant_types:["authorization_code"],id_token_signed_response_alg:"RS256",authorization_signed_response_alg:"RS256",response_types:["code"],token_endpoint_auth_method:"client_secret_basic",...this.fapi()?{grant_types:["authorization_code","implicit"],id_token_signed_response_alg:"PS256",authorization_signed_response_alg:"PS256",response_types:["code id_token"],tls_client_certificate_bound_access_tokens:!0,token_endpoint_auth_method:void 0}:void 0,...r};if(this.fapi())switch(o.token_endpoint_auth_method){case"self_signed_tls_client_auth":case"tls_client_auth":break;case"private_key_jwt":if(!n)throw TypeError("jwks is required");break;case void 0:throw TypeError("token_endpoint_auth_method is required");default:throw TypeError("invalid or unsupported token_endpoint_auth_method")}if(function(e,t,r){if(t.token_endpoint_auth_method||function(e,t){try{let r=e.issuer.token_endpoint_auth_methods_supported;!r.includes(t.token_endpoint_auth_method)&&r.includes("client_secret_post")&&(t.token_endpoint_auth_method="client_secret_post")}catch(e){}}(e,r),t.redirect_uri){if(t.redirect_uris)throw TypeError("provide a redirect_uri or redirect_uris, not both");r.redirect_uris=[t.redirect_uri],delete r.redirect_uri}if(t.response_type){if(t.response_types)throw TypeError("provide a response_type or response_types, not both");r.response_types=[t.response_type],delete r.response_type}}(this,r,o),v("token",this.issuer,o),["introspection","revocation"].forEach(e=>{(function(e,t,r){if(!t[`${e}_endpoint`])return;let n=r.token_endpoint_auth_method,i=r.token_endpoint_auth_signing_alg,o=`${e}_endpoint_auth_method`,a=`${e}_endpoint_auth_signing_alg`;void 0===r[o]&&void 0===r[a]&&(void 0!==n&&(r[o]=n),void 0!==i&&(r[a]=i))})(e,this.issuer,o),v(e,this.issuer,o)}),Object.entries(o).forEach(([e,t])=>{this.#e.set(e,t),this[e]||Object.defineProperty(this,e,{get(){return this.#e.get(e)},enumerable:!0})}),void 0!==n){let e=Y.call(this,n);C.set(this,e)}null!=i&&i.additionalAuthorizedParties&&(this.#n=j(i.additionalAuthorizedParties)),this[x]=0}authorizationUrl(e={}){if(!E(e))throw TypeError("params must be a plain object");w(this.issuer,"authorization_endpoint");let t=new u(this.issuer.authorization_endpoint);for(let[r,n]of Object.entries(V.call(this,e)))if(Array.isArray(n))for(let e of(t.searchParams.delete(r),n))t.searchParams.append(r,e);else t.searchParams.set(r,n);return t.href.replace(/\+/g,"%20")}authorizationPost(e={}){if(!E(e))throw TypeError("params must be a plain object");let t=V.call(this,e),r=Object.keys(t).map(e=>`<input type="hidden" name="${e}" value="${t[e]}"/>`).join("\n");return`<!DOCTYPE html>
<head>
<title>Requesting Authorization</title>
</head>
<body onload="javascript:document.forms[0].submit()">
<form method="post" action="${this.issuer.authorization_endpoint}">
  ${r}
</form>
</body>
</html>`}endSessionUrl(e={}){let t;w(this.issuer,"end_session_endpoint");let{0:r,length:n}=this.post_logout_redirect_uris||[],{post_logout_redirect_uri:i=1===n?r:void 0}=e;if({id_token_hint:t,...e}=e,t instanceof k){if(!t.id_token)throw TypeError("id_token not present in TokenSet");t=t.id_token}let o=c.parse(this.issuer.end_session_endpoint),a=m(q(this.issuer.end_session_endpoint),e,{post_logout_redirect_uri:i,client_id:this.client_id},{id_token_hint:t});return Object.entries(a).forEach(([e,t])=>{null==t&&delete a[e]}),o.search=null,o.query=a,c.format(o)}callbackParams(e){let t=e instanceof o.IncomingMessage||e&&e.method&&e.url;if("string"!=typeof e&&!t)throw TypeError("#callbackParams only accepts string urls, http.IncomingMessage or a lookalike");if(!t)return z(q(e));switch(e.method){case"GET":return z(q(e.url));case"POST":if(void 0===e.body)throw TypeError("incoming message body missing, include a body parser prior to this method call");switch(typeof e.body){case"object":case"string":if(Buffer.isBuffer(e.body))return z(l.parse(e.body.toString("utf-8")));if("string"==typeof e.body)return z(l.parse(e.body));return z(e.body);default:throw TypeError("invalid IncomingMessage body object")}default:throw TypeError("invalid IncomingMessage method")}}async callback(e,t,r={},{exchangeBody:n,clientAssertionPayload:i,DPoP:o}={}){let a=z(t);if(!r.jarm||"response"in t){if("response"in t){let e=await this.decryptJARM(a.response);a=await this.validateJARM(e)}}else throw new A({message:"expected a JARM response",checks:r,params:a});if(this.default_max_age&&!r.max_age&&(r.max_age=this.default_max_age),a.state&&!r.state)throw TypeError("checks.state argument is missing");if(!a.state&&r.state)throw new A({message:"state missing from the response",checks:r,params:a});if(r.state!==a.state)throw new A({printf:["state mismatch, expected %s, got: %s",r.state,a.state],checks:r,params:a});if("iss"in a){if(w(this.issuer,"issuer"),a.iss!==this.issuer.issuer)throw new A({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,a.iss],params:a})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in a)&&!("response"in t))throw new A({message:"iss missing from the response",params:a});if(a.error)throw new P(a);let s={code:["code"],id_token:["id_token"],token:["access_token","token_type"]};if(r.response_type){for(let e of r.response_type.split(" "))if("none"===e){if(a.code||a.id_token||a.access_token)throw new A({message:'unexpected params encountered for "none" response',checks:r,params:a})}else for(let t of s[e])if(!a[t])throw new A({message:`${t} missing from response`,checks:r,params:a})}if(a.id_token){let e=new k(a);if(await this.decryptIdToken(e),await this.validateIdToken(e,r.nonce,"authorization",r.max_age,r.state),!a.code)return e}if(a.code){let t=await this.grant({...n,grant_type:"authorization_code",code:a.code,redirect_uri:e,code_verifier:r.code_verifier},{clientAssertionPayload:i,DPoP:o});return await this.decryptIdToken(t),await this.validateIdToken(t,r.nonce,"token",r.max_age),a.session_state&&(t.session_state=a.session_state),t}return new k(a)}async oauthCallback(e,t,r={},{exchangeBody:n,clientAssertionPayload:i,DPoP:o}={}){let a=z(t);if(!r.jarm||"response"in t){if("response"in t){let e=await this.decryptJARM(a.response);a=await this.validateJARM(e)}}else throw new A({message:"expected a JARM response",checks:r,params:a});if(a.state&&!r.state)throw TypeError("checks.state argument is missing");if(!a.state&&r.state)throw new A({message:"state missing from the response",checks:r,params:a});if(r.state!==a.state)throw new A({printf:["state mismatch, expected %s, got: %s",r.state,a.state],checks:r,params:a});if("iss"in a){if(w(this.issuer,"issuer"),a.iss!==this.issuer.issuer)throw new A({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,a.iss],params:a})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in a)&&!("response"in t))throw new A({message:"iss missing from the response",params:a});if(a.error)throw new P(a);if("string"==typeof a.id_token&&a.id_token.length)throw new A({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:a});delete a.id_token;let s={code:["code"],token:["access_token","token_type"]};if(r.response_type)for(let e of r.response_type.split(" ")){if("none"===e&&(a.code||a.id_token||a.access_token))throw new A({message:'unexpected params encountered for "none" response',checks:r,params:a});if(s[e]){for(let t of s[e])if(!a[t])throw new A({message:`${t} missing from response`,checks:r,params:a})}}if(a.code){let t=await this.grant({...n,grant_type:"authorization_code",code:a.code,redirect_uri:e,code_verifier:r.code_verifier},{clientAssertionPayload:i,DPoP:o});if("string"==typeof t.id_token&&t.id_token.length)throw new A({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:a});return delete t.id_token,t}return new k(a)}async decryptIdToken(e){if(!this.id_token_encrypted_response_alg)return e;let t=e;if(t instanceof k){if(!t.id_token)throw TypeError("id_token not present in TokenSet");t=t.id_token}let r=this.id_token_encrypted_response_alg,n=this.id_token_encrypted_response_enc,i=await this.decryptJWE(t,r,n);return e instanceof k?(e.id_token=i,e):i}async validateJWTUserinfo(e){let t=this.userinfo_signed_response_alg;return this.validateJWT(e,t,[])}async decryptJARM(e){if(!this.authorization_encrypted_response_alg)return e;let t=this.authorization_encrypted_response_alg,r=this.authorization_encrypted_response_enc;return this.decryptJWE(e,t,r)}async decryptJWTUserinfo(e){if(!this.userinfo_encrypted_response_alg)return e;let t=this.userinfo_encrypted_response_alg,r=this.userinfo_encrypted_response_enc;return this.decryptJWE(e,t,r)}async decryptJWE(e,t,r="A128CBC-HS256"){let n;let i=JSON.parse(_.decode(e.split(".")[0]));if(i.alg!==t)throw new A({printf:["unexpected JWE alg received, expected %s, got: %s",t,i.alg],jwt:e});if(i.enc!==r)throw new A({printf:["unexpected JWE enc received, expected %s, got: %s",r,i.enc],jwt:e});let o=e=>new TextDecoder().decode(e.plaintext);if(t.match(/^(?:RSA|ECDH)/)){let t=await C.get(this),r=p.decodeProtectedHeader(e);for(let i of t.all({...r,use:"enc"}))if(n=await p.compactDecrypt(e,await i.keyObject(r.alg)).then(o,()=>{}))break}else n=await p.compactDecrypt(e,this.secretForAlg("dir"===t?r:t)).then(o,()=>{});if(!n)throw new A({message:"failed to decrypt JWE",jwt:e});return n}async validateIdToken(e,t,r,n,i){let o=e,a=this.id_token_signed_response_alg;if(o instanceof k){if(!o.id_token)throw TypeError("id_token not present in TokenSet");o=o.id_token}o=String(o);let s=O(),{protected:l,payload:c,key:u}=await this.validateJWT(o,a);if("number"==typeof n||n!==B&&this.require_auth_time){if(!c.auth_time)throw new A({message:"missing required JWT property auth_time",jwt:o});if("number"!=typeof c.auth_time)throw new A({message:"JWT auth_time claim must be a JSON numeric value",jwt:o})}if("number"==typeof n&&c.auth_time+n<s-this[x])throw new A({printf:["too much time has elapsed since the last End-User authentication, max_age %i, auth_time: %i, now %i",n,c.auth_time,s-this[x]],now:s,tolerance:this[x],auth_time:c.auth_time,jwt:o});if(t!==$&&(c.nonce||void 0!==t)&&c.nonce!==t)throw new A({printf:["nonce mismatch, expected %s, got: %s",t,c.nonce],jwt:o});if("authorization"===r){if(!c.at_hash&&e.access_token)throw new A({message:"missing required property at_hash",jwt:o});if(!c.c_hash&&e.code)throw new A({message:"missing required property c_hash",jwt:o});if(this.fapi()&&!c.s_hash&&(e.state||i))throw new A({message:"missing required property s_hash",jwt:o});if(c.s_hash){if(!i)throw TypeError('cannot verify s_hash, "checks.state" property not provided');try{f.validate({claim:"s_hash",source:"state"},c.s_hash,i,l.alg,u.jwk&&u.jwk.crv)}catch(e){throw new A({message:e.message,jwt:o})}}}if(this.fapi()&&c.iat<s-3600)throw new A({printf:["JWT issued too far in the past, now %i, iat %i",s,c.iat],now:s,tolerance:this[x],iat:c.iat,jwt:o});if(e.access_token&&void 0!==c.at_hash)try{f.validate({claim:"at_hash",source:"access_token"},c.at_hash,e.access_token,l.alg,u.jwk&&u.jwk.crv)}catch(e){throw new A({message:e.message,jwt:o})}if(e.code&&void 0!==c.c_hash)try{f.validate({claim:"c_hash",source:"code"},c.c_hash,e.code,l.alg,u.jwk&&u.jwk.crv)}catch(e){throw new A({message:e.message,jwt:o})}return e}async validateJWT(e,t,r=["iss","sub","aud","exp","iat"]){let n,i,o;let a="https://self-issued.me"===this.issuer.issuer,l=O();try{({header:n,payload:i}=y(e,{complete:!0}))}catch(t){throw new A({printf:["failed to decode JWT (%s: %s)",t.name,t.message],jwt:e})}if(n.alg!==t)throw new A({printf:["unexpected JWT alg received, expected %s, got: %s",t,n.alg],jwt:e});if(a&&(r=[...r,"sub_jwk"]),r.forEach(G.bind(void 0,i,e)),void 0!==i.iss){let t=this.issuer.issuer;if(this.#r&&(t=this.issuer.issuer.replace("{tenantid}",i.tid)),i.iss!==t)throw new A({printf:["unexpected iss value, expected %s, got: %s",t,i.iss],jwt:e})}if(void 0!==i.iat&&"number"!=typeof i.iat)throw new A({message:"JWT iat claim must be a JSON numeric value",jwt:e});if(void 0!==i.nbf){if("number"!=typeof i.nbf)throw new A({message:"JWT nbf claim must be a JSON numeric value",jwt:e});if(i.nbf>l+this[x])throw new A({printf:["JWT not active yet, now %i, nbf %i",l+this[x],i.nbf],now:l,tolerance:this[x],nbf:i.nbf,jwt:e})}if(void 0!==i.exp){if("number"!=typeof i.exp)throw new A({message:"JWT exp claim must be a JSON numeric value",jwt:e});if(l-this[x]>=i.exp)throw new A({printf:["JWT expired, now %i, exp %i",l-this[x],i.exp],now:l,tolerance:this[x],exp:i.exp,jwt:e})}if(void 0!==i.aud){if(Array.isArray(i.aud)){if(i.aud.length>1&&!i.azp)throw new A({message:"missing required JWT property azp",jwt:e});if(!i.aud.includes(this.client_id))throw new A({printf:["aud is missing the client_id, expected %s to be included in %j",this.client_id,i.aud],jwt:e})}else if(i.aud!==this.client_id)throw new A({printf:["aud mismatch, expected %s, got: %s",this.client_id,i.aud],jwt:e})}if(void 0!==i.azp){let t=this.#n;if(!(t="string"==typeof t?[this.client_id,t]:Array.isArray(t)?[this.client_id,...t]:[this.client_id]).includes(i.azp))throw new A({printf:["azp mismatch, got: %s",i.azp],jwt:e})}if(a){try{s(E(i.sub_jwk));let e=await p.importJWK(i.sub_jwk,n.alg);s.equal(e.type,"public"),o=[{keyObject:()=>e}]}catch(t){throw new A({message:"failed to use sub_jwk claim as an asymmetric JSON Web Key",jwt:e})}if(await p.calculateJwkThumbprint(i.sub_jwk)!==i.sub)throw new A({message:"failed to match the subject with sub_jwk",jwt:e})}else n.alg.startsWith("HS")?o=[this.secretForAlg(n.alg)]:"none"!==n.alg&&(o=await M.call(this.issuer,{...n,use:"sig"}));if(!o&&"none"===n.alg)return{protected:n,payload:i};for(let t of o){let r=await p.compactVerify(e,t instanceof Uint8Array?t:await t.keyObject(n.alg)).catch(()=>{});if(r)return{payload:i,protected:r.protectedHeader,key:t}}throw new A({message:"failed to validate JWT signature",jwt:e})}async refresh(e,{exchangeBody:t,clientAssertionPayload:r,DPoP:n}={}){let i=e;if(i instanceof k){if(!i.refresh_token)throw TypeError("refresh_token not present in TokenSet");i=i.refresh_token}let o=await this.grant({...t,grant_type:"refresh_token",refresh_token:String(i)},{clientAssertionPayload:r,DPoP:n});if(o.id_token&&(await this.decryptIdToken(o),await this.validateIdToken(o,$,"token",B),e instanceof k&&e.id_token)){let t=e.claims().sub,r=o.claims().sub;if(r!==t)throw new A({printf:["sub mismatch, expected %s, got: %s",t,r],jwt:o.id_token})}return o}async requestResource(e,t,{method:r,headers:n,body:i,DPoP:o,tokenType:a=o?"DPoP":t instanceof k?t.token_type:"Bearer"}={},s){if(t instanceof k){if(!t.access_token)throw TypeError("access_token not present in TokenSet");t=t.access_token}if(t){if("string"!=typeof t)throw TypeError("invalid access token provided")}else throw TypeError("no access token provided");let l={headers:{Authorization:F(t,a),...n},body:i},c=!!this.tls_client_certificate_bound_access_tokens,u=await I.call(this,{...l,responseType:"buffer",method:r,url:e},{accessToken:t,mTLS:c,DPoP:o}),d=u.headers["www-authenticate"];return s!==L&&d&&d.toLowerCase().startsWith("dpop ")&&"use_dpop_nonce"===g(d).error?this.requestResource(e,t,{method:r,headers:n,body:i,DPoP:o,tokenType:a}):u}async userinfo(e,{method:t="GET",via:r="header",tokenType:n,params:i,DPoP:o}={}){let a;w(this.issuer,"userinfo_endpoint");let l={tokenType:n,method:String(t).toUpperCase(),DPoP:o};if("GET"!==l.method&&"POST"!==l.method)throw TypeError("#userinfo() method can only be POST or a GET");if("body"===r&&"POST"!==l.method)throw TypeError("can only send body on POST");let c=!!(this.userinfo_signed_response_alg||this.userinfo_encrypted_response_alg);c?l.headers={Accept:"application/jwt"}:l.headers={Accept:"application/json"},this.tls_client_certificate_bound_access_tokens&&this.issuer.mtls_endpoint_aliases&&(a=this.issuer.mtls_endpoint_aliases.userinfo_endpoint),a=new u(a||this.issuer.userinfo_endpoint),"body"===r&&(l.headers.Authorization=void 0,l.headers["Content-Type"]="application/x-www-form-urlencoded",l.body=new d,l.body.append("access_token",e instanceof k?e.access_token:e)),i&&("GET"===l.method?Object.entries(i).forEach(([e,t])=>{a.searchParams.append(e,t)}):l.body?Object.entries(i).forEach(([e,t])=>{l.body.append(e,t)}):(l.body=new d,l.headers["Content-Type"]="application/x-www-form-urlencoded",Object.entries(i).forEach(([e,t])=>{l.body.append(e,t)}))),l.body&&(l.body=l.body.toString());let p=await this.requestResource(a,e,l),f=S(p,{bearer:!0});if(c){if(!/^application\/jwt/.test(p.headers["content-type"]))throw new A({message:"expected application/jwt response from the userinfo_endpoint",response:p});let e=p.body.toString(),t=await this.decryptJWTUserinfo(e);if(this.userinfo_signed_response_alg)({payload:f}=await this.validateJWTUserinfo(t));else try{f=JSON.parse(t),s(E(f))}catch(e){throw new A({message:"failed to parse userinfo JWE payload as JSON",jwt:t})}}else try{f=JSON.parse(p.body)}catch(e){throw Object.defineProperty(e,"response",{value:p}),e}if(e instanceof k&&e.id_token){let t=e.claims().sub;if(f.sub!==t)throw new A({printf:["userinfo sub mismatch, expected %s, got: %s",t,f.sub],body:f,jwt:e.id_token})}return f}encryptionSecret(e){let t=e<=256?"sha256":e<=384?"sha384":e<=512&&"sha512";if(!t)throw Error("unsupported symmetric encryption key derivation");return a.createHash(t).update(this.client_secret).digest().slice(0,e/8)}secretForAlg(e){if(!this.client_secret)throw TypeError("client_secret is required");return/^A(\d{3})(?:GCM)?KW$/.test(e)?this.encryptionSecret(parseInt(RegExp.$1,10)):/^A(\d{3})(?:GCM|CBC-HS(\d{3}))$/.test(e)?this.encryptionSecret(parseInt(RegExp.$2||RegExp.$1,10)):new TextEncoder().encode(this.client_secret)}async grant(e,{clientAssertionPayload:t,DPoP:r}={},n){let i;w(this.issuer,"token_endpoint");let o=await N.call(this,"token",{form:e,responseType:"json"},{clientAssertionPayload:t,DPoP:r});try{i=S(o)}catch(i){if(n!==L&&i instanceof P&&"use_dpop_nonce"===i.error)return this.grant(e,{clientAssertionPayload:t,DPoP:r},L);throw i}return new k(i)}async deviceAuthorization(e={},{exchangeBody:t,clientAssertionPayload:r,DPoP:n}={}){w(this.issuer,"device_authorization_endpoint"),w(this.issuer,"token_endpoint");let i=V.call(this,{client_id:this.client_id,redirect_uri:null,response_type:null,...e}),o=S(await N.call(this,"device_authorization",{responseType:"json",form:i},{clientAssertionPayload:r,endpointAuthMethod:"token"}));return new J({client:this,exchangeBody:t,clientAssertionPayload:r,response:o,maxAge:e.max_age,DPoP:n})}async revoke(e,t,{revokeBody:r,clientAssertionPayload:n}={}){if(w(this.issuer,"revocation_endpoint"),void 0!==t&&"string"!=typeof t)throw TypeError("hint must be a string");let i={...r,token:e};t&&(i.token_type_hint=t),S(await N.call(this,"revocation",{form:i},{clientAssertionPayload:n}),{body:!1})}async introspect(e,t,{introspectBody:r,clientAssertionPayload:n}={}){if(w(this.issuer,"introspection_endpoint"),void 0!==t&&"string"!=typeof t)throw TypeError("hint must be a string");let i={...r,token:e};return t&&(i.token_type_hint=t),S(await N.call(this,"introspection",{form:i,responseType:"json"},{clientAssertionPayload:n}))}static async register(e,t={}){let{initialAccessToken:r,jwks:n,...i}=t;if(w(this.issuer,"registration_endpoint"),void 0!==n&&!(e.jwks||e.jwks_uri)){let t=await Y.call(this,n);e.jwks=t.toJWKS()}return new this(S(await I.call(this,{headers:{Accept:"application/json",...r?{Authorization:F(r)}:void 0},responseType:"json",json:e,url:this.issuer.registration_endpoint,method:"POST"}),{statusCode:201,bearer:!0}),n,i)}get metadata(){return j(Object.fromEntries(this.#e.entries()))}static async fromUri(e,t,r,n){return new this(S(await I.call(this,{method:"GET",url:e,responseType:"json",headers:{Authorization:F(t),Accept:"application/json"}}),{bearer:!0}),r,n)}async requestObject(e={},{sign:t=this.request_object_signing_alg||"none",encrypt:{alg:r=this.request_object_encryption_alg,enc:n=this.request_object_encryption_enc||"A128CBC-HS256"}={}}={}){let i,o;if(!E(e))throw TypeError("requestObject must be a plain object");let a=O(),s={alg:t,typ:"oauth-authz-req+jwt"},l=JSON.stringify(m({},e,{iss:this.client_id,aud:this.issuer.issuer,client_id:this.client_id,jti:T(),iat:a,exp:a+300,...this.fapi()?{nbf:a}:void 0}));if("none"===t)i=[_.encode(JSON.stringify(s)),_.encode(l),""].join(".");else{let e=t.startsWith("HS");if(e)o=this.secretForAlg(t);else{let e=await C.get(this);if(!e)throw TypeError(`no keystore present for client, cannot sign using alg ${t}`);if(!(o=e.get({alg:t,use:"sig"})))throw TypeError(`no key to sign with found for alg ${t}`)}i=await new p.CompactSign(new TextEncoder().encode(l)).setProtectedHeader({...s,kid:e?void 0:o.jwk.kid}).sign(e?o:await o.keyObject(t))}if(!r)return i;let c={alg:r,enc:n,cty:"oauth-authz-req+jwt"};return c.alg.match(/^(RSA|ECDH)/)?[o]=await M.call(this.issuer,{alg:c.alg,use:"enc"},{allowMulti:!0}):o=this.secretForAlg("dir"===c.alg?c.enc:c.alg),new p.CompactEncrypt(new TextEncoder().encode(i)).setProtectedHeader({...c,kid:o instanceof Uint8Array?void 0:o.jwk.kid}).encrypt(o instanceof Uint8Array?o:await o.keyObject(c.alg))}async pushedAuthorizationRequest(e={},{clientAssertionPayload:t}={}){w(this.issuer,"pushed_authorization_request_endpoint");let r={..."request"in e?e:V.call(this,e),client_id:this.client_id},n=await N.call(this,"pushed_authorization_request",{responseType:"json",form:r},{clientAssertionPayload:t,endpointAuthMethod:"token"}),i=S(n,{statusCode:201});if(!("expires_in"in i))throw new A({message:"expected expires_in in Pushed Authorization Successful Response",response:n});if("number"!=typeof i.expires_in)throw new A({message:"invalid expires_in value in Pushed Authorization Successful Response",response:n});if(!("request_uri"in i))throw new A({message:"expected request_uri in Pushed Authorization Successful Response",response:n});if("string"!=typeof i.request_uri)throw new A({message:"invalid request_uri value in Pushed Authorization Successful Response",response:n});return i}get issuer(){return this.#t}[i.custom](){return`${this.constructor.name} ${i(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}fapi(){return"FAPI1Client"===this.constructor.name}async validateJARM(e){let t=this.authorization_signed_response_alg,{payload:r}=await this.validateJWT(e,t,["iss","exp","aud"]);return z(r)}async dpopProof(e,t,r){let i;if(!E(e))throw TypeError("payload must be a plain object");if(h(t))i=t;else if("CryptoKey"===t[Symbol.toStringTag])i=t;else if("node:crypto"===p.cryptoRuntime)i=a.createPrivateKey(t);else throw TypeError("unrecognized crypto runtime");if("private"!==i.type)throw TypeError('"DPoP" option must be a private key');let o=n.call(this,i,t);if(!o)throw TypeError("could not determine DPoP JWS Algorithm");return new p.SignJWT({ath:r?_.encode(a.createHash("sha256").update(r).digest()):void 0,...e}).setProtectedHeader({alg:o,typ:"dpop+jwt",jwk:await ee(i,t)}).setIssuedAt().setJti(T()).sign(i)}}function Z(e){switch(e.algorithm.name){case"Ed25519":case"Ed448":return"EdDSA";case"ECDSA":switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512"}break;case"RSASSA-PKCS1-v1_5":return`RS${e.algorithm.hash.name.slice(4)}`;case"RSA-PSS":return`PS${e.algorithm.hash.name.slice(4)}`;default:throw TypeError("unsupported DPoP private key")}}if("node:crypto"===p.cryptoRuntime){n=function(n,a){if("CryptoKey"===a[Symbol.toStringTag])return Z(n);switch(n.asymmetricKeyType){case"ed25519":case"ed448":return"EdDSA";case"ec":return function(e,n){switch("object"==typeof n&&"object"==typeof n.key&&n.key.crv){case"P-256":return"ES256";case"secp256k1":return"ES256K";case"P-384":return"ES384";case"P-512":return"ES512"}let a=e.export({format:"der",type:"pkcs8"}),s=a[1]<128?17:18,l=a[s],c=a.slice(s+1,s+1+l);if(c.equals(t))return"ES256";if(c.equals(r))return"ES384";if(c.equals(i))return"ES512";if(c.equals(o))return"ES256K";throw TypeError("unsupported DPoP private key curve")}(n,a);case"rsa":case K&&"rsa-pss":return function(t,r,n){if("object"==typeof r&&"jwk"===r.format&&r.key&&r.key.alg)return r.key.alg;if(Array.isArray(n)){let r=n.filter(RegExp.prototype.test.bind(e));return"rsa-pss"===t.asymmetricKeyType&&(r=r.filter(e=>e.startsWith("PS"))),["PS256","PS384","PS512","RS256","RS384","RS384"].find(e=>r.includes(e))}return"PS256"}(n,a,this.issuer.dpop_signing_alg_values_supported);default:throw TypeError("unsupported DPoP private key")}};let e=/^(?:RS|PS)(?:256|384|512)$/,t=Buffer.from([42,134,72,206,61,3,1,7]),r=Buffer.from([43,129,4,0,34]),i=Buffer.from([43,129,4,0,35]),o=Buffer.from([43,129,4,0,10])}else n=Z;let Q=new WeakMap;async function ee(e,t){if("node:crypto"===p.cryptoRuntime&&"object"==typeof t&&"object"==typeof t.key&&"jwk"===t.format)return b(t.key,"kty","crv","x","y","e","n");if(Q.has(t))return Q.get(t);let r=b(await p.exportJWK(e),"kty","crv","x","y","e","n");return(h(t)||"WebCryptoAPI"===p.cryptoRuntime)&&Q.set(t,r),r}e.exports=(e,t=!1)=>class extends X{constructor(...r){super(e,t,...r)}static get issuer(){return e}},e.exports.BaseClient=X},23353:(e,t,r)=>{let{inspect:n}=r(73837),{RPError:i,OPError:o}=r(41217),a=r(46177);class s{#i;#o;#a;#s;#l;#c;#u;#d;#p;constructor({client:e,exchangeBody:t,clientAssertionPayload:r,response:n,maxAge:o,DPoP:s}){if(["verification_uri","user_code","device_code"].forEach(e=>{if("string"!=typeof n[e]||!n[e])throw new i(`expected ${e} string to be returned by Device Authorization Response, got %j`,n[e])}),!Number.isSafeInteger(n.expires_in))throw new i("expected expires_in number to be returned by Device Authorization Response, got %j",n.expires_in);this.#c=a()+n.expires_in,this.#o=e,this.#s=s,this.#d=o,this.#l=t,this.#a=r,this.#p=n,this.#u=1e3*n.interval||5e3}abort(){this.#i=!0}async poll({signal:e}={}){let t;if(e&&e.aborted||this.#i)throw new i("polling aborted");if(this.expired())throw new i("the device code %j has expired and the device authorization session has concluded",this.device_code);await new Promise(e=>setTimeout(e,this.#u));try{t=await this.#o.grant({...this.#l,grant_type:"urn:ietf:params:oauth:grant-type:device_code",device_code:this.device_code},{clientAssertionPayload:this.#a,DPoP:this.#s})}catch(t){switch(t instanceof o&&t.error){case"slow_down":this.#u+=5e3;case"authorization_pending":return this.poll({signal:e});default:throw t}}return"id_token"in t&&(await this.#o.decryptIdToken(t),await this.#o.validateIdToken(t,void 0,"token",this.#d)),t}get device_code(){return this.#p.device_code}get user_code(){return this.#p.user_code}get verification_uri(){return this.#p.verification_uri}get verification_uri_complete(){return this.#p.verification_uri_complete}get expires_in(){return Math.max.apply(null,[this.#c-a(),0])}expired(){return 0===this.expires_in}[n.custom](){return`${this.constructor.name} ${n(this.#p,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}}e.exports=s},41217:(e,t,r)=>{let{format:n}=r(73837);class i extends Error{constructor({error_description:e,error:t,error_uri:r,session_state:n,state:i,scope:o},a){super(e?`${t} (${e})`:t),Object.assign(this,{error:t},e&&{error_description:e},r&&{error_uri:r},i&&{state:i},o&&{scope:o},n&&{session_state:n}),a&&Object.defineProperty(this,"response",{value:a}),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}class o extends Error{constructor(...e){if("string"==typeof e[0])super(n(...e));else{let{message:t,printf:r,response:i,...o}=e[0];r?super(n(...r)):super(t),Object.assign(this,o),i&&Object.defineProperty(this,"response",{value:i})}this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}e.exports={OPError:i,RPError:o}},18802:e=>{e.exports={assertSigningAlgValuesSupport:function(e,t,r){if(!t[`${e}_endpoint`])return;let n=`${e}_endpoint_auth_method`,i=`${e}_endpoint_auth_signing_alg`,o=`${e}_endpoint_auth_signing_alg_values_supported`;if(r[n]&&r[n].endsWith("_jwt")&&!r[i]&&!t[o])throw TypeError(`${o} must be configured on the issuer if ${i} is not defined on a client`)},assertIssuerConfiguration:function(e,t){if(!e[t])throw TypeError(`${t} must be configured on the issuer`)}}},33564:e=>{let t;if(Buffer.isEncoding("base64url"))t=(e,t="utf8")=>Buffer.from(e,t).toString("base64url");else{let e=e=>e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");t=(t,r="utf8")=>e(Buffer.from(t,r).toString("base64"))}e.exports.decode=e=>Buffer.from(e,"base64"),e.exports.encode=t},95869:(e,t,r)=>{let n=r(85300),{RPError:i}=r(41217),{assertIssuerConfiguration:o}=r(18802),{random:a}=r(34460),s=r(46177),l=r(49875),{keystores:c}=r(50706),u=r(87177),d=e=>encodeURIComponent(e).replace(/%20/g,"+");async function p(e,t){let r=this[`${e}_endpoint_auth_signing_alg`];if(r||o(this.issuer,`${e}_endpoint_auth_signing_alg_values_supported`),"client_secret_jwt"===this[`${e}_endpoint_auth_method`]){if(!r){let t=this.issuer[`${e}_endpoint_auth_signing_alg_values_supported`];r=Array.isArray(t)&&t.find(e=>/^HS(?:256|384|512)/.test(e))}if(!r)throw new i(`failed to determine a JWS Algorithm to use for ${this[`${e}_endpoint_auth_method`]} Client Assertion`);return new n.CompactSign(Buffer.from(JSON.stringify(t))).setProtectedHeader({alg:r}).sign(this.secretForAlg(r))}let a=await c.get(this);if(!a)throw TypeError("no client jwks provided for signing a client assertion with");if(!r){let t=this.issuer[`${e}_endpoint_auth_signing_alg_values_supported`];r=Array.isArray(t)&&t.find(e=>a.get({alg:e,use:"sig"}))}if(!r)throw new i(`failed to determine a JWS Algorithm to use for ${this[`${e}_endpoint_auth_method`]} Client Assertion`);let s=a.get({alg:r,use:"sig"});if(!s)throw new i(`no key found in client jwks to sign a client assertion with using alg ${r}`);return new n.CompactSign(Buffer.from(JSON.stringify(t))).setProtectedHeader({alg:r,kid:s.jwk&&s.jwk.kid}).sign(await s.keyObject(r))}async function f(e,{clientAssertionPayload:t}={}){switch(this[`${e}_endpoint_auth_method`]){case"self_signed_tls_client_auth":case"tls_client_auth":case"none":return{form:{client_id:this.client_id}};case"client_secret_post":if("string"!=typeof this.client_secret)throw TypeError("client_secret_post client authentication method requires a client_secret");return{form:{client_id:this.client_id,client_secret:this.client_secret}};case"private_key_jwt":case"client_secret_jwt":{let r=s(),n=[...new Set([this.issuer.issuer,this.issuer.token_endpoint].filter(Boolean))],i=await p.call(this,e,{iat:r,exp:r+60,jti:a(),iss:this.client_id,sub:this.client_id,aud:n,...t});return{form:{client_id:this.client_id,client_assertion:i,client_assertion_type:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer"}}}case"client_secret_basic":{if("string"!=typeof this.client_secret)throw TypeError("client_secret_basic client authentication method requires a client_secret");let e=`${d(this.client_id)}:${d(this.client_secret)}`,t=Buffer.from(e).toString("base64");return{headers:{Authorization:`Basic ${t}`}}}default:throw TypeError(`missing, or unsupported, ${e}_endpoint_auth_method`)}}async function h(e,t,{clientAssertionPayload:r,endpointAuthMethod:n=e,DPoP:i}={}){let o;let a=u(t,await f.call(this,n,{clientAssertionPayload:r})),s=this[`${n}_endpoint_auth_method`].includes("tls_client_auth")||"token"===e&&this.tls_client_certificate_bound_access_tokens;if(s&&this.issuer.mtls_endpoint_aliases&&(o=this.issuer.mtls_endpoint_aliases[`${e}_endpoint`]),o=o||this.issuer[`${e}_endpoint`],"form"in a)for(let[e,t]of Object.entries(a.form))void 0===t&&delete a.form[e];return l.call(this,{...a,method:"POST",url:o,headers:{..."revocation"!==e?{Accept:"application/json"}:void 0,...a.headers}},{mTLS:s,DPoP:i})}e.exports={resolveResponseType:function(){let{length:e,0:t}=this.response_types;if(1===e)return t},resolveRedirectUri:function(){let{length:e,0:t}=this.redirect_uris||[];if(1===e)return t},authFor:f,authenticatedPost:h}},75510:e=>{let t=Symbol(),r=Symbol();e.exports={CLOCK_TOLERANCE:r,HTTP_OPTIONS:t}},6234:(e,t,r)=>{let n=r(33564);e.exports=e=>{if("string"!=typeof e||!e)throw TypeError("JWT must be a string");let{0:t,1:r,2:i,length:o}=e.split(".");if(5===o)throw TypeError("encrypted JWTs cannot be decoded");if(3!==o)throw Error("JWTs must have three components");try{return{header:JSON.parse(n.decode(t)),payload:JSON.parse(n.decode(r)),signature:i}}catch(e){throw Error("JWT is malformed")}}},21736:e=>{e.exports=globalThis.structuredClone||(e=>JSON.parse(JSON.stringify(e)))},70082:(e,t,r)=>{let n=r(29329);function i(e,t,...r){for(let o of r)if(n(o))for(let[r,a]of Object.entries(o))"__proto__"!==r&&"constructor"!==r&&(void 0===t[r]&&void 0!==a&&(t[r]=a),e&&n(t[r])&&n(a)&&i(!0,t[r],a));return t}e.exports=i.bind(void 0,!1),e.exports.deep=i.bind(void 0,!0)},34460:(e,t,r)=>{let{createHash:n,randomBytes:i}=r(6113),o=r(33564),a=(e=32)=>o.encode(i(e));e.exports={random:a,state:a,nonce:a,codeVerifier:a,codeChallenge:e=>o.encode(n("sha256").update(e).digest())}},8966:(e,t,r)=>{let n=r(73837),i=r(6113);e.exports=n.types.isKeyObject||(e=>e&&e instanceof i.KeyObject)},29329:e=>{e.exports=e=>!!e&&e.constructor===Object},90093:(e,t,r)=>{let n=r(5155),i=r(99737),{RPError:o}=r(41217),{assertIssuerConfiguration:a}=r(18802),s=r(42230),{keystores:l}=r(50706),c=r(34870),u=r(49875),d=new WeakMap,p=new WeakMap,f=e=>(p.has(e)||p.set(e,new i({max:100})),p.get(e));async function h(e=!1){a(this,"jwks_uri");let t=l.get(this),r=f(this);return e||!t?(d.has(this)||(r.reset(),d.set(this,(async()=>{let e=c(await u.call(this,{method:"GET",responseType:"json",url:this.jwks_uri,headers:{Accept:"application/json, application/jwk-set+json"}}).finally(()=>{d.delete(this)})),t=s.fromJWKS(e,{onlyPublic:!0});return r.set("throttle",!0,6e4),l.set(this,t),t})())),d.get(this)):t}async function y({kid:e,kty:t,alg:r,use:i},{allowMulti:a=!1}={}){let s=f(this),l={kid:e,kty:t,alg:r,use:i},c=n(l,{algorithm:"sha256",ignoreUnknown:!0,unorderedArrays:!0,unorderedSets:!0,respectType:!1}),u=s.get(c)||s.get("throttle"),d=await h.call(this,!u),p=d.all(l);if(delete l.use,0===p.length)throw new o({printf:["no valid key found in issuer's jwks_uri for key parameters %j",l],jwks:d});if(!a&&p.length>1&&!e)throw new o({printf:["multiple matching keys found in issuer's jwks_uri for key parameters %j, kid must be provided in this case",l],jwks:d});return s.set(c,!0),p}e.exports.queryKeyStore=y,e.exports.keystore=h},42230:(e,t,r)=>{let n=r(85300),i=r(21736),o=r(29329),a=Symbol(),s=(e,{alg:t,use:r})=>{let n=0;return t&&e.alg&&n++,r&&e.use&&n++,n};e.exports=class{#f;constructor(e,t){if(e!==a)throw Error("invalid constructor call");this.#f=t}toJWKS(){return{keys:this.map(({jwk:{d:e,p:t,q:r,dp:n,dq:i,qi:o,...a}})=>a)}}all({alg:e,kid:t,use:r}={}){if(!r||!e)throw Error();let n=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:return}}(e),i={alg:e,use:r};return this.filter(i=>{let o=!0;return void 0!==n&&i.jwk.kty!==n&&(o=!1),o&&void 0!==t&&i.jwk.kid!==t&&(o=!1),o&&void 0!==r&&void 0!==i.jwk.use&&i.jwk.use!==r&&(o=!1),o&&i.jwk.alg&&i.jwk.alg!==e?o=!1:i.algorithms.has(e)||(o=!1),o}).sort((e,t)=>s(t,i)-s(e,i))}get(...e){return this.all(...e)[0]}static async fromJWKS(e,{onlyPublic:t=!1,onlyPrivate:r=!1}={}){if(!o(e)||!Array.isArray(e.keys)||e.keys.some(e=>!o(e)||!("kty"in e)))throw TypeError("jwks must be a JSON Web Key Set formatted object");let s=[];for(let o of e.keys){let{kty:e,kid:a,crv:l}=o=i(o),{alg:c,use:u}=o;if("string"==typeof e&&e&&(void 0===u||"sig"===u||"enc"===u)&&("string"==typeof c||void 0===c)&&("string"==typeof a||void 0===a)){if("EC"===e&&"sig"===u)switch(l){case"P-256":c="ES256";break;case"P-384":c="ES384";break;case"P-521":c="ES512"}if("secp256k1"===l&&(u="sig",c="ES256K"),"OKP"===e)switch(l){case"Ed25519":case"Ed448":u="sig",c="EdDSA";break;case"X25519":case"X448":u="enc"}if(c&&!u)switch(!0){case c.startsWith("ECDH"):case c.startsWith("RSA"):u="enc"}if(r&&("oct"===o.kty||!o.d))throw Error("jwks must only contain private keys");t&&(o.d||o.k)||s.push({jwk:{...o,alg:c,use:u},async keyObject(e){if(this[e])return this[e];let t=await n.importJWK(this.jwk,e);return this[e]=t,t},get algorithms(){return Object.defineProperty(this,"algorithms",{value:function(e,t,r,i){if(t)return new Set([t]);switch(r){case"EC":{let t=[];if(("enc"===e||void 0===e)&&(t=t.concat(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"])),"sig"===e||void 0===e)switch(i){case"P-256":case"P-384":t=t.concat([`ES${i.slice(-3)}`]);break;case"P-521":t=t.concat(["ES512"]);break;case"secp256k1":"node:crypto"===n.cryptoRuntime&&(t=t.concat(["ES256K"]))}return new Set(t)}case"OKP":return new Set(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"]);case"RSA":{let t=[];return("enc"===e||void 0===e)&&(t=t.concat(["RSA-OAEP","RSA-OAEP-256","RSA-OAEP-384","RSA-OAEP-512"]),"node:crypto"===n.cryptoRuntime&&(t=t.concat(["RSA1_5"]))),("sig"===e||void 0===e)&&(t=t.concat(["PS256","PS384","PS512","RS256","RS384","RS512"])),new Set(t)}default:throw Error("unreachable")}}(this.jwk.use,this.jwk.alg,this.jwk.kty,this.jwk.crv),enumerable:!0,configurable:!1}),this.algorithms}})}}return new this(a,s)}filter(...e){return this.#f.filter(...e)}find(...e){return this.#f.find(...e)}every(...e){return this.#f.every(...e)}some(...e){return this.#f.some(...e)}map(...e){return this.#f.map(...e)}forEach(...e){return this.#f.forEach(...e)}reduce(...e){return this.#f.reduce(...e)}sort(...e){return this.#f.sort(...e)}*[Symbol.iterator](){for(let e of this.#f)yield e}}},87177:(e,t,r)=>{let n=r(29329);e.exports=function e(t,...r){for(let i of r)if(n(i))for(let[r,o]of Object.entries(i))"__proto__"!==r&&"constructor"!==r&&(n(t[r])&&n(o)?t[r]=e(t[r],o):void 0!==o&&(t[r]=o));return t}},53826:e=>{e.exports=function(e,...t){let r={};for(let n of t)void 0!==e[n]&&(r[n]=e[n]);return r}},34870:(e,t,r)=>{let{STATUS_CODES:n}=r(13685),{format:i}=r(73837),{OPError:o}=r(41217),a=r(37590),s=e=>{let t=a(e.headers["www-authenticate"]);if(t.error)throw new o(t,e)},l=e=>{let t=!1;try{let r;"object"!=typeof e.body||Buffer.isBuffer(e.body)?r=JSON.parse(e.body):r=e.body,(t="string"==typeof r.error&&r.error.length)&&Object.defineProperty(e,"body",{value:r,configurable:!0})}catch(e){}return t};e.exports=function(e,{statusCode:t=200,body:r=!0,bearer:a=!1}={}){if(e.statusCode!==t){if(a&&s(e),l(e))throw new o(e.body,e);throw new o({error:i("expected %i %s, got: %i %s",t,n[t],e.statusCode,n[e.statusCode])},e)}if(r&&!e.body)throw new o({error:i("expected %i %s with body but no body was returned",t,n[t])},e);return e.body}},49875:(e,t,r)=>{let n;let i=r(39491),o=r(63477),a=r(13685),s=r(95687),{once:l}=r(82361),{URL:c}=r(35034),u=r(99737),d=r(77130),{RPError:p}=r(41217),f=r(53826),{deep:h}=r(70082),{HTTP_OPTIONS:y}=r(75510),_=/^[\x21\x23-\x5B\x5D-\x7E]+$/,m=["agent","ca","cert","crl","headers","key","lookup","passphrase","pfx","timeout"],g=(e,t)=>{n=h({},e.length?f(t,...e):t,n)};function v(e,t,r){r&&(e.removeHeader("content-type"),e.setHeader("content-type",r)),t&&(e.removeHeader("content-length"),e.setHeader("content-length",Buffer.byteLength(t)),e.write(t)),e.end()}g([],{headers:{"User-Agent":`${d.name}/${d.version} (${d.homepage})`,"Accept-Encoding":"identity"},timeout:3500});let w=new u({max:100});e.exports=async function(e,{accessToken:t,mTLS:r=!1,DPoP:u}={}){let d,g,b,E,S,k,P;try{d=new c(e.url),delete e.url,i(/^(https?:)$/.test(d.protocol))}catch(e){throw TypeError("only valid absolute URLs can be requested")}let A=this[y],O=e,T=`${d.origin}${d.pathname}`;if(u&&"dpopProof"in this&&(O.headers=O.headers||{},O.headers.DPoP=await this.dpopProof({htu:`${d.origin}${d.pathname}`,htm:e.method,nonce:w.get(T)},u,t)),A&&(g=f(A.call(this,d,h({},O,n)),...m)),O=h({},g,O,n),r&&!O.pfx&&!(O.key&&O.cert))throw TypeError("mutual-TLS certificate and key not set");if(O.searchParams)for(let[e,t]of Object.entries(O.searchParams))d.searchParams.delete(e),d.searchParams.set(e,t);for(let[e,t]of({form:E,responseType:b,json:S,body:k,...O}=O,Object.entries(O.headers||{})))void 0===t&&delete O.headers[e];let I=("https:"===d.protocol?s.request:a.request)(d.href,O);return(async()=>{if(S?v(I,JSON.stringify(S),"application/json"):E?v(I,o.stringify(E),"application/x-www-form-urlencoded"):k?v(I,k):v(I),[P]=await Promise.race([l(I,"response"),l(I,"timeout")]),!P)throw I.destroy(),new p(`outgoing request timed out after ${O.timeout}ms`);let e=[];for await(let t of P)e.push(t);if(e.length)switch(b){case"json":Object.defineProperty(P,"body",{get(){let t=Buffer.concat(e);try{t=JSON.parse(t)}catch(e){throw Object.defineProperty(e,"response",{value:P}),e}finally{Object.defineProperty(P,"body",{value:t,configurable:!0})}return t},configurable:!0});break;case void 0:case"buffer":Object.defineProperty(P,"body",{get(){let t=Buffer.concat(e);return Object.defineProperty(P,"body",{value:t,configurable:!0}),t},configurable:!0});break;default:throw TypeError("unsupported responseType request option")}return P})().catch(e=>{throw P&&Object.defineProperty(e,"response",{value:P}),e}).finally(()=>{let e=P&&P.headers["dpop-nonce"];e&&_.test(e)&&w.set(T,e)})},e.exports.setDefaults=g.bind(void 0,m)},46177:e=>{e.exports=()=>Math.floor(Date.now()/1e3)},50706:e=>{e.exports.keystores=new WeakMap},34065:e=>{let t=/^\d+$/;e.exports=function(e){if("string"!=typeof e)throw TypeError("input must be a string");return(!function(e){if(e.includes("://"))return!0;let r=e.replace(/(\/|\?)/g,"#").split("#")[0];if(r.includes(":")){let e=r.indexOf(":"),n=r.slice(e+1);if(!t.test(n))return!0}return!1}(e)?!function(e){if(!e.includes("@"))return!1;let t=e.split("@"),r=t[t.length-1];return!(r.includes(":")||r.includes("/")||r.includes("?"))}(e)?`https://${e}`:`acct:${e}`:e).split("#")[0]}},37590:e=>{let t=/(\w+)=("[^"]*")/g;e.exports=e=>{let r={};try{for(;null!==t.exec(e);)RegExp.$1&&RegExp.$2&&(r[RegExp.$1]=RegExp.$2.slice(1,-1))}catch(e){}return r}},48838:(e,t,r)=>{let n=r(32077),{OPError:i,RPError:o}=r(41217),a=r(64286),s=r(71541),{CLOCK_TOLERANCE:l,HTTP_OPTIONS:c}=r(75510),u=r(34460),{setDefaults:d}=r(49875);e.exports={Issuer:n,Strategy:a,TokenSet:s,errors:{OPError:i,RPError:o},custom:{setHttpOptionsDefaults:d,http_options:c,clock_tolerance:l},generators:u}},32077:(e,t,r)=>{let{inspect:n}=r(73837),i=r(35034),{RPError:o}=r(41217),a=r(65631),s=r(39921),l=r(34870),c=r(34065),u=r(49875),d=r(21736),{keystore:p}=r(90093),f=["https://login.microsoftonline.com/common/.well-known/openid-configuration","https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration"],h=Symbol(),y={claim_types_supported:["normal"],claims_parameter_supported:!1,grant_types_supported:["authorization_code","implicit"],request_parameter_supported:!1,request_uri_parameter_supported:!0,require_request_uri_registration:!1,response_modes_supported:["query","fragment"],token_endpoint_auth_methods_supported:["client_secret_basic"]};class _{#e;constructor(e={}){let t=e[h];delete e[h],["introspection","revocation"].forEach(t=>{e[`${t}_endpoint`]&&void 0===e[`${t}_endpoint_auth_methods_supported`]&&void 0===e[`${t}_endpoint_auth_signing_alg_values_supported`]&&(e.token_endpoint_auth_methods_supported&&(e[`${t}_endpoint_auth_methods_supported`]=e.token_endpoint_auth_methods_supported),e.token_endpoint_auth_signing_alg_values_supported&&(e[`${t}_endpoint_auth_signing_alg_values_supported`]=e.token_endpoint_auth_signing_alg_values_supported))}),this.#e=new Map,Object.entries(e).forEach(([e,t])=>{this.#e.set(e,t),this[e]||Object.defineProperty(this,e,{get(){return this.#e.get(e)},enumerable:!0})}),s.set(this.issuer,this);let r=a(this,t);Object.defineProperties(this,{Client:{value:r,enumerable:!0},FAPI1Client:{value:class extends r{},enumerable:!0}})}get metadata(){return d(Object.fromEntries(this.#e.entries()))}static async webfinger(e){let t=c(e),{host:r}=i.parse(t),n=`https://${r}/.well-known/webfinger`,a=l(await u.call(this,{method:"GET",url:n,responseType:"json",searchParams:{resource:t,rel:"http://openid.net/specs/connect/1.0/issuer"},headers:{Accept:"application/json"}})),d=Array.isArray(a.links)&&a.links.find(e=>"object"==typeof e&&"http://openid.net/specs/connect/1.0/issuer"===e.rel&&e.href);if(!d)throw new o({message:"no issuer found in webfinger response",body:a});if("string"!=typeof d.href||!d.href.startsWith("https://"))throw new o({printf:["invalid issuer location %s",d.href],body:a});let p=d.href;if(s.has(p))return s.get(p);let f=await this.discover(p);if(f.issuer!==p)throw s.del(f.issuer),new o("discovered issuer mismatch, expected %s, got: %s",p,f.issuer);return f}static async discover(e){let t=function(e){let t=i.parse(e);if(t.pathname.includes("/.well-known/"))return e;{let e;return e=t.pathname.endsWith("/")?`${t.pathname}.well-known/openid-configuration`:`${t.pathname}/.well-known/openid-configuration`,i.format({...t,pathname:e})}}(e),r=l(await u.call(this,{method:"GET",responseType:"json",url:t,headers:{Accept:"application/json"}}));return new _({...y,...r,[h]:!!f.find(e=>t.startsWith(e))})}async reloadJwksUri(){await p.call(this,!0)}[n.custom](){return`${this.constructor.name} ${n(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}}e.exports=_},39921:(e,t,r)=>{let n=r(99737);e.exports=new n({max:100})},64286:(e,t,r)=>{let n=r(35034),{format:i}=r(73837),o=r(21736),{RPError:a,OPError:s}=r(41217),{BaseClient:l}=r(65631),{random:c,codeChallenge:u}=r(34460),d=r(53826),{resolveResponseType:p,resolveRedirectUri:f}=r(95869);function h(e,t,r={}){e?this.error(e):t?this.success(t,r):this.fail(r)}function y({client:e,params:t={},passReqToCallback:r=!1,sessionKey:i,usePKCE:a=!0,extras:s={}}={},c){if(!(e instanceof l))throw TypeError("client must be an instance of openid-client Client");if("function"!=typeof c)throw TypeError("verify callback must be a function");if(!e.issuer||!e.issuer.issuer)throw TypeError("client must have an issuer with an identifier");if(this._client=e,this._issuer=e.issuer,this._verify=c,this._passReqToCallback=r,this._usePKCE=a,this._key=i||`oidc:${n.parse(this._issuer.issuer).hostname}`,this._params=o(t),delete this._params.state,delete this._params.nonce,this._extras=o(s),this._params.response_type||(this._params.response_type=p.call(e)),this._params.redirect_uri||(this._params.redirect_uri=f.call(e)),this._params.scope||(this._params.scope="openid"),!0===this._usePKCE){let e=!!Array.isArray(this._issuer.code_challenge_methods_supported)&&this._issuer.code_challenge_methods_supported;if(e&&e.includes("S256"))this._usePKCE="S256";else if(e&&e.includes("plain"))this._usePKCE="plain";else if(e)throw TypeError("neither code_challenge_method supported by the client is supported by the issuer");else this._usePKCE="S256"}else if("string"==typeof this._usePKCE&&!["plain","S256"].includes(this._usePKCE))throw TypeError(`${this._usePKCE} is not valid/implemented PKCE code_challenge_method`);this.name=n.parse(e.issuer.issuer).hostname}y.prototype.authenticate=function(e,t){(async()=>{let r=this._client;if(!e.session)throw TypeError("authentication requires session support");let n=r.callbackParams(e),o=this._key,{0:s,length:l}=Object.keys(n);if(0===l||1===l&&"iss"===s){let n={state:c(),...this._params,...t};if(!n.nonce&&n.response_type.includes("id_token")&&(n.nonce=c()),e.session[o]=d(n,"nonce","state","max_age","response_type"),this._usePKCE&&n.response_type.includes("code")){let t=c();switch(e.session[o].code_verifier=t,this._usePKCE){case"S256":n.code_challenge=u(t),n.code_challenge_method="S256";break;case"plain":n.code_challenge=t}}this.redirect(r.authorizationUrl(n));return}let p=e.session[o];if(0===Object.keys(p||{}).length)throw Error(i('did not find expected authorization request details in session, req.session["%s"] is %j',o,p));let{state:f,nonce:y,max_age:_,code_verifier:m,response_type:g}=p;try{delete e.session[o]}catch(e){}let v={redirect_uri:this._params.redirect_uri,...t},w=await r.callback(v.redirect_uri,n,{state:f,nonce:y,max_age:_,code_verifier:m,response_type:g},this._extras),b=this._passReqToCallback,E=this._verify.length>(b?3:2)&&r.issuer.userinfo_endpoint,S=[w,h.bind(this)];if(E){if(!w.access_token)throw new a({message:"expected access_token to be returned when asking for userinfo in verify callback",tokenset:w});let e=await r.userinfo(w);S.splice(1,0,e)}b&&S.unshift(e),this._verify(...S)})().catch(e=>{e instanceof s&&"server_error"!==e.error&&!e.error.startsWith("invalid")||e instanceof a?this.fail(e):this.error(e)})},e.exports=y},71541:(e,t,r)=>{let n=r(33564),i=r(46177);class o{constructor(e){Object.assign(this,e);let{constructor:t,...r}=Object.getOwnPropertyDescriptors(this.constructor.prototype);Object.defineProperties(this,r)}set expires_in(e){this.expires_at=i()+Number(e)}get expires_in(){return Math.max.apply(null,[this.expires_at-i(),0])}expired(){return 0===this.expires_in}claims(){if(!this.id_token)throw TypeError("id_token not present in TokenSet");return JSON.parse(n.decode(this.id_token.split(".")[1]))}}e.exports=o},99737:(e,t,r)=>{"use strict";let n=r(65543),i=Symbol("max"),o=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),l=Symbol("maxAge"),c=Symbol("dispose"),u=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),f=Symbol("updateAgeOnGet"),h=()=>1;class y{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw TypeError("max must be a non-negative number");this[i]=e.max||1/0;let t=e.length||h;if(this[a]="function"!=typeof t?h:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[c]=e.dispose,this[u]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw TypeError("max must be a non-negative number");this[i]=e||1/0,g(this)}get max(){return this[i]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw TypeError("maxAge must be a non-negative number");this[l]=e,g(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=h),e!==this[a]&&(this[a]=e,this[o]=0,this[d].forEach(e=>{e.length=this[a](e.value,e.key),this[o]+=e.length})),g(this)}get lengthCalculator(){return this[a]}get length(){return this[o]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){let n=r.prev;b(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){let n=r.next;b(this,e,r,t),r=n}}keys(){return this[d].toArray().map(e=>e.key)}values(){return this[d].toArray().map(e=>e.value)}reset(){this[c]&&this[d]&&this[d].length&&this[d].forEach(e=>this[c](e.key,e.value)),this[p]=new Map,this[d]=new n,this[o]=0}dump(){return this[d].map(e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[l])&&"number"!=typeof r)throw TypeError("maxAge must be a number");let n=r?Date.now():0,s=this[a](t,e);if(this[p].has(e)){if(s>this[i])return v(this,this[p].get(e)),!1;let a=this[p].get(e).value;return this[c]&&!this[u]&&this[c](e,a.value),a.now=n,a.maxAge=r,a.value=t,this[o]+=s-a.length,a.length=s,this.get(e),g(this),!0}let f=new w(e,t,s,n,r);return f.length>this[i]?(this[c]&&this[c](e,t),!1):(this[o]+=f.length,this[d].unshift(f),this[p].set(e,this[d].head),g(this),!0)}has(e){return!!this[p].has(e)&&!m(this,this[p].get(e).value)}get(e){return _(this,e,!0)}peek(e){return _(this,e,!1)}pop(){let e=this[d].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[p].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{let e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[p].forEach((e,t)=>_(this,t,!1))}}let _=(e,t,r)=>{let n=e[p].get(t);if(n){let t=n.value;if(m(e,t)){if(v(e,n),!e[s])return}else r&&(e[f]&&(n.value.now=Date.now()),e[d].unshiftNode(n));return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[l]&&r>e[l]},g=e=>{if(e[o]>e[i])for(let t=e[d].tail;e[o]>e[i]&&null!==t;){let r=t.prev;v(e,t),t=r}},v=(e,t)=>{if(t){let r=t.value;e[c]&&e[c](r.key,r.value),e[o]-=r.length,e[p].delete(r.key),e[d].removeNode(t)}};class w{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}let b=(e,t,r,n)=>{let i=r.value;m(e,i)&&(v(e,r),e[s]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};e.exports=y},5155:(e,t,r)=>{"use strict";var n=r(6113);function i(e,t){return t=s(e,t),function(e,t){if(void 0===(r="passthrough"!==t.algorithm?n.createHash(t.algorithm):new u).write&&(r.write=r.update,r.end=r.update),c(t,r).dispatch(e),r.update||r.end(""),r.digest)return r.digest("buffer"===t.encoding?void 0:t.encoding);var r,i=r.read();return"buffer"===t.encoding?i:i.toString(t.encoding)}(e,t)}(t=e.exports=i).sha1=function(e){return i(e)},t.keys=function(e){return i(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},t.MD5=function(e){return i(e,{algorithm:"md5",encoding:"hex"})},t.keysMD5=function(e){return i(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var o=n.getHashes?n.getHashes().slice():["sha1","md5"];o.push("passthrough");var a=["buffer","hex","binary","base64"];function s(e,t){t=t||{};var r={};if(r.algorithm=t.algorithm||"sha1",r.encoding=t.encoding||"hex",r.excludeValues=!!t.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=!0===t.ignoreUnknown,r.respectType=!1!==t.respectType,r.respectFunctionNames=!1!==t.respectFunctionNames,r.respectFunctionProperties=!1!==t.respectFunctionProperties,r.unorderedArrays=!0===t.unorderedArrays,r.unorderedSets=!1!==t.unorderedSets,r.unorderedObjects=!1!==t.unorderedObjects,r.replacer=t.replacer||void 0,r.excludeKeys=t.excludeKeys||void 0,void 0===e)throw Error("Object argument required.");for(var n=0;n<o.length;++n)o[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=o[n]);if(-1===o.indexOf(r.algorithm))throw Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+o.join(", "));if(-1===a.indexOf(r.encoding)&&"passthrough"!==r.algorithm)throw Error('Encoding "'+r.encoding+'"  not supported. supported values: '+a.join(", "));return r}function l(e){return"function"==typeof e&&null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function c(e,t,r){r=r||[];var n=function(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")};return{dispatch:function(t){e.replacer&&(t=e.replacer(t));var r=typeof t;return null===t&&(r="null"),this["_"+r](t)},_object:function(t){var i=Object.prototype.toString.call(t),o=/\[object (.*)\]/i.exec(i);o=(o=o?o[1]:"unknown:["+i+"]").toLowerCase();var a=null;if((a=r.indexOf(t))>=0)return this.dispatch("[CIRCULAR:"+a+"]");if(r.push(t),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(t))return n("buffer:"),n(t);if("object"!==o&&"function"!==o&&"asyncfunction"!==o){if(this["_"+o])this["_"+o](t);else if(e.ignoreUnknown)return n("["+o+"]");else throw Error('Unknown object type "'+o+'"')}else{var s=Object.keys(t);e.unorderedObjects&&(s=s.sort()),!1===e.respectType||l(t)||s.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(s=s.filter(function(t){return!e.excludeKeys(t)})),n("object:"+s.length+":");var c=this;return s.forEach(function(r){c.dispatch(r),n(":"),e.excludeValues||c.dispatch(t[r]),n(",")})}},_array:function(t,i){i=void 0!==i?i:!1!==e.unorderedArrays;var o=this;if(n("array:"+t.length+":"),!i||t.length<=1)return t.forEach(function(e){return o.dispatch(e)});var a=[],s=t.map(function(t){var n=new u,i=r.slice();return c(e,n,i).dispatch(t),a=a.concat(i.slice(r.length)),n.read().toString()});return r=r.concat(a),s.sort(),this._array(s,!1)},_date:function(e){return n("date:"+e.toJSON())},_symbol:function(e){return n("symbol:"+e.toString())},_error:function(e){return n("error:"+e.toString())},_boolean:function(e){return n("bool:"+e.toString())},_string:function(e){n("string:"+e.length+":"),n(e.toString())},_function:function(t){n("fn:"),l(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return n("number:"+e.toString())},_xml:function(e){return n("xml:"+e.toString())},_null:function(){return n("Null")},_undefined:function(){return n("Undefined")},_regexp:function(e){return n("regex:"+e.toString())},_uint8array:function(e){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return n("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return n("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return n("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return n("url:"+e.toString(),"utf8")},_map:function(t){n("map:");var r=Array.from(t);return this._array(r,!1!==e.unorderedSets)},_set:function(t){n("set:");var r=Array.from(t);return this._array(r,!1!==e.unorderedSets)},_file:function(e){return n("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(e.ignoreUnknown)return n("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return n("domwindow")},_bigint:function(e){return n("bigint:"+e.toString())},_process:function(){return n("process")},_timer:function(){return n("timer")},_pipe:function(){return n("pipe")},_tcp:function(){return n("tcp")},_udp:function(){return n("udp")},_tty:function(){return n("tty")},_statwatcher:function(){return n("statwatcher")},_securecontext:function(){return n("securecontext")},_connection:function(){return n("connection")},_zlib:function(){return n("zlib")},_context:function(){return n("context")},_nodescript:function(){return n("nodescript")},_httpparser:function(){return n("httpparser")},_dataview:function(){return n("dataview")},_signal:function(){return n("signal")},_fsevent:function(){return n("fsevent")},_tlswrap:function(){return n("tlswrap")}}}function u(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}t.writeToStream=function(e,t,r){return void 0===r&&(r=t,t={}),c(t=s(e,t),r).dispatch(e)}},73959:(e,t,r)=>{let n;let{strict:i}=r(39491),{createHash:o}=r(6113),{format:a}=r(73837),s=r(56265);if(Buffer.isEncoding("base64url"))n=e=>e.toString("base64url");else{let e=e=>e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");n=t=>e(t.toString("base64"))}function l(e,t,r){let i=(function(e,t){switch(e){case"HS256":case"RS256":case"PS256":case"ES256":case"ES256K":return o("sha256");case"HS384":case"RS384":case"PS384":case"ES384":return o("sha384");case"HS512":case"RS512":case"PS512":case"ES512":return o("sha512");case"EdDSA":switch(t){case"Ed25519":return o("sha512");case"Ed448":if(!s)throw TypeError("Ed448 *_hash calculation is not supported in your Node.js runtime version");return o("shake256",{outputLength:114});default:throw TypeError("unrecognized or invalid EdDSA curve provided")}default:throw TypeError("unrecognized or invalid JWS algorithm provided")}})(t,r).update(e).digest();return n(i.slice(0,i.length/2))}e.exports={validate:function(e,t,r,n,o){let s,c;if("string"!=typeof e.claim||!e.claim)throw TypeError("names.claim must be a non-empty string");if("string"!=typeof e.source||!e.source)throw TypeError("names.source must be a non-empty string");i("string"==typeof t&&t,`${e.claim} must be a non-empty string`),i("string"==typeof r&&r,`${e.source} must be a non-empty string`);try{s=l(r,n,o)}catch(t){c=a("%s could not be validated (%s)",e.claim,t.message)}c=c||a("%s mismatch, expected %s, got: %s",e.claim,s,t),i.equal(s,t,c)},generate:l}},56265:(e,t,r)=>{let n=r(6113),[i,o]=process.version.substring(1).split(".").map(e=>parseInt(e,10)),a=(i>12||12===i&&o>=8)&&n.getHashes().includes("shake256");e.exports=a},24399:function(e,t,r){(function(e,t){var r=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,n=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,i=/[\s\n\\/='"\0<>]/,o=/^xlink:?./,a=/["&<]/;function s(e){if(!1===a.test(e+=""))return e;for(var t=0,r=0,n="",i="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=i,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var l=function(e,t){return String(e).replace(/(\n+)/g,"$1"+(t||"	"))},c=function(e,t,r){return String(e).length>(t||40)||!r&&-1!==String(e).indexOf("\n")||-1!==String(e).indexOf("<")},u={},d=/([A-Z])/g;function p(e){var t="";for(var n in e){var i=e[n];null!=i&&""!==i&&(t&&(t+=" "),t+="-"==n[0]?n:u[n]||(u[n]=n.replace(d,"-$1").toLowerCase()),t="number"==typeof i&&!1===r.test(n)?t+": "+i+"px;":t+": "+i+";")}return t||void 0}function f(e,t){return Array.isArray(t)?t.reduce(f,e):null!=t&&!1!==t&&e.push(t),e}function h(){this.__d=!0}function y(e,t){return{__v:e,context:t,props:e.props,setState:h,forceUpdate:h,__d:!0,__h:[]}}function _(e,t){var r=e.contextType,n=r&&t[r.__c];return null!=r?n?n.props.value:r.__:t}var m=[],g={shallow:!0};b.render=b;var v=function(e,t){return b(e,t,g)},w=[];function b(e,r,a){r=r||{};var u,d=t.options.__s;return t.options.__s=!0,u=a&&(a.pretty||a.voidElements||a.sortAttributes||a.shallow||a.allAttributes||a.xml||a.attributeHook)?function e(r,a,u,d,h,g){if(null==r||"boolean"==typeof r)return"";if("object"!=typeof r)return s(r);var v=u.pretty,w=v&&"string"==typeof v?v:"	";if(Array.isArray(r)){for(var b="",E=0;E<r.length;E++)v&&E>0&&(b+="\n"),b+=e(r[E],a,u,d,h,g);return b}var S,k=r.type,P=r.props,A=!1;if("function"==typeof k){if(A=!0,!u.shallow||!d&&!1!==u.renderRootComponent){if(k===t.Fragment){var O=[];return f(O,r.props.children),e(O,a,u,!1!==u.shallowHighOrder,h,g)}var T,I=r.__c=y(r,a);t.options.__b&&t.options.__b(r);var x=t.options.__r;if(k.prototype&&"function"==typeof k.prototype.render){var C=_(k,a);(I=r.__c=new k(P,C)).__v=r,I._dirty=I.__d=!0,I.props=P,null==I.state&&(I.state={}),null==I._nextState&&null==I.__s&&(I._nextState=I.__s=I.state),I.context=C,k.getDerivedStateFromProps?I.state=Object.assign({},I.state,k.getDerivedStateFromProps(I.props,I.state)):I.componentWillMount&&(I.componentWillMount(),I.state=I._nextState!==I.state?I._nextState:I.__s!==I.state?I.__s:I.state),x&&x(r),T=I.render(I.props,I.state,I.context)}else for(var R=_(k,a),j=0;I.__d&&j++<25;)I.__d=!1,x&&x(r),T=k.call(r.__c,P,R);return I.getChildContext&&(a=Object.assign({},a,I.getChildContext())),t.options.diffed&&t.options.diffed(r),e(T,a,u,!1!==u.shallowHighOrder,h,g)}k=(S=k).displayName||S!==Function&&S.name||function(e){var t=(Function.prototype.toString.call(e).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!t){for(var r=-1,n=m.length;n--;)if(m[n]===e){r=n;break}r<0&&(r=m.push(e)-1),t="UnnamedComponent"+r}return t}(S)}var N,U,W="<"+k;if(P){var M=Object.keys(P);u&&!0===u.sortAttributes&&M.sort();for(var J=0;J<M.length;J++){var D=M[J],H=P[D];if("children"!==D){if(!i.test(D)&&(u&&u.allAttributes||"key"!==D&&"ref"!==D&&"__self"!==D&&"__source"!==D)){if("defaultValue"===D)D="value";else if("defaultChecked"===D)D="checked";else if("defaultSelected"===D)D="selected";else if("className"===D){if(void 0!==P.class)continue;D="class"}else h&&o.test(D)&&(D=D.toLowerCase().replace(/^xlink:?/,"xlink:"));if("htmlFor"===D){if(P.for)continue;D="for"}"style"===D&&H&&"object"==typeof H&&(H=p(H)),"a"===D[0]&&"r"===D[1]&&"boolean"==typeof H&&(H=String(H));var K=u.attributeHook&&u.attributeHook(D,H,a,u,A);if(K||""===K)W+=K;else if("dangerouslySetInnerHTML"===D)U=H&&H.__html;else if("textarea"===k&&"value"===D)N=H;else if((H||0===H||""===H)&&"function"!=typeof H){if(!(!0!==H&&""!==H||(H=D,u&&u.xml))){W=W+" "+D;continue}if("value"===D){if("select"===k){g=H;continue}"option"===k&&g==H&&void 0===P.selected&&(W+=" selected")}W=W+" "+D+'="'+s(H)+'"'}}}else N=H}}if(v){var L=W.replace(/\n\s*/," ");L===W||~L.indexOf("\n")?v&&~W.indexOf("\n")&&(W+="\n"):W=L}if(W+=">",i.test(k))throw Error(k+" is not a valid HTML tag name in "+W);var $,B=n.test(k)||u.voidElements&&u.voidElements.test(k),z=[];if(U)v&&c(U)&&(U="\n"+w+l(U,w)),W+=U;else if(null!=N&&f($=[],N).length){for(var F=v&&~W.indexOf("\n"),q=!1,G=0;G<$.length;G++){var V=$[G];if(null!=V&&!1!==V){var Y=e(V,a,u,!0,"svg"===k||"foreignObject"!==k&&h,g);if(v&&!F&&c(Y)&&(F=!0),Y){if(v){var X=Y.length>0&&"<"!=Y[0];q&&X?z[z.length-1]+=Y:z.push(Y),q=X}else z.push(Y)}}}if(v&&F)for(var Z=z.length;Z--;)z[Z]="\n"+w+l(z[Z],w)}if(z.length||U)W+=z.join("");else if(u&&u.xml)return W.substring(0,W.length-1)+" />";return!B||$||U?(v&&~W.indexOf("\n")&&(W+="\n"),W=W+"</"+k+">"):W=W.replace(/>$/," />"),W}(e,r,a):function e(r,a,l,c){if(null==r||!0===r||!1===r||""===r)return"";if("object"!=typeof r)return s(r);if(E(r)){for(var u="",d=0;d<r.length;d++)u+=e(r[d],a,l,c);return u}t.options.__b&&t.options.__b(r);var f=r.type,h=r.props;if("function"==typeof f){if(f===t.Fragment)return e(r.props.children,a,l,c);k=f.prototype&&"function"==typeof f.prototype.render?(m=a,v=_(g=r.type,m),w=new g(r.props,v),r.__c=w,w.__v=r,w.__d=!0,w.props=r.props,null==w.state&&(w.state={}),null==w.__s&&(w.__s=w.state),w.context=v,g.getDerivedStateFromProps?w.state=S({},w.state,g.getDerivedStateFromProps(w.props,w.state)):w.componentWillMount&&(w.componentWillMount(),w.state=w.__s!==w.state?w.__s:w.state),(b=t.options.__r)&&b(r),w.render(w.props,w.state,w.context)):function(e,r){var n,i=y(e,r),o=_(e.type,r);e.__c=i;for(var a=t.options.__r,s=0;i.__d&&s++<25;)i.__d=!1,a&&a(e),n=e.type.call(i,e.props,o);return n}(r,a);var m,g,v,w,b,k,P=r.__c;P.getChildContext&&(a=S({},a,P.getChildContext()));var A=e(k,a,l,c);return t.options.diffed&&t.options.diffed(r),A}var O,T,I="<";if(I+=f,h)for(var x in O=h.children,h){var C,R,j,N=h[x];if(!("key"===x||"ref"===x||"__self"===x||"__source"===x||"children"===x||"className"===x&&"class"in h||"htmlFor"===x&&"for"in h||i.test(x))){if(R=x="className"===(C=x)?"class":"htmlFor"===C?"for":"defaultValue"===C?"value":"defaultChecked"===C?"checked":"defaultSelected"===C?"selected":l&&o.test(C)?C.toLowerCase().replace(/^xlink:?/,"xlink:"):C,j=N,N="style"===R&&null!=j&&"object"==typeof j?p(j):"a"===R[0]&&"r"===R[1]&&"boolean"==typeof j?String(j):j,"dangerouslySetInnerHTML"===x)T=N&&N.__html;else if("textarea"===f&&"value"===x)O=N;else if((N||0===N||""===N)&&"function"!=typeof N){if(!0===N||""===N){N=x,I=I+" "+x;continue}if("value"===x){if("select"===f){c=N;continue}"option"!==f||c!=N||"selected"in h||(I+=" selected")}I=I+" "+x+'="'+s(N)+'"'}}}var U=I;if(I+=">",i.test(f))throw Error(f+" is not a valid HTML tag name in "+I);var W="",M=!1;if(T)W+=T,M=!0;else if("string"==typeof O)W+=s(O),M=!0;else if(E(O))for(var J=0;J<O.length;J++){var D=O[J];if(null!=D&&!1!==D){var H=e(D,a,"svg"===f||"foreignObject"!==f&&l,c);H&&(W+=H,M=!0)}}else if(null!=O&&!1!==O&&!0!==O){var K=e(O,a,"svg"===f||"foreignObject"!==f&&l,c);K&&(W+=K,M=!0)}if(t.options.diffed&&t.options.diffed(r),M)I+=W;else if(n.test(f))return U+" />";return I+"</"+f+">"}(e,r,!1,void 0),t.options.__c&&t.options.__c(e,w),t.options.__s=d,w.length=0,u}var E=Array.isArray,S=Object.assign;b.shallowRender=v,e.default=b,e.render=b,e.renderToStaticMarkup=b,e.renderToString=b,e.shallowRender=v})(t,r(19425))},30401:(e,t,r)=>{e.exports=r(24399).default},19425:(e,t)=>{var r,n,i,o,a,s,l,c,u,d,p,f,h={},y=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,m=Array.isArray;function g(e,t){for(var r in t)e[r]=t[r];return e}function v(e){var t=e.parentNode;t&&t.removeChild(e)}function w(e,t,n){var i,o,a,s={};for(a in t)"key"==a?i=t[a]:"ref"==a?o=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===s[a]&&(s[a]=e.defaultProps[a]);return b(e,s,i,o,null)}function b(e,t,r,o,a){var s={type:e,props:t,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==a?++i:a,__i:-1,__u:0};return null==a&&null!=n.vnode&&n.vnode(s),s}function E(e){return e.children}function S(e,t){this.props=e,this.context=t}function k(e,t){if(null==t)return e.__?k(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?k(e):null}function P(e){(!e.__d&&(e.__d=!0)&&a.push(e)&&!A.__r++||s!==n.debounceRendering)&&((s=n.debounceRendering)||l)(A)}function A(){var e,t,r,i,o,s,l,u;for(a.sort(c);e=a.shift();)e.__d&&(t=a.length,i=void 0,s=(o=(r=e).__v).__e,l=[],u=[],r.__P&&((i=g({},o)).__v=o.__v+1,n.vnode&&n.vnode(i),C(r.__P,i,o,r.__n,r.__P.namespaceURI,32&o.__u?[s]:null,l,null==s?k(o):s,!!(32&o.__u),u),i.__v=o.__v,i.__.__k[i.__i]=i,R(l,i,u),i.__e!=s&&function e(t){var r,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(n=t.__k[r])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return e(t)}}(i)),a.length>t&&a.sort(c));A.__r=0}function O(e,t,r,n,i,o,a,s,l,c,u){var d,p,f,_,g,v=n&&n.__k||y,w=t.length;for(r.__d=l,function(e,t,r){var n,i,o,a,s,l=t.length,c=r.length,u=c,d=0;for(e.__k=[],n=0;n<l;n++)a=n+d,null!=(i=e.__k[n]=null==(i=t[n])||"boolean"==typeof i||"function"==typeof i?null:"string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?b(null,i,null,null,null):m(i)?b(E,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?b(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=e,i.__b=e.__b+1,s=function(e,t,r,n){var i=e.key,o=e.type,a=r-1,s=r+1,l=t[r];if(null===l||l&&i==l.key&&o===l.type&&0==(131072&l.__u))return r;if(n>(null!=l&&0==(131072&l.__u)?1:0))for(;a>=0||s<t.length;){if(a>=0){if((l=t[a])&&0==(131072&l.__u)&&i==l.key&&o===l.type)return a;a--}if(s<t.length){if((l=t[s])&&0==(131072&l.__u)&&i==l.key&&o===l.type)return s;s++}}return -1}(i,r,a,u),i.__i=s,o=null,-1!==s&&(u--,(o=r[s])&&(o.__u|=131072)),null==o||null===o.__v?(-1==s&&d--,"function"!=typeof i.type&&(i.__u|=65536)):s!==a&&(s==a-1?d=s-a:s==a+1?d++:s>a?u>l-a?d+=s-a:d--:s<a&&d++,s!==n+d&&(i.__u|=65536))):(o=r[a])&&null==o.key&&o.__e&&0==(131072&o.__u)&&(o.__e==e.__d&&(e.__d=k(o)),N(o,o,!1),r[a]=null,u--);if(u)for(n=0;n<c;n++)null!=(o=r[n])&&0==(131072&o.__u)&&(o.__e==e.__d&&(e.__d=k(o)),N(o,o))}(r,t,v),l=r.__d,d=0;d<w;d++)null!=(f=r.__k[d])&&"boolean"!=typeof f&&"function"!=typeof f&&(p=-1===f.__i?h:v[f.__i]||h,f.__i=d,C(e,f,p,i,o,a,s,l,c,u),_=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&j(p.ref,null,f),u.push(f.ref,f.__c||_,f)),null==g&&null!=_&&(g=_),65536&f.__u||p.__k===f.__k?(l&&"string"==typeof f.type&&!e.contains(l)&&(l=k(p)),l=function e(t,r,n){var i,o;if("function"==typeof t.type){for(i=t.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=t,r=e(i[o],r,n));return r}t.__e!=r&&(n.insertBefore(t.__e,r||null),r=t.__e);do r=r&&r.nextSibling;while(null!=r&&8===r.nodeType);return r}(f,l,e)):"function"==typeof f.type&&void 0!==f.__d?l=f.__d:_&&(l=_.nextSibling),f.__d=void 0,f.__u&=-196609);r.__d=l,r.__e=g}function T(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||_.test(t)?r:r+"px"}function I(e,t,r,n,i){var o;e:if("style"===t){if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||T(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||T(e.style,t,r[t])}}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase() in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=r,r?n?r.t=n.t:(r.t=u,e.addEventListener(t,o?p:d,o)):e.removeEventListener(t,o?p:d,o);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function x(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.u)t.u=u++;else if(t.u<r.t)return;return r(n.event?n.event(t):t)}}}function C(e,t,i,o,a,s,l,c,u,d){var p,f,y,_,w,b,P,A,T,x,C,R,j,N,W,M,J=t.type;if(void 0!==t.constructor)return null;128&i.__u&&(u=!!(32&i.__u),s=[c=t.__e=i.__e]),(p=n.__b)&&p(t);e:if("function"==typeof J)try{if(A=t.props,T="prototype"in J&&J.prototype.render,x=(p=J.contextType)&&o[p.__c],C=p?x?x.props.value:p.__:o,i.__c?P=(f=t.__c=i.__c).__=f.__E:(T?t.__c=f=new J(A,C):(t.__c=f=new S(A,C),f.constructor=J,f.render=U),x&&x.sub(f),f.props=A,f.state||(f.state={}),f.context=C,f.__n=o,y=f.__d=!0,f.__h=[],f._sb=[]),T&&null==f.__s&&(f.__s=f.state),T&&null!=J.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=g({},f.__s)),g(f.__s,J.getDerivedStateFromProps(A,f.__s))),_=f.props,w=f.state,f.__v=t,y)T&&null==J.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),T&&null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(T&&null==J.getDerivedStateFromProps&&A!==_&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(A,C),!f.__e&&(null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(A,f.__s,C)||t.__v===i.__v)){for(t.__v!==i.__v&&(f.props=A,f.state=f.__s,f.__d=!1),t.__e=i.__e,t.__k=i.__k,t.__k.forEach(function(e){e&&(e.__=t)}),R=0;R<f._sb.length;R++)f.__h.push(f._sb[R]);f._sb=[],f.__h.length&&l.push(f);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(A,f.__s,C),T&&null!=f.componentDidUpdate&&f.__h.push(function(){f.componentDidUpdate(_,w,b)})}if(f.context=C,f.props=A,f.__P=e,f.__e=!1,j=n.__r,N=0,T){for(f.state=f.__s,f.__d=!1,j&&j(t),p=f.render(f.props,f.state,f.context),W=0;W<f._sb.length;W++)f.__h.push(f._sb[W]);f._sb=[]}else do f.__d=!1,j&&j(t),p=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++N<25);f.state=f.__s,null!=f.getChildContext&&(o=g(g({},o),f.getChildContext())),T&&!y&&null!=f.getSnapshotBeforeUpdate&&(b=f.getSnapshotBeforeUpdate(_,w)),O(e,m(M=null!=p&&p.type===E&&null==p.key?p.props.children:p)?M:[M],t,i,o,a,s,l,c,u,d),f.base=t.__e,t.__u&=-161,f.__h.length&&l.push(f),P&&(f.__E=f.__=null)}catch(e){t.__v=null,u||null!=s?(t.__e=c,t.__u|=u?160:32,s[s.indexOf(c)]=null):(t.__e=i.__e,t.__k=i.__k),n.__e(e,t,i)}else null==s&&t.__v===i.__v?(t.__k=i.__k,t.__e=i.__e):t.__e=function(e,t,n,i,o,a,s,l,c){var u,d,p,f,y,_,g,w=n.props,b=t.props,E=t.type;if("svg"===E?o="http://www.w3.org/2000/svg":"math"===E?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),null!=a){for(u=0;u<a.length;u++)if((y=a[u])&&"setAttribute"in y==!!E&&(E?y.localName===E:3===y.nodeType)){e=y,a[u]=null;break}}if(null==e){if(null===E)return document.createTextNode(b);e=document.createElementNS(o,E,b.is&&b),a=null,l=!1}if(null===E)w===b||l&&e.data===b||(e.data=b);else{if(a=a&&r.call(e.childNodes),w=n.props||h,!l&&null!=a)for(w={},u=0;u<e.attributes.length;u++)w[(y=e.attributes[u]).name]=y.value;for(u in w)if(y=w[u],"children"==u);else if("dangerouslySetInnerHTML"==u)p=y;else if("key"!==u&&!(u in b)){if("value"==u&&"defaultValue"in b||"checked"==u&&"defaultChecked"in b)continue;I(e,u,null,y,o)}for(u in b)y=b[u],"children"==u?f=y:"dangerouslySetInnerHTML"==u?d=y:"value"==u?_=y:"checked"==u?g=y:"key"===u||l&&"function"!=typeof y||w[u]===y||I(e,u,y,w[u],o);if(d)l||p&&(d.__html===p.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(p&&(e.innerHTML=""),O(e,m(f)?f:[f],t,n,i,"foreignObject"===E?"http://www.w3.org/1999/xhtml":o,a,s,a?a[0]:n.__k&&k(n,0),l,c),null!=a)for(u=a.length;u--;)null!=a[u]&&v(a[u]);l||(u="value",void 0===_||_===e[u]&&("progress"!==E||_)&&("option"!==E||_===w[u])||I(e,u,_,w[u],o),u="checked",void 0!==g&&g!==e[u]&&I(e,u,g,w[u],o))}return e}(i.__e,t,i,o,a,s,l,u,d);(p=n.diffed)&&p(t)}function R(e,t,r){t.__d=void 0;for(var i=0;i<r.length;i++)j(r[i],r[++i],r[++i]);n.__c&&n.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){n.__e(e,t.__v)}})}function j(e,t,r){try{"function"==typeof e?e(t):e.current=t}catch(e){n.__e(e,r)}}function N(e,t,r){var i,o;if(n.unmount&&n.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||j(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){n.__e(e,t)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&N(i[o],t,r||"function"!=typeof e.type);r||null==e.__e||v(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function U(e,t,r){return this.constructor(e,r)}function W(e,t,i){var o,a,s,l;n.__&&n.__(e,t),a=(o="function"==typeof i)?null:i&&i.__k||t.__k,s=[],l=[],C(t,e=(!o&&i||t).__k=w(E,null,[e]),a||h,h,t.namespaceURI,!o&&i?[i]:a?null:t.firstChild?r.call(t.childNodes):null,s,!o&&i?i:a?a.__e:t.firstChild,o,l),R(s,e,l)}r=y.slice,n={__e:function(e,t,r,n){for(var i,o,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),a=i.__d),a)return i.__E=i}catch(t){e=t}throw e}},i=0,o=function(e){return null!=e&&null==e.constructor},S.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=g({},this.state),"function"==typeof e&&(e=e(g({},r),this.props)),e&&g(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),P(this))},S.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),P(this))},S.prototype.render=E,a=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=function(e,t){return e.__v.__b-t.__v.__b},A.__r=0,u=0,d=x(!1),p=x(!0),f=0,t.Component=S,t.Fragment=E,t.cloneElement=function(e,t,n){var i,o,a,s,l=g({},e.props);for(a in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)"key"==a?i=t[a]:"ref"==a?o=t[a]:l[a]=void 0===t[a]&&void 0!==s?s[a]:t[a];return arguments.length>2&&(l.children=arguments.length>3?r.call(arguments,2):n),b(e.type,l,i||e.key,o||e.ref,null)},t.createContext=function(e,t){var r={__c:t="__cC"+f++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var r,n;return this.getChildContext||(r=[],(n={})[t]=this,this.getChildContext=function(){return n},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&r.some(function(e){e.__e=!0,P(e)})},this.sub=function(e){r.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){r&&r.splice(r.indexOf(e),1),t&&t.call(e)}}),e.children}};return r.Provider.__=r.Consumer.contextType=r},t.createElement=w,t.createRef=function(){return{current:null}},t.h=w,t.hydrate=function e(t,r){W(t,r,e)},t.isValidElement=o,t.options=n,t.render=W,t.toChildArray=function e(t,r){return r=r||[],null==t||"boolean"==typeof t||(m(t)?t.some(function(t){e(t,r)}):r.push(t)),r}},54714:(e,t)=>{"use strict";t.Z=function(e){return{id:"github",name:"GitHub",type:"oauth",authorization:{url:"https://github.com/login/oauth/authorize",params:{scope:"read:user user:email"}},token:"https://github.com/login/oauth/access_token",userinfo:{url:"https://api.github.com/user",async request({client:e,tokens:t}){let r=await e.userinfo(t.access_token);if(!r.email){let e=await fetch("https://api.github.com/user/emails",{headers:{Authorization:`token ${t.access_token}`}});if(e.ok){var n;let t=await e.json();r.email=(null!==(n=t.find(e=>e.primary))&&void 0!==n?n:t[0]).email}}return r}},profile(e){var t;return{id:e.id.toString(),name:null!==(t=e.name)&&void 0!==t?t:e.login,email:e.email,image:e.avatar_url}},style:{logo:"/github.svg",bg:"#24292f",text:"#fff"},options:e}}},2203:(e,t)=>{"use strict";t.Z=function(e){return{id:"google",name:"Google",type:"oauth",wellKnown:"https://accounts.google.com/.well-known/openid-configuration",authorization:{params:{scope:"openid email profile"}},idToken:!0,checks:["pkce","state"],profile:e=>({id:e.sub,name:e.name,email:e.email,image:e.picture}),style:{logo:"/google.svg",bg:"#fff",text:"#000"},options:e}}},28293:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectOrigin=function(e,t){var r;return(null!==(r=process.env.VERCEL)&&void 0!==r?r:process.env.AUTH_TRUST_HOST)?`${"http"===t?"http":"https"}://${e}`:process.env.NEXTAUTH_URL}},83633:(e,t,r)=>{"use strict";var n=r(1258);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.proxyLogger=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;try{if("undefined"==typeof window)return e;var r={},n=function(e){r[e]=function(r,n){l[e](r,n),"error"===e&&(n=s(n)),n.client=!0;var o="".concat(t,"/_log"),c=new URLSearchParams(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({level:e,code:r},n));return navigator.sendBeacon?navigator.sendBeacon(o,c):fetch(o,{method:"POST",body:c,keepalive:!0})}};for(var o in e)n(o);return r}catch(e){return l}},t.setLogger=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;t||(l.debug=function(){}),e.error&&(l.error=e.error),e.warn&&(l.warn=e.warn),e.debug&&(l.debug=e.debug)};var i=n(r(2280)),o=r(35796);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){var t;return e instanceof Error&&!(e instanceof o.UnknownError)?{message:e.message,stack:e.stack,name:e.name}:(null!=e&&e.error&&(e.error=s(e.error),e.message=null!==(t=e.message)&&void 0!==t?t:e.error.message),e)}var l={error:function(e,t){t=s(t),console.error("[next-auth][error][".concat(e,"]"),"\nhttps://next-auth.js.org/errors#".concat(e.toLowerCase()),t.message,t)},warn:function(e){console.warn("[next-auth][warn][".concat(e,"]"),"\nhttps://next-auth.js.org/warnings#".concat(e.toLowerCase()))},debug:function(e,t){console.log("[next-auth][debug][".concat(e,"]"),t)}};t.default=l},35396:(e,t)=>{"use strict";function r(e){return e&&"object"==typeof e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.merge=function e(t,...n){if(!n.length)return t;let i=n.shift();if(r(t)&&r(i))for(let n in i)r(i[n])?(t[n]||Object.assign(t,{[n]:{}}),e(t[n],i[n])):Object.assign(t,{[n]:i[n]});return e(t,...n)}},68869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let r=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e=`https://${e}`);let n=new URL(null!==(t=e)&&void 0!==t?t:r),i=("/"===n.pathname?r.pathname:n.pathname).replace(/\/$/,""),o=`${n.origin}${i}`;return{origin:n.origin,host:n.host,path:i,base:o,toString:()=>o}}},26310:(e,t,r)=>{"use strict";r.d(t,{Th:()=>a,db:()=>s});let n=require("pg");var i=r(53411),o=r(14853);let a={FREE:"FREE",PRO:"PRO",BUSINESS:"BUSINESS"},s=new i.$2({dialect:new o.o({pool:new n.Pool({connectionString:process.env.POSTGRES_URL})})})},53116:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c,A:()=>u});var n=r(40609),i=r(3517),o=r(2766);let a=(0,i.D)({shared:{},server:{STRIPE_API_KEY:o.Z_()},client:{NEXT_PUBLIC_STRIPE_PRO_PRODUCT_ID:o.Z_().optional(),NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID:o.Z_().optional(),NEXT_PUBLIC_STRIPE_PRO_YEARLY_PRICE_ID:o.Z_().optional(),NEXT_PUBLIC_STRIPE_BUSINESS_PRODUCT_ID:o.Z_().optional(),NEXT_PUBLIC_STRIPE_BUSINESS_MONTHLY_PRICE_ID:o.Z_().optional(),NEXT_PUBLIC_STRIPE_BUSINESS_YEARLY_PRICE_ID:o.Z_().optional()},experimental__runtimeEnv:{NEXT_PUBLIC_STRIPE_PRO_PRODUCT_ID:"prod_",NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID:"price_",NEXT_PUBLIC_STRIPE_PRO_YEARLY_PRICE_ID:"price_",NEXT_PUBLIC_STRIPE_BUSINESS_PRODUCT_ID:"prod_",NEXT_PUBLIC_STRIPE_BUSINESS_MONTHLY_PRICE_ID:"price_",NEXT_PUBLIC_STRIPE_BUSINESS_YEARLY_PRICE_ID:"price_"},skipValidation:!!process.env.SKIP_ENV_VALIDATION||"lint"===process.env.npm_lifecycle_event});var s=r(26310);let l={[a.NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID]:s.Th.PRO,[a.NEXT_PUBLIC_STRIPE_PRO_YEARLY_PRICE_ID]:s.Th.PRO,[a.NEXT_PUBLIC_STRIPE_BUSINESS_MONTHLY_PRICE_ID]:s.Th.BUSINESS,[a.NEXT_PUBLIC_STRIPE_BUSINESS_YEARLY_PRICE_ID]:s.Th.BUSINESS};async function c(e){let t=e.data.object;if("checkout.session.completed"===e.type){let e=await u.subscriptions.retrieve(t.subscription),r="string"==typeof e.customer?e.customer:e.customer.id,{userId:n}=e.metadata;if(!n)throw Error("Missing user id");let i=await s.db.selectFrom("Customer").selectAll().where("authUserId","=",n).executeTakeFirst();if(i)return await s.db.updateTable("Customer").where("id","=",i.id).set({stripeCustomerId:r,stripeSubscriptionId:e.id,stripePriceId:e.items.data[0]?.price.id}).execute()}if("invoice.payment_succeeded"===e.type){let e=await u.subscriptions.retrieve(t.subscription),r="string"==typeof e.customer?e.customer:e.customer.id,{userId:n}=e.metadata;if(!n)throw Error("Missing user id");let i=await s.db.selectFrom("Customer").selectAll().where("authUserId","=",n).executeTakeFirst();if(i){let t=e.items.data[0]?.price.id;if(!t)return;let n=t&&l[t]?l[t]:s.Th.FREE;return await s.db.updateTable("Customer").where("id","=",i.id).set({stripeCustomerId:r,stripeSubscriptionId:e.id,stripePriceId:t,stripeCurrentPeriodEnd:new Date(1e3*e.current_period_end),plan:n||s.Th.FREE}).execute()}}"customer.subscription.updated"===e.type&&console.log("event.type: ",e.type),console.log("✅ Stripe Webhook Processed")}let u=new n.h(a.STRIPE_API_KEY,{typescript:!0})},87352:e=>{e.exports=function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")},e.exports.__esModule=!0,e.exports.default=e.exports},19122:e=>{e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},13952:e=>{function t(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise(function(i,o){var a=e.apply(r,n);function s(e){t(a,i,o,s,l,"next",e)}function l(e){t(a,i,o,s,l,"throw",e)}s(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},93353:e=>{e.exports=function(e,t){return t.get?t.get.call(e):t.value},e.exports.__esModule=!0,e.exports.default=e.exports},51094:e=>{e.exports=function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=r}},e.exports.__esModule=!0,e.exports.default=e.exports},20819:e=>{e.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},52674:(e,t,r)=>{var n=r(93353),i=r(37833);e.exports=function(e,t){var r=i(t,e);return n(e,r)},e.exports.__esModule=!0,e.exports.default=e.exports},37833:(e,t,r)=>{var n=r(87352);e.exports=function(e,t){return e.get(n(e,t))},e.exports.__esModule=!0,e.exports.default=e.exports},94874:(e,t,r)=>{var n=r(51094),i=r(37833);e.exports=function(e,t,r){var o=i(t,e);return n(e,o,r),r},e.exports.__esModule=!0,e.exports.default=e.exports},4547:(e,t,r)=>{var n=r(57674),i=r(51830);e.exports=function(e,t,r){if(n())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var a=new(e.bind.apply(e,o));return r&&i(a,r.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports},55961:(e,t,r)=>{var n=r(46225);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}e.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},2280:(e,t,r)=>{var n=r(46225);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},80905:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1778:e=>{function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},52602:(e,t,r)=>{var n=r(51830);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},1258:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},22335:e=>{e.exports=function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}},e.exports.__esModule=!0,e.exports.default=e.exports},57674:e=>{function t(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(e.exports=t=function(){return!!r},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},31586:(e,t,r)=>{var n=r(46911).default,i=r(19122);e.exports=function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},36486:(e,t,r)=>{var n=r(46911).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=i=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function f(e,r,n,i){var o,a,l=Object.create((r&&r.prototype instanceof v?r:v).prototype);return s(l,"_invoke",{value:(o=new x(i||[]),a=y,function(r,i){if(a===_)throw Error("Generator is already running");if(a===m){if("throw"===r)throw i;return{value:t,done:!0}}for(o.method=r,o.arg=i;;){var s=o.delegate;if(s){var l=function e(r,n){var i=n.method,o=r.iterator[i];if(o===t)return n.delegate=null,"throw"===i&&r.iterator.return&&(n.method="return",n.arg=t,e(r,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),g;var a=h(o,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var s=a.arg;return s?s.done?(n[r.resultName]=s.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):s:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,g)}(s,o);if(l){if(l===g)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===y)throw a=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=_;var c=h(e,n,o);if("normal"===c.type){if(a=o.done?m:"suspendedYield",c.arg===g)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(a=m,o.method="throw",o.arg=c.arg)}})}),l}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var y="suspendedStart",_="executing",m="completed",g={};function v(){}function w(){}function b(){}var E={};p(E,c,function(){return this});var S=Object.getPrototypeOf,k=S&&S(S(C([])));k&&k!==o&&a.call(k,c)&&(E=k);var P=b.prototype=v.prototype=Object.create(E);function A(e){["next","throw","return"].forEach(function(t){p(e,t,function(e){return this._invoke(t,e)})})}function O(e,t){var r;s(this,"_invoke",{value:function(i,o){function s(){return new t(function(r,s){!function r(i,o,s,l){var c=h(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then(function(e){r("next",e,s,l)},function(e){r("throw",e,s,l)}):t.resolve(d).then(function(e){u.value=e,s(u)},function(e){return r("throw",e,s,l)})}l(c.arg)}(i,o,r,s)})}return r=r?r.then(s,s):s()}})}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(a.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw TypeError(n(e)+" is not iterable")}return w.prototype=b,s(P,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:w,configurable:!0}),w.displayName=p(b,d,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,p(e,d,"GeneratorFunction")),e.prototype=Object.create(P),e},r.awrap=function(e){return{__await:e}},A(O.prototype),p(O.prototype,u,function(){return this}),r.AsyncIterator=O,r.async=function(e,t,n,i,o){void 0===o&&(o=Promise);var a=new O(f(e,t,n,i),o);return r.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},A(P),p(P,d,"Generator"),p(P,c,function(){return this}),p(P,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;I(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},r}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},51830:e=>{function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},44594:(e,t,r)=>{var n=r(46911).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},46225:(e,t,r)=>{var n=r(46911).default,i=r(44594);e.exports=function(e){var t=i(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},46911:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},45645:(e,t,r)=>{var n=r(1778),i=r(51830),o=r(22335),a=r(4547);function s(t){var r="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return a(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},49937:(e,t,r)=>{var n=r(36486)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},77130:e=>{"use strict";e.exports=JSON.parse('{"name":"openid-client","version":"5.6.5","description":"OpenID Connect Relying Party (RP, Client) implementation for Node.js runtime, supports passportjs","keywords":["auth","authentication","basic","certified","client","connect","dynamic","electron","hybrid","identity","implicit","oauth","oauth2","oidc","openid","passport","relying party","strategy"],"homepage":"https://github.com/panva/node-openid-client","repository":"panva/node-openid-client","funding":{"url":"https://github.com/sponsors/panva"},"license":"MIT","author":"Filip Skokan <panva.ip@gmail.com>","exports":{"types":"./types/index.d.ts","import":"./lib/index.mjs","require":"./lib/index.js"},"main":"./lib/index.js","types":"./types/index.d.ts","files":["lib","types/index.d.ts"],"scripts":{"format":"npx prettier --loglevel silent --write ./lib ./test ./certification ./types","test":"mocha test/**/*.test.js"},"dependencies":{"jose":"^4.15.5","lru-cache":"^6.0.0","object-hash":"^2.2.0","oidc-token-hash":"^5.0.3"},"devDependencies":{"@types/node":"^16.18.87","@types/passport":"^1.0.16","base64url":"^3.0.1","chai":"^4.4.1","mocha":"^10.3.0","nock":"^13.5.4","prettier":"^2.8.8","readable-mock-req":"^0.2.2","sinon":"^9.2.4","timekeeper":"^2.3.1"},"standard-version":{"scripts":{"postchangelog":"sed -i \'\' -e \'s/### \\\\[/## [/g\' CHANGELOG.md"},"types":[{"type":"feat","section":"Features"},{"type":"fix","section":"Fixes"},{"type":"chore","hidden":true},{"type":"docs","hidden":true},{"type":"style","hidden":true},{"type":"refactor","section":"Refactor","hidden":false},{"type":"perf","section":"Performance","hidden":false},{"type":"test","hidden":true}]}}')}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[522,600],()=>r(62509));module.exports=n})();