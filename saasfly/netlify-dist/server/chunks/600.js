exports.id=600,exports.ids=[600],exports.modules={26106:(e,t,r)=>{"use strict";var i=r(1753),n=r(77416),o=n(i("String.prototype.indexOf"));e.exports=function(e,t){var r=i(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?n(r):r}},77416:(e,t,r)=>{"use strict";var i=r(35765),n=r(1753),o=r(40192),s=r(60021),a=n("%Function.prototype.apply%"),d=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||i.call(d,a),u=r(77164),h=n("%Math.max%");e.exports=function(e){if("function"!=typeof e)throw new s("a function is required");var t=l(i,d,arguments);return o(t,1+h(0,e.length-(arguments.length-1)),!0)};var c=function(){return l(i,a,arguments)};u?u(e.exports,"apply",{value:c}):e.exports.apply=c},18746:(e,t,r)=>{"use strict";var i=r(77164),n=r(96126),o=r(60021),s=r(58143);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new o("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,d=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],h=!!s&&s(e,t);if(i)i(e,t,{configurable:null===l&&h?h.configurable:!l,enumerable:null===a&&h?h.enumerable:!a,value:r,writable:null===d&&h?h.writable:!d});else if(!u&&(a||d||l))throw new n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");else e[t]=r}},77164:(e,t,r)=>{"use strict";var i=r(1753)("%Object.defineProperty%",!0)||!1;if(i)try{i({},"a",{value:1})}catch(e){i=!1}e.exports=i},330:e=>{"use strict";e.exports=EvalError},94471:e=>{"use strict";e.exports=Error},30927:e=>{"use strict";e.exports=RangeError},47686:e=>{"use strict";e.exports=ReferenceError},96126:e=>{"use strict";e.exports=SyntaxError},60021:e=>{"use strict";e.exports=TypeError},210:e=>{"use strict";e.exports=URIError},31897:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,i=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var n=0;n<t.length;n+=1)r[n+e.length]=t[n];return r},n=function(e,t){for(var r=[],i=t||0,n=0;i<e.length;i+=1,n+=1)r[n]=e[i];return r},o=function(e,t){for(var r="",i=0;i<e.length;i+=1)r+=e[i],i+1<e.length&&(r+=t);return r};e.exports=function(e){var s,a=this;if("function"!=typeof a||"[object Function]"!==t.apply(a))throw TypeError("Function.prototype.bind called on incompatible "+a);for(var d=n(arguments,1),l=r(0,a.length-d.length),u=[],h=0;h<l;h++)u[h]="$"+h;if(s=Function("binder","return function ("+o(u,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof s){var t=a.apply(this,i(d,arguments));return Object(t)===t?t:this}return a.apply(e,i(d,arguments))}),a.prototype){var c=function(){};c.prototype=a.prototype,s.prototype=new c,c.prototype=null}return s}},35765:(e,t,r)=>{"use strict";var i=r(31897);e.exports=Function.prototype.bind||i},1753:(e,t,r)=>{"use strict";var i,n=r(94471),o=r(330),s=r(30927),a=r(47686),d=r(96126),l=r(60021),u=r(210),h=Function,c=function(e){try{return h('"use strict"; return ('+e+").constructor;")()}catch(e){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(e){p=null}var m=function(){throw new l},f=p?function(){try{return arguments.callee,m}catch(e){try{return p(arguments,"callee").get}catch(e){return m}}}():m,y=r(44348)(),v=r(61634)(),g=Object.getPrototypeOf||(v?function(e){return e.__proto__}:null),N={},w="undefined"!=typeof Uint8Array&&g?g(Uint8Array):i,b={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":y&&g?g([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":N,"%AsyncGenerator%":N,"%AsyncGeneratorFunction%":N,"%AsyncIteratorPrototype%":N,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?i:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":N,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y&&g?g(g([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&y&&g?g(new Map()[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&y&&g?g(new Set()[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y&&g?g(""[Symbol.iterator]()):i,"%Symbol%":y?Symbol:i,"%SyntaxError%":d,"%ThrowTypeError%":f,"%TypedArray%":w,"%TypeError%":l,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet};if(g)try{null.error}catch(e){var _=g(g(e));b["%Error.prototype%"]=_}var x=function e(t){var r;if("%AsyncFunction%"===t)r=c("async function () {}");else if("%GeneratorFunction%"===t)r=c("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=c("async function* () {}");else if("%AsyncGenerator%"===t){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&g&&(r=g(n.prototype))}return b[t]=r,r},T={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},P=r(35765),O=r(88456),S=P.call(Function.call,Array.prototype.concat),E=P.call(Function.apply,Array.prototype.splice),k=P.call(Function.call,String.prototype.replace),C=P.call(Function.call,String.prototype.slice),I=P.call(Function.call,RegExp.prototype.exec),V=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,q=function(e){var t=C(e,0,1),r=C(e,-1);if("%"===t&&"%"!==r)throw new d("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new d("invalid intrinsic syntax, expected opening `%`");var i=[];return k(e,V,function(e,t,r,n){i[i.length]=r?k(n,A,"$1"):t||e}),i},W=function(e,t){var r,i=e;if(O(T,i)&&(i="%"+(r=T[i])[0]+"%"),O(b,i)){var n=b[i];if(n===N&&(n=x(i)),void 0===n&&!t)throw new l("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:n}}throw new d("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new l('"allowMissing" argument must be a boolean');if(null===I(/^%?[^%]*%?$/,e))throw new d("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=q(e),i=r.length>0?r[0]:"",n=W("%"+i+"%",t),o=n.name,s=n.value,a=!1,u=n.alias;u&&(i=u[0],E(r,S([0,1],u)));for(var h=1,c=!0;h<r.length;h+=1){var m=r[h],f=C(m,0,1),y=C(m,-1);if(('"'===f||"'"===f||"`"===f||'"'===y||"'"===y||"`"===y)&&f!==y)throw new d("property names with quotes must have matching quotes");if("constructor"!==m&&c||(a=!0),i+="."+m,O(b,o="%"+i+"%"))s=b[o];else if(null!=s){if(!(m in s)){if(!t)throw new l("base intrinsic for "+e+" exists, but the property is not available.");return}if(p&&h+1>=r.length){var v=p(s,m);s=(c=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:s[m]}else c=O(s,m),s=s[m];c&&!a&&(b[o]=s)}}return s}},58143:(e,t,r)=>{"use strict";var i=r(1753)("%Object.getOwnPropertyDescriptor%",!0);if(i)try{i([],"length")}catch(e){i=null}e.exports=i},31482:(e,t,r)=>{"use strict";var i=r(77164),n=function(){return!!i};n.hasArrayLengthDefineBug=function(){if(!i)return null;try{return 1!==i([],"length",{value:1}).length}catch(e){return!0}},e.exports=n},61634:e=>{"use strict";var t={__proto__:null,foo:{}},r=Object;e.exports=function(){return({__proto__:t}).foo===t.foo&&!(t instanceof r)}},44348:(e,t,r)=>{"use strict";var i="undefined"!=typeof Symbol&&Symbol,n=r(33833);e.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&n()}},33833:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(e,t);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},88456:(e,t,r)=>{"use strict";var i=Function.prototype.call,n=Object.prototype.hasOwnProperty,o=r(35765);e.exports=o.call(i,n)},1333:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,o={};function s(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),i=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?i:`${i}; ${r.join("; ")}`}function a(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[i,n]=[r.slice(0,e),r.slice(e+1)];try{t.set(i,decodeURIComponent(null!=n?n:"true"))}catch{}}return t}function d(e){var t,r;if(!e)return;let[[i,n],...o]=a(e),{domain:s,expires:d,httponly:h,maxage:c,path:p,samesite:m,secure:f,partitioned:y,priority:v}=Object.fromEntries(o.map(([e,t])=>[e.toLowerCase(),t]));return function(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}({name:i,value:decodeURIComponent(n),domain:s,...d&&{expires:new Date(d)},...h&&{httpOnly:!0},..."string"==typeof c&&{maxAge:Number(c)},path:p,...m&&{sameSite:l.includes(t=(t=m).toLowerCase())?t:void 0},...f&&{secure:!0},...v&&{priority:u.includes(r=(r=v).toLowerCase())?r:void 0},...y&&{partitioned:!0}})}((e,r)=>{for(var i in r)t(e,i,{get:r[i],enumerable:!0})})(o,{RequestCookies:()=>h,ResponseCookies:()=>c,parseCookie:()=>a,parseSetCookie:()=>d,stringifyCookie:()=>s}),e.exports=((e,o,s,a)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let d of i(o))n.call(e,d)||d===s||t(e,d,{get:()=>o[d],enumerable:!(a=r(o,d))||a.enumerable});return e})(t({},"__esModule",{value:!0}),o);var l=["strict","lax","none"],u=["low","medium","high"],h=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,r]of a(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let i="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===i).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,i=this._parsed;return i.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(i).map(([e,t])=>s(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>s(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},c=class{constructor(e){var t,r,i;this._parsed=new Map,this._headers=e;let n=null!=(i=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?i:[];for(let e of Array.isArray(n)?n:function(e){if(!e)return[];var t,r,i,n,o,s=[],a=0;function d(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,o=!1;d();)if(","===(r=e.charAt(a))){for(i=a,a+=1,d(),n=a;a<e.length&&"="!==(r=e.charAt(a))&&";"!==r&&","!==r;)a+=1;a<e.length&&"="===e.charAt(a)?(o=!0,a=n,s.push(e.substring(t,i)),t=a):a=i+1}else a+=1;(!o||a>=e.length)&&s.push(e.substring(t,e.length))}return s}(n)){let t=d(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let i="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===i)}has(e){return this._parsed.has(e)}set(...e){let[t,r,i]=1===e.length?[e[0].name,e[0].value,e[0]]:e,n=this._parsed;return n.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...i})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=s(r);t.append("set-cookie",e)}}(n,this._headers),this}delete(...e){let[t,r,i]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:r,domain:i,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(s).join("; ")}}},63036:(e,t,r)=>{"use strict";e.exports=r(30517)},38521:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RequestCookies:function(){return i.RequestCookies},ResponseCookies:function(){return i.ResponseCookies}});let i=r(1333)},71508:(e,t,r)=>{var i="function"==typeof Map&&Map.prototype,n=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=i&&n&&"function"==typeof n.get?n.get:null,s=i&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,d=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=a&&d&&"function"==typeof d.get?d.get:null,u=a&&Set.prototype.forEach,h="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,c="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,m=Boolean.prototype.valueOf,f=Object.prototype.toString,y=Function.prototype.toString,v=String.prototype.match,g=String.prototype.slice,N=String.prototype.replace,w=String.prototype.toUpperCase,b=String.prototype.toLowerCase,_=RegExp.prototype.test,x=Array.prototype.concat,T=Array.prototype.join,P=Array.prototype.slice,O=Math.floor,S="function"==typeof BigInt?BigInt.prototype.valueOf:null,E=Object.getOwnPropertySymbols,k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,C="function"==typeof Symbol&&"object"==typeof Symbol.iterator,I="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===C?"object":"symbol")?Symbol.toStringTag:null,V=Object.prototype.propertyIsEnumerable,A=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function q(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||_.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var i=e<0?-O(-e):O(e);if(i!==e){var n=String(i),o=g.call(t,n.length+1);return N.call(n,r,"$&_")+"."+N.call(N.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return N.call(t,r,"$&_")}var W=r(41985),R=W.custom,D=F(R)?R:null;function j(e,t,r){var i="double"===(r.quoteStyle||t)?'"':"'";return i+e+i}function L(e){return"[object Array]"===U(e)&&(!I||!("object"==typeof e&&I in e))}function M(e){return"[object RegExp]"===U(e)&&(!I||!("object"==typeof e&&I in e))}function F(e){if(C)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!k)return!1;try{return k.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,i,n){var a=r||{};if(G(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw TypeError('option "quoteStyle" must be "single" or "double"');if(G(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var d=!G(a,"customInspect")||a.customInspect;if("boolean"!=typeof d&&"symbol"!==d)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(G(a,"indent")&&null!==a.indent&&"	"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(G(a,"numericSeparator")&&"boolean"!=typeof a.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var f=a.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,r){if(t.length>r.maxStringLength){var i=t.length-r.maxStringLength;return e(g.call(t,0,r.maxStringLength),r)+"... "+i+" more character"+(i>1?"s":"")}return j(N.call(N.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Z),"single",r)}(t,a);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var w=String(t);return f?q(t,w):w}if("bigint"==typeof t){var _=String(t)+"n";return f?q(t,_):_}var O=void 0===a.depth?5:a.depth;if(void 0===i&&(i=0),i>=O&&O>0&&"object"==typeof t)return L(t)?"[Array]":"[Object]";var E=function(e,t){var r;if("	"===e.indent)r="	";else{if("number"!=typeof e.indent||!(e.indent>0))return null;r=T.call(Array(e.indent+1)," ")}return{base:r,prev:T.call(Array(t+1),r)}}(a,i);if(void 0===n)n=[];else if($(n,t)>=0)return"[Circular]";function R(t,r,o){if(r&&(n=P.call(n)).push(r),o){var s={depth:a.depth};return G(a,"quoteStyle")&&(s.quoteStyle=a.quoteStyle),e(t,s,i+1,n)}return e(t,a,i+1,n)}if("function"==typeof t&&!M(t)){var B=function(e){if(e.name)return e.name;var t=v.call(y.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),X=H(t,R);return"[Function"+(B?": "+B:" (anonymous)")+"]"+(X.length>0?" { "+T.call(X,", ")+" }":"")}if(F(t)){var Y=C?N.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):k.call(t);return"object"!=typeof t||C?Y:Q(Y)}if(t&&"object"==typeof t&&("undefined"!=typeof HTMLElement&&t instanceof HTMLElement||"string"==typeof t.nodeName&&"function"==typeof t.getAttribute)){for(var ee,et="<"+b.call(String(t.nodeName)),er=t.attributes||[],ei=0;ei<er.length;ei++)et+=" "+er[ei].name+"="+j((ee=er[ei].value,N.call(String(ee),/"/g,"&quot;")),"double",a);return et+=">",t.childNodes&&t.childNodes.length&&(et+="..."),et+="</"+b.call(String(t.nodeName))+">"}if(L(t)){if(0===t.length)return"[]";var en=H(t,R);return E&&!function(e){for(var t=0;t<e.length;t++)if($(e[t],"\n")>=0)return!1;return!0}(en)?"["+z(en,E)+"]":"[ "+T.call(en,", ")+" ]"}if("[object Error]"===U(t)&&(!I||!("object"==typeof t&&I in t))){var eo=H(t,R);return"cause"in Error.prototype||!("cause"in t)||V.call(t,"cause")?0===eo.length?"["+String(t)+"]":"{ ["+String(t)+"] "+T.call(eo,", ")+" }":"{ ["+String(t)+"] "+T.call(x.call("[cause]: "+R(t.cause),eo),", ")+" }"}if("object"==typeof t&&d){if(D&&"function"==typeof t[D]&&W)return W(t,{depth:O-i});if("symbol"!==d&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{l.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var es=[];return s&&s.call(t,function(e,r){es.push(R(r,t,!0)+" => "+R(e,t))}),K("Map",o.call(t),es,E)}if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ea=[];return u&&u.call(t,function(e){ea.push(R(e,t))}),K("Set",l.call(t),ea,E)}if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{c.call(e,c)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return J("WeakMap");if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e,c);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return J("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return J("WeakRef");if("[object Number]"===U(t)&&(!I||!("object"==typeof t&&I in t)))return Q(R(Number(t)));if(function(e){if(!e||"object"!=typeof e||!S)return!1;try{return S.call(e),!0}catch(e){}return!1}(t))return Q(R(S.call(t)));if("[object Boolean]"===U(t)&&(!I||!("object"==typeof t&&I in t)))return Q(m.call(t));if("[object String]"===U(t)&&(!I||!("object"==typeof t&&I in t)))return Q(R(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||"undefined"!=typeof global&&t===global)return"{ [object globalThis] }";if(!("[object Date]"===U(t)&&(!I||!("object"==typeof t&&I in t)))&&!M(t)){var ed=H(t,R),el=A?A(t)===Object.prototype:t instanceof Object||t.constructor===Object,eu=t instanceof Object?"":"null prototype",eh=!el&&I&&Object(t)===t&&I in t?g.call(U(t),8,-1):eu?"Object":"",ec=(el||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(eh||eu?"["+T.call(x.call([],eh||[],eu||[]),": ")+"] ":"");return 0===ed.length?ec+"{}":E?ec+"{"+z(ed,E)+"}":ec+"{ "+T.call(ed,", ")+" }"}return String(t)};var B=Object.prototype.hasOwnProperty||function(e){return e in this};function G(e,t){return B.call(e,t)}function U(e){return f.call(e)}function $(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return -1}function Z(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function Q(e){return"Object("+e+")"}function J(e){return e+" { ? }"}function K(e,t,r,i){return e+" ("+t+") {"+(i?z(r,i):T.call(r,", "))+"}"}function z(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+T.call(e,","+r)+"\n"+t.prev}function H(e,t){var r,i=L(e),n=[];if(i){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=G(e,o)?t(e[o],e):""}var s="function"==typeof E?E(e):[];if(C){r={};for(var a=0;a<s.length;a++)r["$"+s[a]]=s[a]}for(var d in e)G(e,d)&&(!i||String(Number(d))!==d||!(d<e.length))&&(C&&r["$"+d]instanceof Symbol||(_.call(/[^\w$]/,d)?n.push(t(d,e)+": "+t(e[d],e)):n.push(d+": "+t(e[d],e))));if("function"==typeof E)for(var l=0;l<s.length;l++)V.call(e,s[l])&&n.push("["+t(s[l])+"]: "+t(e[s[l]],e));return n}},41985:(e,t,r)=>{e.exports=r(73837).inspect},64794:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,i={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports={default:i.RFC3986,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:i.RFC1738,RFC3986:i.RFC3986}},22907:(e,t,r)=>{"use strict";var i=r(3256),n=r(68918),o=r(64794);e.exports={formats:o,parse:n,stringify:i}},68918:(e,t,r)=>{"use strict";var i=r(31195),n=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:i.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},d=function(e,t){var r={__proto__:null},d=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;d=d.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var l=t.parameterLimit===1/0?void 0:t.parameterLimit,u=d.split(t.delimiter,l),h=-1,c=t.charset;if(t.charsetSentinel)for(p=0;p<u.length;++p)0===u[p].indexOf("utf8=")&&("utf8=%E2%9C%93"===u[p]?c="utf-8":"utf8=%26%2310003%3B"===u[p]&&(c="iso-8859-1"),h=p,p=u.length);for(p=0;p<u.length;++p)if(p!==h){var p,m,f,y=u[p],v=y.indexOf("]="),g=-1===v?y.indexOf("="):v+1;-1===g?(m=t.decoder(y,s.decoder,c,"key"),f=t.strictNullHandling?null:""):(m=t.decoder(y.slice(0,g),s.decoder,c,"key"),f=i.maybeMap(a(y.slice(g+1),t),function(e){return t.decoder(e,s.decoder,c,"value")})),f&&t.interpretNumericEntities&&"iso-8859-1"===c&&(f=f.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),y.indexOf("[]=")>-1&&(f=o(f)?[f]:f);var N=n.call(r,m);N&&"combine"===t.duplicates?r[m]=i.combine(r[m],f):N&&"last"!==t.duplicates||(r[m]=f)}return r},l=function(e,t,r,i){for(var n=i?t:a(t,r),o=e.length-1;o>=0;--o){var s,d=e[o];if("[]"===d&&r.parseArrays)s=r.allowEmptyArrays&&""===n?[]:[].concat(n);else{s=r.plainObjects?Object.create(null):{};var l="["===d.charAt(0)&&"]"===d.charAt(d.length-1)?d.slice(1,-1):d,u=r.decodeDotInKeys?l.replace(/%2E/g,"."):l,h=parseInt(u,10);r.parseArrays||""!==u?!isNaN(h)&&d!==u&&String(h)===u&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(s=[])[h]=n:"__proto__"!==u&&(s[u]=n):s={0:n}}n=s}return n},u=function(e,t,r,i){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(o),d=a?o.slice(0,a.index):o,u=[];if(d){if(!r.plainObjects&&n.call(Object.prototype,d)&&!r.allowPrototypes)return;u.push(d)}for(var h=0;r.depth>0&&null!==(a=s.exec(o))&&h<r.depth;){if(h+=1,!r.plainObjects&&n.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+o.slice(a.index)+"]"),l(u,t,r,i)}},h=function(e){if(!e)return s;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?s.charset:e.charset,r=void 0===e.duplicates?s.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||s.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:s.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:s.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:s.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:s.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:s.decoder,delimiter:"string"==typeof e.delimiter||i.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}};e.exports=function(e,t){var r=h(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?d(e,r):e,o=r.plainObjects?Object.create(null):{},s=Object.keys(n),a=0;a<s.length;++a){var l=s[a],c=u(l,n[l],r,"string"==typeof e);o=i.merge(o,c,r)}return!0===r.allowSparse?o:i.compact(o)}},3256:(e,t,r)=>{"use strict";var i=r(97882),n=r(31195),o=r(64794),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},d=Array.isArray,l=Array.prototype.push,u=function(e,t){l.apply(e,d(t)?t:[t])},h=Date.prototype.toISOString,c=o.default,p={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:n.encode,encodeValuesOnly:!1,format:c,formatter:o.formatters[c],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},m={},f=function e(t,r,o,s,a,l,h,c,f,y,v,g,N,w,b,_,x,T){for(var P,O,S=t,E=T,k=0,C=!1;void 0!==(E=E.get(m))&&!C;){var I=E.get(t);if(k+=1,void 0!==I){if(I===k)throw RangeError("Cyclic object value");C=!0}void 0===E.get(m)&&(k=0)}if("function"==typeof y?S=y(r,S):S instanceof Date?S=N(S):"comma"===o&&d(S)&&(S=n.maybeMap(S,function(e){return e instanceof Date?N(e):e})),null===S){if(l)return f&&!_?f(r,p.encoder,x,"key",w):r;S=""}if("string"==typeof(P=S)||"number"==typeof P||"boolean"==typeof P||"symbol"==typeof P||"bigint"==typeof P||n.isBuffer(S))return f?[b(_?r:f(r,p.encoder,x,"key",w))+"="+b(f(S,p.encoder,x,"value",w))]:[b(r)+"="+b(String(S))];var V=[];if(void 0===S)return V;if("comma"===o&&d(S))_&&f&&(S=n.maybeMap(S,f)),O=[{value:S.length>0?S.join(",")||null:void 0}];else if(d(y))O=y;else{var A=Object.keys(S);O=v?A.sort(v):A}var q=c?r.replace(/\./g,"%2E"):r,W=s&&d(S)&&1===S.length?q+"[]":q;if(a&&d(S)&&0===S.length)return W+"[]";for(var R=0;R<O.length;++R){var D=O[R],j="object"==typeof D&&void 0!==D.value?D.value:S[D];if(!h||null!==j){var L=g&&c?D.replace(/\./g,"%2E"):D,M=d(S)?"function"==typeof o?o(W,L):W:W+(g?"."+L:"["+L+"]");T.set(t,k);var F=i();F.set(m,T),u(V,e(j,M,o,s,a,l,h,c,"comma"===o&&_&&d(S)?null:f,y,v,g,N,w,b,_,x,F))}}return V},y=function(e){if(!e)return p;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw TypeError("Encoder has to be a function.");var t,r=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=o.default;if(void 0!==e.format){if(!s.call(o.formatters,e.format))throw TypeError("Unknown format option provided.");i=e.format}var n=o.formatters[i],l=p.filter;if(("function"==typeof e.filter||d(e.filter))&&(l=e.filter),t=e.arrayFormat in a?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":p.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");var u=void 0===e.allowDots?!0===e.encodeDotInKeys||p.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:u,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:p.allowEmptyArrays,arrayFormat:t,charset:r,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:p.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:l,format:i,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}};e.exports=function(e,t){var r,n=e,o=y(t);"function"==typeof o.filter?n=(0,o.filter)("",n):d(o.filter)&&(r=o.filter);var s=[];if("object"!=typeof n||null===n)return"";var l=a[o.arrayFormat],h="comma"===l&&o.commaRoundTrip;r||(r=Object.keys(n)),o.sort&&r.sort(o.sort);for(var c=i(),p=0;p<r.length;++p){var m=r[p];o.skipNulls&&null===n[m]||u(s,f(n[m],m,l,h,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,c))}var v=s.join(o.delimiter),g=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),v.length>0?g+v:""}},31195:(e,t,r)=>{"use strict";var i=r(64794),n=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var i=[],n=0;n<r.length;++n)void 0!==r[n]&&i.push(r[n]);t.obj[t.prop]=i}}},d=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)void 0!==e[i]&&(r[i]=e[i]);return r};e.exports={arrayToObject:d,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var n=t[i],o=n.obj[n.prop],s=Object.keys(o),d=0;d<s.length;++d){var l=s[d],u=o[l];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:o,prop:l}),r.push(u))}return a(t),e},decode:function(e,t,r){var i=e.replace(/\+/g," ");if("iso-8859-1"===r)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(e){return i}},encode:function(e,t,r,n,o){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var d="",l=0;l<a.length;l+=1024){for(var u=a.length>=1024?a.slice(l,l+1024):a,h=[],c=0;c<u.length;++c){var p=u.charCodeAt(c);if(45===p||46===p||95===p||126===p||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||o===i.RFC1738&&(40===p||41===p)){h[h.length]=u.charAt(c);continue}if(p<128){h[h.length]=s[p];continue}if(p<2048){h[h.length]=s[192|p>>6]+s[128|63&p];continue}if(p<55296||p>=57344){h[h.length]=s[224|p>>12]+s[128|p>>6&63]+s[128|63&p];continue}c+=1,p=65536+((1023&p)<<10|1023&u.charCodeAt(c)),h[h.length]=s[240|p>>18]+s[128|p>>12&63]+s[128|p>>6&63]+s[128|63&p]}d+=h.join("")}return d},isBuffer:function(e){return!!e&&"object"==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(t(e[i]));return r}return t(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=typeof r){if(o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(i&&(i.plainObjects||i.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var s=t;return(o(t)&&!o(r)&&(s=d(t,i)),o(t)&&o(r))?(r.forEach(function(r,o){if(n.call(t,o)){var s=t[o];s&&"object"==typeof s&&r&&"object"==typeof r?t[o]=e(s,r,i):t.push(r)}else t[o]=r}),t):Object.keys(r).reduce(function(t,o){var s=r[o];return n.call(t,o)?t[o]=e(t[o],s,i):t[o]=s,t},s)}}},40192:(e,t,r)=>{"use strict";var i=r(1753),n=r(18746),o=r(31482)(),s=r(58143),a=r(60021),d=i("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||d(t)!==t)throw new a("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,l=!0;if("length"in e&&s){var u=s(e,"length");u&&!u.configurable&&(i=!1),u&&!u.writable&&(l=!1)}return(i||l||!r)&&(o?n(e,"length",t,!0,!0):n(e,"length",t)),e}},97882:(e,t,r)=>{"use strict";var i=r(1753),n=r(26106),o=r(71508),s=r(60021),a=i("%WeakMap%",!0),d=i("%Map%",!0),l=n("WeakMap.prototype.get",!0),u=n("WeakMap.prototype.set",!0),h=n("WeakMap.prototype.has",!0),c=n("Map.prototype.get",!0),p=n("Map.prototype.set",!0),m=n("Map.prototype.has",!0),f=function(e,t){for(var r,i=e;null!==(r=i.next);i=r)if(r.key===t)return i.next=r.next,r.next=e.next,e.next=r,r},y=function(e,t){var r=f(e,t);return r&&r.value},v=function(e,t,r){var i=f(e,t);i?i.value=r:e.next={key:t,next:e.next,value:r}};e.exports=function(){var e,t,r,i={assert:function(e){if(!i.has(e))throw new s("Side channel does not contain "+o(e))},get:function(i){if(a&&i&&("object"==typeof i||"function"==typeof i)){if(e)return l(e,i)}else if(d){if(t)return c(t,i)}else if(r)return y(r,i)},has:function(i){if(a&&i&&("object"==typeof i||"function"==typeof i)){if(e)return h(e,i)}else if(d){if(t)return m(t,i)}else if(r)return!!f(r,i);return!1},set:function(i,n){a&&i&&("object"==typeof i||"function"==typeof i)?(e||(e=new a),u(e,i,n)):d?(t||(t=new d),p(t,i,n)):(r||(r={key:{},next:null}),v(r,i,n))}};return i}},3517:(e,t,r)=>{"use strict";r.d(t,{D:()=>n});var i=r(2766);function n(e){let t="object"==typeof e.client?e.client:{},r="object"==typeof e.server?e.server:{},n=e.shared,o=e.runtimeEnv?e.runtimeEnv:{...process.env,...e.experimental__runtimeEnv};return function(e){let t=e.runtimeEnvStrict??e.runtimeEnv??process.env;if(e.emptyStringAsUndefined)for(let[e,r]of Object.entries(t))""===r&&delete t[e];if(e.skipValidation)return t;let r="object"==typeof e.client?e.client:{},n="object"==typeof e.server?e.server:{},o="object"==typeof e.shared?e.shared:{},s=i.z.object(r),a=i.z.object(n),d=i.z.object(o),l=e.isServer??"undefined"==typeof window,u=s.merge(d),h=a.merge(d).merge(s),c=l?h.safeParse(t):u.safeParse(t),p=e.onValidationError??(e=>{throw console.error("❌ Invalid environment variables:",e.flatten().fieldErrors),Error("Invalid environment variables")}),m=e.onInvalidAccess??(e=>{throw Error("❌ Attempted to access a server-side environment variable on the client")});if(!1===c.success)return p(c.error);let f=(e.extends??[]).reduce((e,t)=>Object.assign(e,t),{});return new Proxy(Object.assign({},c.data,f),{get(t,r){if("string"==typeof r&&"__esModule"!==r&&"$$typeof"!==r)return l||!e.clientPrefix||r.startsWith(e.clientPrefix)||void 0!==d.shape[r]?t[r]:m(r)}})}({...e,shared:n,client:t,server:r,clientPrefix:"NEXT_PUBLIC_",runtimeEnv:o})}},14853:(e,t,r)=>{"use strict";r.d(t,{o:()=>G});var i=r(33856),n=r(96547);let o=(0,n.vV)({raw:(e,t=[])=>(0,n.vV)({sql:e,query:i.x.createWithSql(e),parameters:(0,n.vV)(t)})}),s=Symbol();class a{#e;#t=new WeakMap;#r;constructor(e){this.#e=(0,n.vV)({...e})}async init(){this.#r=(0,n.mf)(this.#e.pool)?await this.#e.pool():this.#e.pool}async acquireConnection(){let e=await this.#r.connect(),t=this.#t.get(e);return!t&&(t=new d(e,{cursor:this.#e.cursor??null}),this.#t.set(e,t),this.#e.onCreateConnection&&await this.#e.onCreateConnection(t)),t}async beginTransaction(e,t){t.isolationLevel?await e.executeQuery(o.raw(`start transaction isolation level ${t.isolationLevel}`)):await e.executeQuery(o.raw("begin"))}async commitTransaction(e){await e.executeQuery(o.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(o.raw("rollback"))}async releaseConnection(e){e[s]()}async destroy(){if(this.#r){let e=this.#r;this.#r=void 0,await e.end()}}}class d{#i;#n;constructor(e,t){this.#i=e,this.#n=t}async executeQuery(e){try{let t=await this.#i.query(e.sql,[...e.parameters]);if("INSERT"===t.command||"UPDATE"===t.command||"DELETE"===t.command||"MERGE"===t.command){let e=BigInt(t.rowCount);return{numUpdatedOrDeletedRows:e,numAffectedRows:e,rows:t.rows??[]}}return{rows:t.rows??[]}}catch(e){throw function(e,t){if((0,n.Kn)(e)&&(0,n.HD)(e.stack)&&t.stack){let r=t.stack.split("\n").slice(1).join("\n");e.stack+=`
${r}`}return e}(e,Error())}}async *streamQuery(e,t){if(!this.#n.cursor)throw Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(t)||t<=0)throw Error("chunkSize must be a positive integer");let r=this.#i.query(new this.#n.cursor(e.sql,e.parameters.slice()));try{for(;;){let e=await r.read(t);if(0===e.length)break;yield{rows:e}}}finally{await r.close()}}[s](){this.#i.release()}}(0,n.vV)({__noMigrations__:!0});var l=r(24886),u=r(63516),h=r(23708),c=r(3646),p=r(6217),m=r(76922),f=r(14666),y=r(47808),v=r(48888),g=r(73733);class N{#o;constructor(e){this.#o=(0,n.vV)(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new b(this,e)}$castTo(){return new N({...this.#o})}$notNull(){return new N(this.#o)}withPlugin(e){return new N({...this.#o,plugins:void 0!==this.#o.plugins?(0,n.vV)([...this.#o.plugins,e]):(0,n.vV)([e])})}toOperationNode(){return this.#s(this.#a())}compile(e){return this.#d(this.#a(e))}async execute(e){let t=this.#a(e);return t.executeQuery(this.#d(t),this.#o.queryId)}#a(e){let t=void 0!==e?e.getExecutor():g.H;return void 0!==this.#o.plugins?t.withPlugins(this.#o.plugins):t}#s(e){return e.transformQuery(this.#o.rawNode,this.#o.queryId)}#d(e){return e.compileQuery(this.#s(e),this.#o.queryId)}}function w(e){return new N(e)}(0,v.q)(N,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class b{#l;#u;constructor(e,t){this.#l=e,this.#u=t}get expression(){return this.#l}get alias(){return this.#u}get rawBuilder(){return this.#l}toOperationNode(){return y.i.create(this.#l.toOperationNode(),(0,u.x)(this.#u)?this.#u.toOperationNode():l.T.create(this.#u))}}(0,v.q)(b,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");let _=Object.assign((e,...t)=>w({queryId:(0,f.y)(),rawNode:i.x.create(e,t?.map(x)??[])}),{ref:e=>w({queryId:(0,f.y)(),rawNode:i.x.createWithChild((0,c.KX)(e))}),val:e=>w({queryId:(0,f.y)(),rawNode:i.x.createWithChild((0,m.j2)(e))}),value(e){return this.val(e)},table:e=>w({queryId:(0,f.y)(),rawNode:i.x.createWithChild((0,p.G2)(e))}),id(...e){let t=Array(e.length+1).fill(".");return t[0]="",t[t.length-1]="",w({queryId:(0,f.y)(),rawNode:i.x.create(t,e.map(l.T.create))})},lit:e=>w({queryId:(0,f.y)(),rawNode:i.x.createWithChild(h.g.createImmediate(e))}),literal(e){return this.lit(e)},raw:e=>w({queryId:(0,f.y)(),rawNode:i.x.createWithSql(e)}),join(e,t=_`, `){let r=Array(2*e.length-1),n=t.toOperationNode();for(let t=0;t<e.length;++t)r[2*t]=x(e[t]),t!==e.length-1&&(r[2*t+1]=n);return w({queryId:(0,f.y)(),rawNode:i.x.createWithChildren(r)})}});function x(e){return(0,u.x)(e)?e.toOperationNode():(0,m.j2)(e)}class T{#h;constructor(e){this.#h=e}async getSchemas(){return(await this.#h.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(e=>({name:e.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let t=this.#h.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",_`col_description(a.attrelid, a.attnum)`.as("column_description"),this.#h.selectFrom("pg_class").select(_`true`.as("auto_incrementing")).whereRef("relnamespace","=","c.relnamespace").where("relkind","=","S").where("relname","=",_`c.relname || '_' || a.attname || '_seq'`).as("auto_incrementing")]).where(e=>e.or([e("c.relkind","=","r"),e("c.relkind","=","v")])).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(t=t.where("c.relname","!=","kysely_migration").where("c.relname","!=","kysely_migration_lock"));let r=await t.execute();return this.#c(r)}async getMetadata(e){return{tables:await this.getTables(e)}}#c(e){return e.reduce((e,t)=>{let r=e.find(e=>e.name===t.table&&e.schema===t.schema);return r||(r=(0,n.vV)({name:t.table,isView:"v"===t.table_type,schema:t.schema,columns:[]}),e.push(r)),r.columns.push((0,n.vV)({name:t.column,dataType:t.type,dataTypeSchema:t.type_schema,isNullable:!t.not_null,isAutoIncrementing:!!t.auto_incrementing,hasDefaultValue:t.has_default,comment:t.column_description??void 0})),e},[])}}var P=r(27189),O=r(18160);class S{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#p=(0,n.vV)({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#p[e.kind](e),this.nodeStack.pop()}}var E=r(82143),k=r(88377),C=r(84377),I=r(99787),V=r(60329),A=r(55936);class q extends S{#m="";#f=[];get numParameters(){return this.#f.length}compileQuery(e){return this.#m="",this.#f=[],this.visitNode(e),(0,n.vV)({query:e,sql:this.getSql(),parameters:[...this.#f]})}getSql(){return this.#m}visitSelectQuery(e){let t=void 0!==this.parentNode&&!k.L.is(this.parentNode)&&!O.P.is(this.parentNode)&&!P.u.is(this.parentNode)&&!I.B.is(this.parentNode)&&!V.M.is(this.parentNode);void 0===this.parentNode&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),t&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,t=", "){let r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(t)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let t=this.nodeStack.find(C.V.is),r=t!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!A.F.is(t)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!A.F.is(t)&&this.append(")")}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let t=this.nodeStack.find(C.V.is)!==e;!t&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),t&&this.append(")")}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!(0,n.HD)(e.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:t}=e;for(let e=0;e<t.length;++e)this.appendValue(t[e]),e!==t.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(D[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:t,parameters:r}=e;for(let e=0;e<t.length;++e)this.append(t[e]),r.length>e&&this.visitNode(r[e])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let t=this.nodeStack.find(C.V.is),r=t!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!A.F.is(t)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!A.F.is(t)&&this.append(")")}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),!0===e.doNothing?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),(0,n.jn)(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),"cascade"===e.modifier?this.append(" cascade"):"restrict"===e.modifier&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(W[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return E.$X.is(e)&&"-"===e.operator}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){for(let t of(e.inOperator&&this.visitNode(e.inOperator),this.append("'$"),e.pathLegs))this.visitNode(t);this.append("'")}visitJSONPathLeg(e){let t="ArrayLocation"===e.type;this.append(t?"[":"."),this.append(String(e.value)),t&&this.append("]")}visitJSONOperatorChain(e){for(let t=0,r=e.values.length;t<r;t++)t===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[t])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#m+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let t=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper(),i="";for(let n of e)i+=n,n===t?i+=t:n===r&&(i+=r);return i}addParameter(e){this.#f.push(e)}appendImmediateValue(e){if((0,n.HD)(e))this.append(`'${e}'`);else if((0,n.hj)(e)||(0,n.jn)(e))this.append(e.toString());else if((0,n.Ft)(e))this.append("null");else if((0,n.J_)(e))this.appendImmediateValue(e.toISOString());else if((0,n.C4)(e))this.appendImmediateValue(e.toString());else throw Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((e,t)=>e.modifier&&t.modifier?R[e.modifier]-R[t.modifier]:1),(0,n.vV)(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}let W=(0,n.vV)({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),R=(0,n.vV)({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),D=(0,n.vV)({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"}),j=/"/g;class L extends q{sanitizeIdentifier(e){return e.replace(j,'""')}}class M{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}}let F=BigInt("3853314791062309107");class B extends M{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e,t){await _`select pg_advisory_xact_lock(${_.lit(F)})`.execute(e)}async releaseMigrationLock(e,t){}}class G{#e;constructor(e){this.#e=e}createDriver(){return new a(this.#e)}createQueryCompiler(){return new L}createAdapter(){return new B}createIntrospector(e){return new T(e)}}},34401:(e,t,r)=>{"use strict";r.d(t,{Q:()=>s,a:()=>a});var i=r(63516),n=r(3646),o=r(96547);class s{#y;get dynamicReference(){return this.#y}get refType(){}constructor(e){this.#y=e}toOperationNode(){return(0,n.F9)(this.#y)}}function a(e){return(0,o.Kn)(e)&&(0,i.x)(e)&&(0,o.HD)(e.dynamicReference)}},82790:(e,t,r)=>{"use strict";r.d(t,{b:()=>R,Z:()=>D});var i=r(59882),n=r(21746),o=r(6217),s=r(64545),a=r(14666),d=r(84462),l=r(3646),u=r(74962),h=r(88377),c=r(13032),p=r(82143),m=r(96547);let f=(0,m.vV)({is:e=>"UnaryOperationNode"===e.kind,create:(e,t)=>(0,m.vV)({kind:"UnaryOperationNode",operator:e,operand:t})});var y=r(76922),v=r(73733),g=r(59686),N=r(74712),w=r(47808),b=r(24886),_=r(11106);let x=(0,m.vV)({is:e=>"JSONPathLegNode"===e.kind,create:(e,t)=>(0,m.vV)({kind:"JSONPathLegNode",type:e,value:t})});var T=r(97187),P=r(16750),O=r(63516),S=r(23708);class E{#v;constructor(e){this.#v=e}at(e){return this.#g("ArrayLocation",e)}key(e){return this.#g("Member",e)}#g(e,t){return new k(P.y.is(this.#v)?P.y.cloneWithTraversal(this.#v,T.t.is(this.#v.traversal)?T.t.cloneWithLeg(this.#v.traversal,x.create(e,t)):_.s.cloneWithValue(this.#v.traversal,S.g.createImmediate(t))):T.t.cloneWithLeg(this.#v,x.create(e,t)))}}class k extends E{#v;constructor(e){super(e),this.#v=e}get expressionType(){}as(e){return new C(this,e)}$castTo(){return new E(this.#v)}$notNull(){return new E(this.#v)}toOperationNode(){return this.#v}}class C{#N;#u;constructor(e,t){this.#N=e,this.#u=t}get expression(){return this.#N}get alias(){return this.#u}toOperationNode(){return w.i.create(this.#N.toOperationNode(),(0,O.x)(this.#u)?this.#u.toOperationNode():b.T.create(this.#u))}}var I=r(48666),V=r(16596);let A=(0,m.vV)({is:e=>"TupleNode"===e.kind,create:e=>(0,m.vV)({kind:"TupleNode",values:(0,m.vV)(e)})});var q=r(3904);let W=(0,m.vV)({is:e=>"CastNode"===e.kind,create:(e,t)=>(0,m.vV)({kind:"CastNode",expression:e,dataType:t})});function R(e=v.H){function t(e,t){return new c.Pc(f.create(p.$X.create(e),(0,l.jI)(t)))}let r=Object.assign(function(e,t,r){return new c.Pc((0,u.i9)(e,t,r))},{fn:void 0,eb:void 0,selectFrom:t=>(0,i.u)({queryId:(0,a.y)(),executor:e,queryNode:n.a.createFrom((0,o._V)(t))}),case:e=>new g.wY({node:N.j.create((0,m.o8)(e)?void 0:(0,l.jI)(e))}),ref:(e,t)=>(0,m.o8)(t)?new c.Pc((0,l.KX)(e)):new E((0,l.D2)(e,t)),jsonPath:()=>new E(T.t.create()),table:e=>new c.Pc((0,o.G2)(e)),val:e=>new c.Pc((0,y.j2)(e)),refTuple:(...e)=>new c.Pc(A.create(e.map(l.jI))),tuple:(...e)=>new c.Pc(A.create(e.map(y.j2))),lit:e=>new c.Pc((0,y.AB)(e)),unary:t,not:e=>t("not",e),exists:e=>t("exists",e),neg:e=>t("-",e),between:(e,t,r)=>new c.Pc(I.a.create((0,l.jI)(e),p.$X.create("between"),V.O.create((0,y.j2)(t),(0,y.j2)(r)))),betweenSymmetric:(e,t,r)=>new c.Pc(I.a.create((0,l.jI)(e),p.$X.create("between symmetric"),V.O.create((0,y.j2)(t),(0,y.j2)(r)))),and:e=>new c.Pc((0,m.DM)(e)?(0,u.QX)(e,"and"):(0,u.Li)(e,"and")),or:e=>new c.Pc((0,m.DM)(e)?(0,u.QX)(e,"or"):(0,u.Li)(e,"or")),parens(...e){let t=(0,u.k0)(e);return new c.Pc(h.L.is(t)?t:h.L.create(t))},cast:(e,t)=>new c.Pc(W.create((0,l.jI)(e),(0,q.z)(t))),withSchema:t=>R(e.withPluginAtFront(new s.v(t)))});return r.fn=(0,d.W)(),r.eb=r,r}function D(e){return R()}},13032:(e,t,r)=>{"use strict";r.d(t,{Pc:()=>u});var i=r(47808),n=r(16596),o=r(24886),s=r(63516),a=r(82750),d=r(88377),l=r(74962);class u{#v;constructor(e){this.#v=e}get expressionType(){}as(e){return new h(this,e)}or(...e){return new c(a.O.create(this.#v,(0,l.k0)(e)))}and(...e){return new p(n.O.create(this.#v,(0,l.k0)(e)))}$castTo(){return new u(this.#v)}$notNull(){return new u(this.#v)}toOperationNode(){return this.#v}}class h{#w;#u;constructor(e,t){this.#w=e,this.#u=t}get expression(){return this.#w}get alias(){return this.#u}toOperationNode(){return i.i.create(this.#w.toOperationNode(),(0,s.x)(this.#u)?this.#u.toOperationNode():o.T.create(this.#u))}}class c{#v;constructor(e){this.#v=e}get expressionType(){}as(e){return new h(this,e)}or(...e){return new c(a.O.create(this.#v,(0,l.k0)(e)))}$castTo(){return new c(this.#v)}toOperationNode(){return d.L.create(this.#v)}}class p{#v;constructor(e){this.#v=e}get expressionType(){}as(e){return new h(this,e)}and(...e){return new p(n.O.create(this.#v,(0,l.k0)(e)))}$castTo(){return new p(this.#v)}toOperationNode(){return d.L.create(this.#v)}}},53411:(e,t,r)=>{"use strict";r.d(t,{$2:()=>eM});var i=r(96547);let n=(0,i.vV)({is:e=>"AlterTableNode"===e.kind,create:e=>(0,i.vV)({kind:"AlterTableNode",table:e}),cloneWithTableProps:(e,t)=>(0,i.vV)({...e,...t}),cloneWithColumnAlteration:(e,t)=>(0,i.vV)({...e,columnAlterations:e.columnAlterations?[...e.columnAlterations,t]:[t]})});var o=r(24886);let s=(0,i.vV)({is:e=>"CreateIndexNode"===e.kind,create:e=>(0,i.vV)({kind:"CreateIndexNode",name:o.T.create(e)}),cloneWith:(e,t)=>(0,i.vV)({...e,...t}),cloneWithColumns:(e,t)=>(0,i.vV)({...e,columns:[...e.columns||[],...t]})}),a=(0,i.vV)({is:e=>"CreateSchemaNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"CreateSchemaNode",schema:o.T.create(e),...t}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})});var d=r(27189),l=r(38118);let u=(0,i.vV)({is:e=>"DropIndexNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"DropIndexNode",name:l.j.create(e),...t}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})}),h=(0,i.vV)({is:e=>"DropSchemaNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"DropSchemaNode",schema:o.T.create(e),...t}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})}),c=(0,i.vV)({is:e=>"DropTableNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"DropTableNode",table:e,...t}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})});var p=r(6217);let m=(0,i.vV)({is:e=>"AddColumnNode"===e.kind,create:e=>(0,i.vV)({kind:"AddColumnNode",column:e})});var f=r(53130);let y=(0,i.vV)({is:e=>"ColumnDefinitionNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"ColumnDefinitionNode",column:f.k.create(e),dataType:t}),cloneWithFrontModifier:(e,t)=>(0,i.vV)({...e,frontModifiers:e.frontModifiers?(0,i.vV)([...e.frontModifiers,t]):[t]}),cloneWithEndModifier:(e,t)=>(0,i.vV)({...e,endModifiers:e.endModifiers?(0,i.vV)([...e.endModifiers,t]):[t]}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})}),v=(0,i.vV)({is:e=>"DropColumnNode"===e.kind,create:e=>(0,i.vV)({kind:"DropColumnNode",column:f.k.create(e)})}),g=(0,i.vV)({is:e=>"RenameColumnNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"RenameColumnNode",column:f.k.create(e),renameTo:f.k.create(t)})});var N=r(48888);let w=(0,i.vV)({is:e=>"CheckConstraintNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"CheckConstraintNode",expression:e,name:t?o.T.create(t):void 0})}),b=["no action","restrict","cascade","set null","set default"],_=(0,i.vV)({is:e=>"ReferencesNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"ReferencesNode",table:e,columns:(0,i.vV)([...t])}),cloneWithOnDelete:(e,t)=>(0,i.vV)({...e,onDelete:t}),cloneWithOnUpdate:(e,t)=>(0,i.vV)({...e,onUpdate:t})});var x=r(51410),T=r(3646),P=r(63516),O=r(23708);function S(e){return(0,P.x)(e)?e.toOperationNode():O.g.createImmediate(e)}let E=(0,i.vV)({is:e=>"GeneratedNode"===e.kind,create:e=>(0,i.vV)({kind:"GeneratedNode",...e}),createWithExpression:e=>(0,i.vV)({kind:"GeneratedNode",always:!0,expression:e}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})}),k=(0,i.vV)({is:e=>"DefaultValueNode"===e.kind,create:e=>(0,i.vV)({kind:"DefaultValueNode",defaultValue:e})});function C(e){if(b.includes(e))return e;throw Error(`invalid OnModifyForeignAction ${e}`)}class I{#v;constructor(e){this.#v=e}autoIncrement(){return new I(y.cloneWith(this.#v,{autoIncrement:!0}))}identity(){return new I(y.cloneWith(this.#v,{identity:!0}))}primaryKey(){return new I(y.cloneWith(this.#v,{primaryKey:!0}))}references(e){let t=(0,T.KX)(e);if(!t.table||x.B.is(t.column))throw Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new I(y.cloneWith(this.#v,{references:_.create(t.table,[t.column])}))}onDelete(e){if(!this.#v.references)throw Error("on delete constraint can only be added for foreign keys");return new I(y.cloneWith(this.#v,{references:_.cloneWithOnDelete(this.#v.references,C(e))}))}onUpdate(e){if(!this.#v.references)throw Error("on update constraint can only be added for foreign keys");return new I(y.cloneWith(this.#v,{references:_.cloneWithOnUpdate(this.#v.references,C(e))}))}unique(){return new I(y.cloneWith(this.#v,{unique:!0}))}notNull(){return new I(y.cloneWith(this.#v,{notNull:!0}))}unsigned(){return new I(y.cloneWith(this.#v,{unsigned:!0}))}defaultTo(e){return new I(y.cloneWith(this.#v,{defaultTo:k.create(S(e))}))}check(e){return new I(y.cloneWith(this.#v,{check:w.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new I(y.cloneWith(this.#v,{generated:E.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new I(y.cloneWith(this.#v,{generated:E.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new I(y.cloneWith(this.#v,{generated:E.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#v.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new I(y.cloneWith(this.#v,{generated:E.cloneWith(this.#v.generated,{stored:!0})}))}modifyFront(e){return new I(y.cloneWithFrontModifier(this.#v,e.toOperationNode()))}nullsNotDistinct(){return new I(y.cloneWith(this.#v,{nullsNotDistinct:!0}))}modifyEnd(e){return new I(y.cloneWithEndModifier(this.#v,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#v}}(0,N.q)(I,"don't await ColumnDefinitionBuilder instances directly.");let V=(0,i.vV)({is:e=>"ModifyColumnNode"===e.kind,create:e=>(0,i.vV)({kind:"ModifyColumnNode",column:e})});var A=r(3904);let q=(0,i.vV)({is:e=>"ForeignKeyConstraintNode"===e.kind,create:(e,t,r,n)=>(0,i.vV)({kind:"ForeignKeyConstraintNode",columns:e,references:_.create(t,r),name:n?o.T.create(n):void 0}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})});class W{#v;constructor(e){this.#v=e}onDelete(e){return new W(q.cloneWith(this.#v,{onDelete:C(e)}))}onUpdate(e){return new W(q.cloneWith(this.#v,{onUpdate:C(e)}))}$call(e){return e(this)}toOperationNode(){return this.#v}}(0,N.q)(W,"don't await ForeignKeyConstraintBuilder instances directly.");let R=(0,i.vV)({is:e=>"AddConstraintNode"===e.kind,create:e=>(0,i.vV)({kind:"AddConstraintNode",constraint:e})}),D=(0,i.vV)({is:e=>"UniqueConstraintNode"===e.kind,create:(e,t,r)=>(0,i.vV)({kind:"UniqueConstraintNode",columns:(0,i.vV)(e.map(f.k.create)),name:t?o.T.create(t):void 0,nullsNotDistinct:r}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})}),j=(0,i.vV)({is:e=>"DropConstraintNode"===e.kind,create:e=>(0,i.vV)({kind:"DropConstraintNode",constraintName:o.T.create(e)}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})}),L=(0,i.vV)({is:e=>"AlterColumnNode"===e.kind,create:(e,t,r)=>(0,i.vV)({kind:"AlterColumnNode",column:f.k.create(e),[t]:r})});class M{#b;constructor(e){this.#b=e}setDataType(e){return new F(L.create(this.#b,"dataType",(0,A.z)(e)))}setDefault(e){return new F(L.create(this.#b,"setDefault",S(e)))}dropDefault(){return new F(L.create(this.#b,"dropDefault",!0))}setNotNull(){return new F(L.create(this.#b,"setNotNull",!0))}dropNotNull(){return new F(L.create(this.#b,"dropNotNull",!0))}$call(e){return e(this)}}class F{#_;constructor(e){this.#_=e}toOperationNode(){return this.#_}}class B{#o;constructor(e){this.#o=(0,i.vV)(e)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(B,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class G{#o;constructor(e){this.#o=(0,i.vV)(e)}onDelete(e){return new G({...this.#o,constraintBuilder:this.#o.constraintBuilder.onDelete(e)})}onUpdate(e){return new G({...this.#o,constraintBuilder:this.#o.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#o.executor.transformQuery(n.cloneWithTableProps(this.#o.node,{addConstraint:R.create(this.#o.constraintBuilder.toOperationNode())}),this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(G,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class U{#o;constructor(e){this.#o=(0,i.vV)(e)}ifExists(){return new U({...this.#o,node:n.cloneWithTableProps(this.#o.node,{dropConstraint:j.cloneWith(this.#o.node.dropConstraint,{ifExists:!0})})})}cascade(){return new U({...this.#o,node:n.cloneWithTableProps(this.#o.node,{dropConstraint:j.cloneWith(this.#o.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new U({...this.#o,node:n.cloneWithTableProps(this.#o.node,{dropConstraint:j.cloneWith(this.#o.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(U,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");let $=(0,i.vV)({is:e=>"PrimaryKeyConstraintNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"PrimaryKeyConstraintNode",columns:(0,i.vV)(e.map(f.k.create)),name:t?o.T.create(t):void 0})}),Z=(0,i.vV)({is:e=>"AddIndexNode"===e.kind,create:e=>(0,i.vV)({kind:"AddIndexNode",name:o.T.create(e)}),cloneWith:(e,t)=>(0,i.vV)({...e,...t}),cloneWithColumns:(e,t)=>(0,i.vV)({...e,columns:[...e.columns||[],...t]})});var Q=r(33856);class J{#o;constructor(e){this.#o=(0,i.vV)(e)}unique(){return new J({...this.#o,node:n.cloneWithTableProps(this.#o.node,{addIndex:Z.cloneWith(this.#o.node.addIndex,{unique:!0})})})}column(e){return new J({...this.#o,node:n.cloneWithTableProps(this.#o.node,{addIndex:Z.cloneWithColumns(this.#o.node.addIndex,[(0,T.Dz)(e)])})})}columns(e){return new J({...this.#o,node:n.cloneWithTableProps(this.#o.node,{addIndex:Z.cloneWithColumns(this.#o.node.addIndex,e.map(T.Dz))})})}expression(e){return new J({...this.#o,node:n.cloneWithTableProps(this.#o.node,{addIndex:Z.cloneWithColumns(this.#o.node.addIndex,[e.toOperationNode()])})})}using(e){return new J({...this.#o,node:n.cloneWithTableProps(this.#o.node,{addIndex:Z.cloneWith(this.#o.node.addIndex,{using:Q.x.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(J,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class K{#v;constructor(e){this.#v=e}toOperationNode(){return this.#v}nullsNotDistinct(){return new K(D.cloneWith(this.#v,{nullsNotDistinct:!0}))}}(0,N.q)(K,"don't await UniqueConstraintNodeBuilder instances directly.");class z{#o;constructor(e){this.#o=(0,i.vV)(e)}renameTo(e){return new B({...this.#o,node:n.cloneWithTableProps(this.#o.node,{renameTo:(0,p.G2)(e)})})}setSchema(e){return new B({...this.#o,node:n.cloneWithTableProps(this.#o.node,{setSchema:o.T.create(e)})})}alterColumn(e,t){let r=t(new M(e));return new H({...this.#o,node:n.cloneWithColumnAlteration(this.#o.node,r.toOperationNode())})}dropColumn(e){return new H({...this.#o,node:n.cloneWithColumnAlteration(this.#o.node,v.create(e))})}renameColumn(e,t){return new H({...this.#o,node:n.cloneWithColumnAlteration(this.#o.node,g.create(e,t))})}addColumn(e,t,r=i.ZT){let o=r(new I(y.create(e,(0,A.z)(t))));return new H({...this.#o,node:n.cloneWithColumnAlteration(this.#o.node,m.create(o.toOperationNode()))})}modifyColumn(e,t,r=i.ZT){let o=r(new I(y.create(e,(0,A.z)(t))));return new H({...this.#o,node:n.cloneWithColumnAlteration(this.#o.node,V.create(o.toOperationNode()))})}addUniqueConstraint(e,t,r=i.ZT){let o=r(new K(D.create(t,e)));return new B({...this.#o,node:n.cloneWithTableProps(this.#o.node,{addConstraint:R.create(o.toOperationNode())})})}addCheckConstraint(e,t){return new B({...this.#o,node:n.cloneWithTableProps(this.#o.node,{addConstraint:R.create(w.create(t.toOperationNode(),e))})})}addForeignKeyConstraint(e,t,r,i){return new G({...this.#o,constraintBuilder:new W(q.create(t.map(f.k.create),(0,p.G2)(r),i.map(f.k.create),e))})}addPrimaryKeyConstraint(e,t){return new B({...this.#o,node:n.cloneWithTableProps(this.#o.node,{addConstraint:R.create($.create(t,e))})})}dropConstraint(e){return new U({...this.#o,node:n.cloneWithTableProps(this.#o.node,{dropConstraint:j.create(e)})})}addIndex(e){return new J({...this.#o,node:n.cloneWithTableProps(this.#o.node,{addIndex:Z.create(e)})})}dropIndex(e){return new B({...this.#o,node:n.cloneWithTableProps(this.#o.node,{dropIndex:u.create(e)})})}$call(e){return e(this)}}class H{#o;constructor(e){this.#o=(0,i.vV)(e)}alterColumn(e,t){let r=t(new M(e));return new H({...this.#o,node:n.cloneWithColumnAlteration(this.#o.node,r.toOperationNode())})}dropColumn(e){return new H({...this.#o,node:n.cloneWithColumnAlteration(this.#o.node,v.create(e))})}renameColumn(e,t){return new H({...this.#o,node:n.cloneWithColumnAlteration(this.#o.node,g.create(e,t))})}addColumn(e,t,r=i.ZT){let o=r(new I(y.create(e,(0,A.z)(t))));return new H({...this.#o,node:n.cloneWithColumnAlteration(this.#o.node,m.create(o.toOperationNode()))})}modifyColumn(e,t,r=i.ZT){let o=r(new I(y.create(e,(0,A.z)(t))));return new H({...this.#o,node:n.cloneWithColumnAlteration(this.#o.node,V.create(o.toOperationNode()))})}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(z,"don't await AlterTableBuilder instances"),(0,N.q)(M,"don't await AlterColumnBuilder instances"),(0,N.q)(H,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");var X=r(74962),Y=r(84377),ee=r(34603);class et extends ee.s{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class er{#o;constructor(e){this.#o=(0,i.vV)(e)}ifNotExists(){return new er({...this.#o,node:s.cloneWith(this.#o.node,{ifNotExists:!0})})}unique(){return new er({...this.#o,node:s.cloneWith(this.#o.node,{unique:!0})})}nullsNotDistinct(){return new er({...this.#o,node:s.cloneWith(this.#o.node,{nullsNotDistinct:!0})})}on(e){return new er({...this.#o,node:s.cloneWith(this.#o.node,{table:(0,p.G2)(e)})})}column(e){return new er({...this.#o,node:s.cloneWithColumns(this.#o.node,[(0,T.Dz)(e)])})}columns(e){return new er({...this.#o,node:s.cloneWithColumns(this.#o.node,e.map(T.Dz))})}expression(e){return new er({...this.#o,node:s.cloneWithColumns(this.#o.node,[e.toOperationNode()])})}using(e){return new er({...this.#o,node:s.cloneWith(this.#o.node,{using:Q.x.createWithSql(e)})})}where(...e){let t=new et;return new er({...this.#o,node:Y.V.cloneWithWhere(this.#o.node,t.transformNode((0,X.k0)(e)))})}$call(e){return e(this)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(er,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class ei{#o;constructor(e){this.#o=(0,i.vV)(e)}ifNotExists(){return new ei({...this.#o,node:a.cloneWith(this.#o.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(ei,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");var en=r(89787);class eo{#o;constructor(e){this.#o=(0,i.vV)(e)}temporary(){return new eo({...this.#o,node:d.u.cloneWith(this.#o.node,{temporary:!0})})}onCommit(e){return new eo({...this.#o,node:d.u.cloneWith(this.#o.node,{onCommit:function(e){if(d.h.includes(e))return e;throw Error(`invalid OnCommitAction ${e}`)}(e)})})}ifNotExists(){return new eo({...this.#o,node:d.u.cloneWith(this.#o.node,{ifNotExists:!0})})}addColumn(e,t,r=i.ZT){let n=r(new I(y.create(e,(0,A.z)(t))));return new eo({...this.#o,node:d.u.cloneWithColumn(this.#o.node,n.toOperationNode())})}addPrimaryKeyConstraint(e,t){return new eo({...this.#o,node:d.u.cloneWithConstraint(this.#o.node,$.create(t,e))})}addUniqueConstraint(e,t,r=i.ZT){let n=r(new K(D.create(t,e)));return new eo({...this.#o,node:d.u.cloneWithConstraint(this.#o.node,n.toOperationNode())})}addCheckConstraint(e,t){return new eo({...this.#o,node:d.u.cloneWithConstraint(this.#o.node,w.create(t.toOperationNode(),e))})}addForeignKeyConstraint(e,t,r,n,o=i.ZT){let s=o(new W(q.create(t.map(f.k.create),(0,p.G2)(r),n.map(f.k.create),e)));return new eo({...this.#o,node:d.u.cloneWithConstraint(this.#o.node,s.toOperationNode())})}modifyFront(e){return new eo({...this.#o,node:d.u.cloneWithFrontModifier(this.#o.node,e.toOperationNode())})}modifyEnd(e){return new eo({...this.#o,node:d.u.cloneWithEndModifier(this.#o.node,e.toOperationNode())})}as(e){return new eo({...this.#o,node:d.u.cloneWith(this.#o.node,{selectQuery:(0,en.BJ)(e)})})}$call(e){return e(this)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(eo,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class es{#o;constructor(e){this.#o=(0,i.vV)(e)}on(e){return new es({...this.#o,node:u.cloneWith(this.#o.node,{table:(0,p.G2)(e)})})}ifExists(){return new es({...this.#o,node:u.cloneWith(this.#o.node,{ifExists:!0})})}cascade(){return new es({...this.#o,node:u.cloneWith(this.#o.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(es,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class ea{#o;constructor(e){this.#o=(0,i.vV)(e)}ifExists(){return new ea({...this.#o,node:h.cloneWith(this.#o.node,{ifExists:!0})})}cascade(){return new ea({...this.#o,node:h.cloneWith(this.#o.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(ea,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class ed{#o;constructor(e){this.#o=(0,i.vV)(e)}ifExists(){return new ed({...this.#o,node:c.cloneWith(this.#o.node,{ifExists:!0})})}cascade(){return new ed({...this.#o,node:c.cloneWith(this.#o.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(ed,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");var el=r(14666),eu=r(64545),eh=r(99787);class ec{#x=new et;transformQuery(e){return this.#x.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class ep{#o;constructor(e){this.#o=(0,i.vV)(e)}temporary(){return new ep({...this.#o,node:eh.B.cloneWith(this.#o.node,{temporary:!0})})}materialized(){return new ep({...this.#o,node:eh.B.cloneWith(this.#o.node,{materialized:!0})})}ifNotExists(){return new ep({...this.#o,node:eh.B.cloneWith(this.#o.node,{ifNotExists:!0})})}orReplace(){return new ep({...this.#o,node:eh.B.cloneWith(this.#o.node,{orReplace:!0})})}columns(e){return new ep({...this.#o,node:eh.B.cloneWith(this.#o.node,{columns:e.map(T.xM)})})}as(e){let t=e.withPlugin(new ec).toOperationNode();return new ep({...this.#o,node:eh.B.cloneWith(this.#o.node,{as:t})})}$call(e){return e(this)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(ep,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");let em=(0,i.vV)({is:e=>"DropViewNode"===e.kind,create:e=>(0,i.vV)({kind:"DropViewNode",name:l.j.create(e)}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})});class ef{#o;constructor(e){this.#o=(0,i.vV)(e)}materialized(){return new ef({...this.#o,node:em.cloneWith(this.#o.node,{materialized:!0})})}ifExists(){return new ef({...this.#o,node:em.cloneWith(this.#o.node,{ifExists:!0})})}cascade(){return new ef({...this.#o,node:em.cloneWith(this.#o.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(ef,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");var ey=r(51935);let ev=(0,i.vV)({is:e=>"CreateTypeNode"===e.kind,create:e=>(0,i.vV)({kind:"CreateTypeNode",name:e}),cloneWithEnum:(e,t)=>(0,i.vV)({...e,enum:ey.F.create(t.map(e=>O.g.createImmediate(e)))})});class eg{#o;constructor(e){this.#o=(0,i.vV)(e)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}asEnum(e){return new eg({...this.#o,node:ev.cloneWithEnum(this.#o.node,e)})}$call(e){return e(this)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}(0,N.q)(eg,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");let eN=(0,i.vV)({is:e=>"DropTypeNode"===e.kind,create:e=>(0,i.vV)({kind:"DropTypeNode",name:e}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})});class ew{#o;constructor(e){this.#o=(0,i.vV)(e)}ifExists(){return new ew({...this.#o,node:eN.cloneWith(this.#o.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#o.executor.transformQuery(this.#o.node,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){await this.#o.executor.executeQuery(this.compile(),this.#o.queryId)}}function eb(e){if(!e.includes("."))return l.j.create(e);{let t=e.split(".").map(e_);if(2===t.length)return l.j.createWithSchema(t[0],t[1]);throw Error(`invalid schemable identifier ${e}`)}}function e_(e){return e.trim()}(0,N.q)(ew,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");class ex{#T;constructor(e){this.#T=e}createTable(e){return new eo({queryId:(0,el.y)(),executor:this.#T,node:d.u.create((0,p.G2)(e))})}dropTable(e){return new ed({queryId:(0,el.y)(),executor:this.#T,node:c.create((0,p.G2)(e))})}createIndex(e){return new er({queryId:(0,el.y)(),executor:this.#T,node:s.create(e)})}dropIndex(e){return new es({queryId:(0,el.y)(),executor:this.#T,node:u.create(e)})}createSchema(e){return new ei({queryId:(0,el.y)(),executor:this.#T,node:a.create(e)})}dropSchema(e){return new ea({queryId:(0,el.y)(),executor:this.#T,node:h.create(e)})}alterTable(e){return new z({queryId:(0,el.y)(),executor:this.#T,node:n.create((0,p.G2)(e))})}createView(e){return new ep({queryId:(0,el.y)(),executor:this.#T,node:eh.B.create(e)})}dropView(e){return new ef({queryId:(0,el.y)(),executor:this.#T,node:em.create(e)})}createType(e){return new eg({queryId:(0,el.y)(),executor:this.#T,node:ev.create(eb(e))})}dropType(e){return new ew({queryId:(0,el.y)(),executor:this.#T,node:eN.create(eb(e))})}withPlugin(e){return new ex(this.#T.withPlugin(e))}withoutPlugins(){return new ex(this.#T.withoutPlugins())}withSchema(e){return new ex(this.#T.withPluginAtFront(new eu.v(e)))}}var eT=r(34401);class eP{ref(e){return new eT.Q(e)}}class eO{#P;constructor(e){this.#P=e}async provideConnection(e){let t=await this.#P.acquireConnection();try{return await e(t)}finally{await this.#P.releaseConnection(t)}}}var eS=r(12448),eE=r(11874);class ek extends eE.u{#O;#S;#E;constructor(e,t,r,i=[]){super(i),this.#O=e,this.#S=t,this.#E=r}get adapter(){return this.#S}compileQuery(e){return this.#O.compileQuery(e)}provideConnection(e){return this.#E.provideConnection(e)}withPlugins(e){return new ek(this.#O,this.#S,this.#E,[...this.plugins,...e])}withPlugin(e){return new ek(this.#O,this.#S,this.#E,[...this.plugins,e])}withPluginAtFront(e){return new ek(this.#O,this.#S,this.#E,[e,...this.plugins])}withConnectionProvider(e){return new ek(this.#O,this.#S,e,[...this.plugins])}withoutPlugins(){return new ek(this.#O,this.#S,this.#E,[])}}function eC(){return"undefined"!=typeof performance&&(0,i.mf)(performance.now)?performance.now():Date.now()}class eI{#P;#k;#C;#I;#V;#t=new WeakSet;constructor(e,t){this.#I=!1,this.#P=e,this.#k=t}async init(){if(this.#V)throw Error("driver has already been destroyed");this.#C||(this.#C=this.#P.init().then(()=>{this.#I=!0}).catch(e=>(this.#C=void 0,Promise.reject(e)))),await this.#C}async acquireConnection(){if(this.#V)throw Error("driver has already been destroyed");this.#I||await this.init();let e=await this.#P.acquireConnection();return this.#t.has(e)||(this.#A()&&this.#q(e),this.#t.add(e)),e}async releaseConnection(e){await this.#P.releaseConnection(e)}beginTransaction(e,t){return this.#P.beginTransaction(e,t)}commitTransaction(e){return this.#P.commitTransaction(e)}rollbackTransaction(e){return this.#P.rollbackTransaction(e)}async destroy(){this.#C&&(await this.#C,this.#V||(this.#V=this.#P.destroy().catch(e=>(this.#V=void 0,Promise.reject(e)))),await this.#V)}#A(){return this.#k.isLevelEnabled("query")||this.#k.isLevelEnabled("error")}#q(e){let t=e.executeQuery;e.executeQuery=async r=>{let i;let n=eC();try{return await t.call(e,r)}catch(e){throw i=e,await this.#W(e,r,n),e}finally{i||await this.#R(r,n)}}}async #W(e,t,r){await this.#k.error(()=>({level:"error",error:e,query:t,queryDurationMillis:this.#D(r)}))}async #R(e,t){await this.#k.query(()=>({level:"query",query:e,queryDurationMillis:this.#D(t)}))}#D(e){return eC()-e}}let eV=()=>{};class eA{#j;#L;constructor(e){this.#j=e}async provideConnection(e){for(;this.#L;)await this.#L.catch(eV);return this.#L=this.#M(e).finally(()=>{this.#L=void 0}),this.#L}async #M(e){return await e(this.#j)}}let eq=["read uncommitted","read committed","repeatable read","serializable","snapshot"];var eW=r(84462);(0,i.vV)(["query","error"]);class eR{#F;#B;constructor(e){(0,i.mf)(e)?(this.#B=e,this.#F=(0,i.vV)({query:!0,error:!0})):(this.#B=eD,this.#F=(0,i.vV)({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#F[e]}async query(e){this.#F.query&&await this.#B(e())}async error(e){this.#F.error&&await this.#B(e())}}function eD(e){"query"===e.level?(console.log(`kysely:query: ${e.query.sql}`),console.log(`kysely:query: duration: ${e.queryDurationMillis.toFixed(1)}ms`)):"error"===e.level&&(e.error instanceof Error?console.error(`kysely:error: ${e.error.stack??e.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:e.error,query:e.query.sql,queryDurationMillis:e.queryDurationMillis})}`))}var ej=r(59686),eL=r(74712);class eM extends eS.x{#o;constructor(e){let t,r;if(function(e){return(0,i.Kn)(e)&&(0,i.Kn)(e.config)&&(0,i.Kn)(e.driver)&&(0,i.Kn)(e.executor)&&(0,i.Kn)(e.dialect)}(e))t={executor:e.executor},r={...e};else{let i=e.dialect,n=i.createDriver(),o=i.createQueryCompiler(),s=i.createAdapter(),a=new eI(n,new eR(e.log??[])),d=new ek(o,s,new eO(a),e.plugins??[]);t={executor:d},r={config:e,executor:d,dialect:i,driver:a}}super(t),this.#o=(0,i.vV)(r)}get schema(){return new ex(this.#o.executor)}get dynamic(){return new eP}get introspection(){return this.#o.dialect.createIntrospector(this.withoutPlugins())}case(e){return new ej.wY({node:eL.j.create((0,i.o8)(e)?void 0:(0,en.BJ)(e))})}get fn(){return(0,eW.W)()}transaction(){return new eG({...this.#o})}connection(){return new eB({...this.#o})}withPlugin(e){return new eM({...this.#o,executor:this.#o.executor.withPlugin(e)})}withoutPlugins(){return new eM({...this.#o,executor:this.#o.executor.withoutPlugins()})}withSchema(e){return new eM({...this.#o,executor:this.#o.executor.withPluginAtFront(new eu.v(e))})}withTables(){return new eM({...this.#o})}async destroy(){await this.#o.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#o.executor}executeQuery(e,t=(0,el.y)()){let r=(0,i.Kn)(e)&&(0,i.mf)(e.compile)?e.compile():e;return this.getExecutor().executeQuery(r,t)}}class eF extends eM{#o;constructor(e){super(e),this.#o=e}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new eF({...this.#o,executor:this.#o.executor.withPlugin(e)})}withoutPlugins(){return new eF({...this.#o,executor:this.#o.executor.withoutPlugins()})}withSchema(e){return new eF({...this.#o,executor:this.#o.executor.withPluginAtFront(new eu.v(e))})}withTables(){return new eF({...this.#o})}}class eB{#o;constructor(e){this.#o=(0,i.vV)(e)}async execute(e){return this.#o.executor.provideConnection(async t=>{let r=this.#o.executor.withConnectionProvider(new eA(t)),i=new eM({...this.#o,executor:r});return await e(i)})}}(0,N.q)(eB,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class eG{#o;constructor(e){this.#o=(0,i.vV)(e)}setIsolationLevel(e){return new eG({...this.#o,isolationLevel:e})}async execute(e){let{isolationLevel:t,...r}=this.#o,i={isolationLevel:t};return function(e){if(e.isolationLevel&&!eq.includes(e.isolationLevel))throw Error(`invalid transaction isolation level ${e.isolationLevel}`)}(i),this.#o.executor.provideConnection(async t=>{let n=this.#o.executor.withConnectionProvider(new eA(t)),o=new eF({...r,executor:n});try{await this.#o.driver.beginTransaction(t,i);let r=await e(o);return await this.#o.driver.commitTransaction(t),r}catch(e){throw await this.#o.driver.rollbackTransaction(t),e}})}}(0,N.q)(eG,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method")},47808:(e,t,r)=>{"use strict";r.d(t,{i:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"AliasNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"AliasNode",node:e,alias:t})})},16596:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"AndNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"AndNode",left:e,right:t})})},48666:(e,t,r)=>{"use strict";r.d(t,{a:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"BinaryOperationNode"===e.kind,create:(e,t,r)=>(0,i.vV)({kind:"BinaryOperationNode",leftOperand:e,operator:t,rightOperand:r})})},74712:(e,t,r)=>{"use strict";r.d(t,{j:()=>o});var i=r(96547),n=r(67069);let o=(0,i.vV)({is:e=>"CaseNode"===e.kind,create:e=>(0,i.vV)({kind:"CaseNode",value:e}),cloneWithWhen:(e,t)=>(0,i.vV)({...e,when:(0,i.vV)(e.when?[...e.when,t]:[t])}),cloneWithThen:(e,t)=>(0,i.vV)({...e,when:e.when?(0,i.vV)([...e.when.slice(0,-1),n.$.cloneWithResult(e.when[e.when.length-1],t)]):void 0}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})})},53130:(e,t,r)=>{"use strict";r.d(t,{k:()=>o});var i=r(96547),n=r(24886);let o=(0,i.vV)({is:e=>"ColumnNode"===e.kind,create:e=>(0,i.vV)({kind:"ColumnNode",column:n.T.create(e)})})},27189:(e,t,r)=>{"use strict";r.d(t,{h:()=>n,u:()=>o});var i=r(96547);let n=["preserve rows","delete rows","drop"],o=(0,i.vV)({is:e=>"CreateTableNode"===e.kind,create:e=>(0,i.vV)({kind:"CreateTableNode",table:e,columns:(0,i.vV)([])}),cloneWithColumn:(e,t)=>(0,i.vV)({...e,columns:(0,i.vV)([...e.columns,t])}),cloneWithConstraint:(e,t)=>(0,i.vV)({...e,constraints:e.constraints?(0,i.vV)([...e.constraints,t]):(0,i.vV)([t])}),cloneWithFrontModifier:(e,t)=>(0,i.vV)({...e,frontModifiers:e.frontModifiers?(0,i.vV)([...e.frontModifiers,t]):(0,i.vV)([t])}),cloneWithEndModifier:(e,t)=>(0,i.vV)({...e,endModifiers:e.endModifiers?(0,i.vV)([...e.endModifiers,t]):(0,i.vV)([t])}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})})},99787:(e,t,r)=>{"use strict";r.d(t,{B:()=>o});var i=r(96547),n=r(38118);let o=(0,i.vV)({is:e=>"CreateViewNode"===e.kind,create:e=>(0,i.vV)({kind:"CreateViewNode",name:n.j.create(e)}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})})},72303:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});var i=r(96547),n=r(73053),o=r(63486);let s=(0,i.vV)({is:e=>"UsingNode"===e.kind,create:e=>(0,i.vV)({kind:"UsingNode",tables:(0,i.vV)(e)}),cloneWithTables:(e,t)=>(0,i.vV)({...e,tables:(0,i.vV)([...e.tables,...t])})}),a=(0,i.vV)({is:e=>"DeleteQueryNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"DeleteQueryNode",from:n.e.create(e),...t&&{with:t}}),cloneWithOrderByItems:(e,t)=>(0,i.vV)({...e,orderBy:e.orderBy?o.r.cloneWithItems(e.orderBy,t):o.r.create(t)}),cloneWithoutOrderBy:e=>(0,i.vV)({...e,orderBy:void 0}),cloneWithLimit:(e,t)=>(0,i.vV)({...e,limit:t}),cloneWithoutLimit:e=>(0,i.vV)({...e,limit:void 0}),cloneWithUsing:(e,t)=>(0,i.vV)({...e,using:void 0!==e.using?s.cloneWithTables(e.using,t):s.create(t)})})},73053:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"FromNode"===e.kind,create:e=>(0,i.vV)({kind:"FromNode",froms:(0,i.vV)(e)}),cloneWithFroms:(e,t)=>(0,i.vV)({...e,froms:(0,i.vV)([...e.froms,...t])})})},24886:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"IdentifierNode"===e.kind,create:e=>(0,i.vV)({kind:"IdentifierNode",name:e})})},18160:(e,t,r)=>{"use strict";r.d(t,{P:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"InsertQueryNode"===e.kind,create:(e,t,r)=>(0,i.vV)({kind:"InsertQueryNode",into:e,...t&&{with:t},replace:r}),createWithoutInto:()=>(0,i.vV)({kind:"InsertQueryNode"}),cloneWith:(e,t)=>(0,i.vV)({...e,...t})})},42955:(e,t,r)=>{"use strict";r.d(t,{u:()=>a});var i=r(96547),n=r(16596),o=r(82750);let s=(0,i.vV)({is:e=>"OnNode"===e.kind,create:e=>(0,i.vV)({kind:"OnNode",on:e}),cloneWithOperation:(e,t,r)=>(0,i.vV)({...e,on:"And"===t?n.O.create(e.on,r):o.O.create(e.on,r)})}),a=(0,i.vV)({is:e=>"JoinNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"JoinNode",joinType:e,table:t,on:void 0}),createWithOn:(e,t,r)=>(0,i.vV)({kind:"JoinNode",joinType:e,table:t,on:s.create(r)}),cloneWithOn:(e,t)=>(0,i.vV)({...e,on:e.on?s.cloneWithOperation(e.on,"And",t):s.create(t)})})},11106:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"JSONOperatorChainNode"===e.kind,create:e=>(0,i.vV)({kind:"JSONOperatorChainNode",operator:e,values:(0,i.vV)([])}),cloneWithValue:(e,t)=>(0,i.vV)({...e,values:(0,i.vV)([...e.values,t])})})},97187:(e,t,r)=>{"use strict";r.d(t,{t:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"JSONPathNode"===e.kind,create:e=>(0,i.vV)({kind:"JSONPathNode",inOperator:e,pathLegs:(0,i.vV)([])}),cloneWithLeg:(e,t)=>(0,i.vV)({...e,pathLegs:(0,i.vV)([...e.pathLegs,t])})})},16750:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"JSONReferenceNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"JSONReferenceNode",reference:e,traversal:t}),cloneWithTraversal:(e,t)=>(0,i.vV)({...e,traversal:t})})},72549:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"LimitNode"===e.kind,create:e=>(0,i.vV)({kind:"LimitNode",limit:e})})},55936:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var i=r(96547),n=r(67069);let o=(0,i.vV)({is:e=>"MergeQueryNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"MergeQueryNode",into:e,...t&&{with:t}}),cloneWithUsing:(e,t)=>(0,i.vV)({...e,using:t}),cloneWithWhen:(e,t)=>(0,i.vV)({...e,whens:e.whens?(0,i.vV)([...e.whens,t]):(0,i.vV)([t])}),cloneWithThen:(e,t)=>(0,i.vV)({...e,whens:e.whens?(0,i.vV)([...e.whens.slice(0,-1),n.$.cloneWithResult(e.whens[e.whens.length-1],t)]):void 0})})},63516:(e,t,r)=>{"use strict";r.d(t,{x:()=>n});var i=r(96547);function n(e){return(0,i.Kn)(e)&&(0,i.mf)(e.toOperationNode)}},34603:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});var i=r(96547);class n{nodeStack=[];#G=(0,i.vV)({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);let t=this.transformNodeImpl(e);return this.nodeStack.pop(),(0,i.vV)(t)}transformNodeImpl(e){return this.#G[e.kind](e)}transformNodeList(e){return e?(0,i.vV)(e.map(e=>this.transformNode(e))):e}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:(0,i.vV)([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}},82143:(e,t,r)=>{"use strict";r.d(t,{$X:()=>s,fP:()=>o,rt:()=>a});var i=r(96547);let n=["->","->>"],o=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from","+","-","*","/","%","^","&","|","#","<<",">>","&&","||",...n,"not","-","exists","not exists","between","between symmetric"],s=(0,i.vV)({is:e=>"OperatorNode"===e.kind,create:e=>(0,i.vV)({kind:"OperatorNode",operator:e})});function a(e){return(0,i.HD)(e)&&n.includes(e)}},82750:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"OrNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"OrNode",left:e,right:t})})},63486:(e,t,r)=>{"use strict";r.d(t,{r:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"OrderByNode"===e.kind,create:e=>(0,i.vV)({kind:"OrderByNode",items:(0,i.vV)([...e])}),cloneWithItems:(e,t)=>(0,i.vV)({...e,items:(0,i.vV)([...e.items,...t])})})},88377:(e,t,r)=>{"use strict";r.d(t,{L:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"ParensNode"===e.kind,create:e=>(0,i.vV)({kind:"ParensNode",node:e})})},78624:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"PrimitiveValueListNode"===e.kind,create:e=>(0,i.vV)({kind:"PrimitiveValueListNode",values:(0,i.vV)([...e])})})},84377:(e,t,r)=>{"use strict";r.d(t,{V:()=>c});var i=r(18160),n=r(21746),o=r(54052),s=r(72303),a=r(15025),d=r(96547);let l=(0,d.vV)({is:e=>"ReturningNode"===e.kind,create:e=>(0,d.vV)({kind:"ReturningNode",selections:(0,d.vV)(e)}),cloneWithSelections:(e,t)=>(0,d.vV)({...e,selections:e.selections?(0,d.vV)([...e.selections,...t]):(0,d.vV)(t)})}),u=(0,d.vV)({is:e=>"ExplainNode"===e.kind,create:(e,t)=>(0,d.vV)({kind:"ExplainNode",format:e,options:t})});var h=r(55936);let c=(0,d.vV)({is:e=>n.a.is(e)||i.P.is(e)||o.j.is(e)||s.U.is(e)||h.F.is(e),cloneWithWhere:(e,t)=>(0,d.vV)({...e,where:e.where?a.F.cloneWithOperation(e.where,"And",t):a.F.create(t)}),cloneWithJoin:(e,t)=>(0,d.vV)({...e,joins:e.joins?(0,d.vV)([...e.joins,t]):(0,d.vV)([t])}),cloneWithReturning:(e,t)=>(0,d.vV)({...e,returning:e.returning?l.cloneWithSelections(e.returning,t):l.create(t)}),cloneWithoutReturning:e=>(0,d.vV)({...e,returning:void 0}),cloneWithoutWhere:e=>(0,d.vV)({...e,where:void 0}),cloneWithExplain:(e,t,r)=>(0,d.vV)({...e,explain:u.create(t,r?.toOperationNode())}),cloneWithTop:(e,t)=>(0,d.vV)({...e,top:t})})},33856:(e,t,r)=>{"use strict";r.d(t,{x:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"RawNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"RawNode",sqlFragments:(0,i.vV)(e),parameters:(0,i.vV)(t)}),createWithSql:e=>n.create([e],[]),createWithChild:e=>n.create(["",""],[e]),createWithChildren:e=>n.create(Array(e.length+1).fill(""),e)})},24668:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var i=r(51410),n=r(96547);let o=(0,n.vV)({is:e=>"ReferenceNode"===e.kind,create:(e,t)=>(0,n.vV)({kind:"ReferenceNode",table:t,column:e}),createSelectAll:e=>(0,n.vV)({kind:"ReferenceNode",table:e,column:i.B.create()})})},38118:(e,t,r)=>{"use strict";r.d(t,{j:()=>o});var i=r(96547),n=r(24886);let o=(0,i.vV)({is:e=>"SchemableIdentifierNode"===e.kind,create:e=>(0,i.vV)({kind:"SchemableIdentifierNode",identifier:n.T.create(e)}),createWithSchema:(e,t)=>(0,i.vV)({kind:"SchemableIdentifierNode",schema:n.T.create(e),identifier:n.T.create(t)})})},51410:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"SelectAllNode"===e.kind,create:()=>(0,i.vV)({kind:"SelectAllNode"})})},21746:(e,t,r)=>{"use strict";r.d(t,{a:()=>u});var i=r(96547),n=r(73053);let o=(0,i.vV)({is:e=>"GroupByNode"===e.kind,create:e=>(0,i.vV)({kind:"GroupByNode",items:(0,i.vV)(e)}),cloneWithItems:(e,t)=>(0,i.vV)({...e,items:(0,i.vV)([...e.items,...t])})});var s=r(16596),a=r(82750);let d=(0,i.vV)({is:e=>"HavingNode"===e.kind,create:e=>(0,i.vV)({kind:"HavingNode",having:e}),cloneWithOperation:(e,t,r)=>(0,i.vV)({...e,having:"And"===t?s.O.create(e.having,r):a.O.create(e.having,r)})});var l=r(63486);let u=(0,i.vV)({is:e=>"SelectQueryNode"===e.kind,create:e=>(0,i.vV)({kind:"SelectQueryNode",...e&&{with:e}}),createFrom:(e,t)=>(0,i.vV)({kind:"SelectQueryNode",from:n.e.create(e),...t&&{with:t}}),cloneWithSelections:(e,t)=>(0,i.vV)({...e,selections:e.selections?(0,i.vV)([...e.selections,...t]):(0,i.vV)(t)}),cloneWithDistinctOn:(e,t)=>(0,i.vV)({...e,distinctOn:e.distinctOn?(0,i.vV)([...e.distinctOn,...t]):(0,i.vV)(t)}),cloneWithFrontModifier:(e,t)=>(0,i.vV)({...e,frontModifiers:e.frontModifiers?(0,i.vV)([...e.frontModifiers,t]):(0,i.vV)([t])}),cloneWithEndModifier:(e,t)=>(0,i.vV)({...e,endModifiers:e.endModifiers?(0,i.vV)([...e.endModifiers,t]):(0,i.vV)([t])}),cloneWithOrderByItems:(e,t)=>(0,i.vV)({...e,orderBy:e.orderBy?l.r.cloneWithItems(e.orderBy,t):l.r.create(t)}),cloneWithGroupByItems:(e,t)=>(0,i.vV)({...e,groupBy:e.groupBy?o.cloneWithItems(e.groupBy,t):o.create(t)}),cloneWithLimit:(e,t)=>(0,i.vV)({...e,limit:t}),cloneWithOffset:(e,t)=>(0,i.vV)({...e,offset:t}),cloneWithFetch:(e,t)=>(0,i.vV)({...e,fetch:t}),cloneWithHaving:(e,t)=>(0,i.vV)({...e,having:e.having?d.cloneWithOperation(e.having,"And",t):d.create(t)}),cloneWithSetOperations:(e,t)=>(0,i.vV)({...e,setOperations:e.setOperations?(0,i.vV)([...e.setOperations,...t]):(0,i.vV)([...t])}),cloneWithoutSelections:e=>(0,i.vV)({...e,selections:[]}),cloneWithoutLimit:e=>(0,i.vV)({...e,limit:void 0}),cloneWithoutOffset:e=>(0,i.vV)({...e,offset:void 0}),cloneWithoutOrderBy:e=>(0,i.vV)({...e,orderBy:void 0})})},60329:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"SetOperationNode"===e.kind,create:(e,t,r)=>(0,i.vV)({kind:"SetOperationNode",operator:e,expression:t,all:r})})},46840:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var i=r(96547),n=r(38118);let o=(0,i.vV)({is:e=>"TableNode"===e.kind,create:e=>(0,i.vV)({kind:"TableNode",table:n.j.create(e)}),createWithSchema:(e,t)=>(0,i.vV)({kind:"TableNode",table:n.j.createWithSchema(e,t)})})},54052:(e,t,r)=>{"use strict";r.d(t,{j:()=>o});var i=r(96547),n=r(73053);let o=(0,i.vV)({is:e=>"UpdateQueryNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"UpdateQueryNode",table:e,...t&&{with:t}}),createWithoutTable:()=>(0,i.vV)({kind:"UpdateQueryNode"}),cloneWithFromItems:(e,t)=>(0,i.vV)({...e,from:e.from?n.e.cloneWithFroms(e.from,t):n.e.create(t)}),cloneWithUpdates:(e,t)=>(0,i.vV)({...e,updates:e.updates?(0,i.vV)([...e.updates,...t]):t}),cloneWithLimit:(e,t)=>(0,i.vV)({...e,limit:t})})},51935:(e,t,r)=>{"use strict";r.d(t,{F:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"ValueListNode"===e.kind,create:e=>(0,i.vV)({kind:"ValueListNode",values:(0,i.vV)(e)})})},23708:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"ValueNode"===e.kind,create:e=>(0,i.vV)({kind:"ValueNode",value:e}),createImmediate:e=>(0,i.vV)({kind:"ValueNode",value:e,immediate:!0})})},67069:(e,t,r)=>{"use strict";r.d(t,{$:()=>n});var i=r(96547);let n=(0,i.vV)({is:e=>"WhenNode"===e.kind,create:e=>(0,i.vV)({kind:"WhenNode",condition:e}),cloneWithResult:(e,t)=>(0,i.vV)({...e,result:t})})},15025:(e,t,r)=>{"use strict";r.d(t,{F:()=>s});var i=r(96547),n=r(16596),o=r(82750);let s=(0,i.vV)({is:e=>"WhereNode"===e.kind,create:e=>(0,i.vV)({kind:"WhereNode",where:e}),cloneWithOperation:(e,t,r)=>(0,i.vV)({...e,where:"And"===t?n.O.create(e.where,r):o.O.create(e.where,r)})})},74962:(e,t,r)=>{"use strict";r.d(t,{L4:()=>f,Li:()=>y,QX:()=>v,i9:()=>m,k0:()=>p});var i=r(48666),n=r(96547),o=r(63516),s=r(82143),a=r(3646),d=r(76922),l=r(23708),u=r(16596),h=r(88377),c=r(82750);function p(e){if(3===e.length)return m(e[0],e[1],e[2]);if(1===e.length)return(0,d.j2)(e[0]);throw Error(`invalid arguments: ${JSON.stringify(e)}`)}function m(e,t,r){return("is"===t||"is not"===t)&&g(r)?i.a.create((0,a.jI)(e),N(t),l.g.createImmediate(r)):i.a.create((0,a.jI)(e),N(t),(0,d.wZ)(r))}function f(e,t,r){return i.a.create((0,a.jI)(e),N(t),(0,a.jI)(r))}function y(e,t){return v(Object.entries(e).filter(([,e])=>!(0,n.o8)(e)).map(([e,t])=>m(e,g(t)?"is":"=",t)),t)}function v(e,t,r=!0){let n="and"===t?u.O.create:c.O.create;if(0===e.length)return i.a.create(l.g.createImmediate(1),s.$X.create("="),l.g.createImmediate("and"===t?1:0));let o=w(e[0]);for(let t=1;t<e.length;++t)o=n(o,w(e[t]));return e.length>1&&r?h.L.create(o):o}function g(e){return(0,n.Ft)(e)||(0,n.jn)(e)}function N(e){if((0,n.HD)(e)&&s.fP.includes(e))return s.$X.create(e);if((0,o.x)(e))return e.toOperationNode();throw Error(`invalid operator ${JSON.stringify(e)}`)}function w(e){return(0,o.x)(e)?e.toOperationNode():e}},3904:(e,t,r)=>{"use strict";r.d(t,{z:()=>d});var i=r(96547);let n=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob"],o=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timez\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/],s=(0,i.vV)({is:e=>"DataTypeNode"===e.kind,create:e=>(0,i.vV)({kind:"DataTypeNode",dataType:e})});var a=r(63516);function d(e){if((0,a.x)(e))return e.toOperationNode();if(n.includes(e)||o.some(t=>t.test(e)))return s.create(e);throw Error(`invalid column data type ${JSON.stringify(e)}`)}},89787:(e,t,r)=>{"use strict";r.d(t,{Yb:()=>d,Jx:()=>a,BJ:()=>s});var i=r(63516),n=r(96547),o=r(82790);function s(e){if((0,i.x)(e))return e.toOperationNode();if((0,n.mf)(e))return e((0,o.Z)()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify(e)}`)}function a(e){if((0,i.x)(e))return e.toOperationNode();if((0,n.mf)(e))return e((0,o.Z)()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify(e)}`)}function d(e){return(0,n.Kn)(e)&&"expressionType"in e&&(0,i.x)(e)||(0,n.Kn)(e)&&"expression"in e&&(0,n.HD)(e.alias)&&(0,i.x)(e)||(0,n.mf)(e)}},26861:(e,t,r)=>{"use strict";r.d(t,{h:()=>a});var i=r(42955),n=r(6217),o=r(74962),s=r(19417);function a(e,t){var r,a,d,l;if(3===t.length)return r=t[0],a=t[1],d=t[2],i.u.createWithOn(e,(0,n.Lr)(r),(0,o.L4)(a,"=",d));if(2===t.length)return l=t[0],(0,t[1])((0,s.$h)(e,l)).toOperationNode();throw Error("not implemented")}},6801:(e,t,r)=>{"use strict";r.d(t,{Wr:()=>l,bX:()=>u});var i=r(34401),n=r(96547);let o=(0,n.vV)({is:e=>"OrderByItemNode"===e.kind,create:(e,t)=>(0,n.vV)({kind:"OrderByItemNode",orderBy:e,direction:t})});var s=r(33856),a=r(89787),d=r(3646);function l(e){return"asc"===e||"desc"===e}function u(e){if(2===e.length)return[h(e[0],e[1])];if(1===e.length){let[t]=e;return Array.isArray(t)?t.map(e=>h(e)):[h(t)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${e.length}`)}function h(e,t){let r=function(e){if((0,a.Yb)(e))return(0,a.BJ)(e);if((0,i.a)(e))return e.toOperationNode();let[t,r]=e.split(" ");if(r){if(!l(r))throw Error(`Invalid order by direction: ${r}`);return o.create((0,d.KX)(t),c(r))}return(0,d.KX)(e)}(e);if(o.is(r)){if(t)throw Error("Cannot specify direction twice!");return r}return o.create(r,c(t))}function c(e){return e?"asc"===e||"desc"===e?s.x.createWithSql(e):e.toOperationNode():void 0}},19417:(e,t,r)=>{"use strict";r.d(t,{$h:()=>w,gs:()=>b,$l:()=>N});var i=r(42955),n=r(96547),o=r(63486);let s=(0,n.vV)({is:e=>"PartitionByNode"===e.kind,create:e=>(0,n.vV)({kind:"PartitionByNode",items:(0,n.vV)(e)}),cloneWithItems:(e,t)=>(0,n.vV)({...e,items:(0,n.vV)([...e.items,...t])})}),a=(0,n.vV)({is:e=>"OverNode"===e.kind,create:()=>(0,n.vV)({kind:"OverNode"}),cloneWithOrderByItems:(e,t)=>(0,n.vV)({...e,orderBy:e.orderBy?o.r.cloneWithItems(e.orderBy,t):o.r.create(t)}),cloneWithPartitionByItems:(e,t)=>(0,n.vV)({...e,partitionBy:e.partitionBy?s.cloneWithItems(e.partitionBy,t):s.create(t)})});var d=r(33856),l=r(74962),u=r(48888);class h{#o;constructor(e){this.#o=(0,n.vV)(e)}on(...e){return new h({...this.#o,joinNode:i.u.cloneWithOn(this.#o.joinNode,(0,l.k0)(e))})}onRef(e,t,r){return new h({...this.#o,joinNode:i.u.cloneWithOn(this.#o.joinNode,(0,l.L4)(e,t,r))})}onTrue(){return new h({...this.#o,joinNode:i.u.cloneWithOn(this.#o.joinNode,d.x.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#o.joinNode}}(0,u.q)(h,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");var c=r(6801);let p=(0,n.vV)({is:e=>"PartitionByItemNode"===e.kind,create:e=>(0,n.vV)({kind:"PartitionByItemNode",partitionBy:e})});var m=r(3646);class f{#o;constructor(e){this.#o=(0,n.vV)(e)}orderBy(e,t){return new f({overNode:a.cloneWithOrderByItems(this.#o.overNode,(0,c.bX)([e,t]))})}partitionBy(e){return new f({overNode:a.cloneWithPartitionByItems(this.#o.overNode,(0,m.ik)(e).map(p.create))})}$call(e){return e(this)}toOperationNode(){return this.#o.overNode}}(0,u.q)(f,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");var y=r(12448),v=r(73733),g=r(6217);function N(){return new y.x({executor:v.H})}function w(e,t){return new h({joinNode:i.u.create(e,(0,g.Lr)(t))})}function b(){return new f({overNode:a.create()})}},3646:(e,t,r)=>{"use strict";r.d(t,{D2:()=>g,Dz:()=>_,F9:()=>f,Ji:()=>w,KX:()=>N,ik:()=>y,jI:()=>v,xM:()=>b});var i=r(47808),n=r(53130),o=r(24668),s=r(46840),a=r(96547),d=r(89787),l=r(24886),u=r(6801),h=r(82143),c=r(16750),p=r(11106),m=r(97187);function f(e){return(0,a.HD)(e)?N(e):e.toOperationNode()}function y(e){return(0,a.DM)(e)?e.map(e=>v(e)):[v(e)]}function v(e){return(0,d.Yb)(e)?(0,d.BJ)(e):f(e)}function g(e,t){let r=N(e);if((0,h.rt)(t))return c.y.create(r,p.s.create(h.$X.create(t)));let i=t.slice(0,-1);if((0,h.rt)(i))return c.y.create(r,m.t.create(h.$X.create(i)));throw Error(`Invalid JSON operator: ${t}`)}function N(e){if(!e.includes("."))return o.b.create(n.k.create(e));let t=e.split(".").map(x);if(3===t.length)return function(e){let[t,r,i]=e;return o.b.create(n.k.create(i),s.F.createWithSchema(t,r))}(t);if(2===t.length)return function(e){let[t,r]=e;return o.b.create(n.k.create(r),s.F.create(t))}(t);throw Error(`invalid column reference ${e}`)}function w(e){let t=" as ";if(!e.includes(t))return N(e);{let[r,n]=e.split(t).map(x);return i.i.create(N(r),l.T.create(n))}}function b(e){return n.k.create(e)}function _(e){if(!e.includes(" "))return b(e);{let[t,r]=e.split(" ").map(x);if(!(0,u.Wr)(r))throw Error(`invalid order direction "${r}" next to "${t}"`);return(0,u.bX)([t,r])[0]}}function x(e){return e.trim()}},32473:(e,t,r)=>{"use strict";r.d(t,{L:()=>p,A:()=>function e(t){return(0,i.mf)(t)?e(t((0,h.Z)())):(0,i.DM)(t)?t.map(e=>c(e)):[c(t)]}});var i=r(96547),n=r(24668),o=r(51410);let s=(0,i.vV)({is:e=>"SelectionNode"===e.kind,create:e=>(0,i.vV)({kind:"SelectionNode",selection:e}),createSelectAll:()=>(0,i.vV)({kind:"SelectionNode",selection:o.B.create()}),createSelectAllFromTable:e=>(0,i.vV)({kind:"SelectionNode",selection:n.b.createSelectAll(e)})});var a=r(3646),d=r(34401),l=r(89787),u=r(6217),h=r(82790);function c(e){return(0,i.HD)(e)?s.create((0,a.Ji)(e)):(0,d.a)(e)?s.create(e.toOperationNode()):s.create((0,l.Jx)(e))}function p(e){return e?Array.isArray(e)?e.map(m):[m(e)]:[s.createSelectAll()]}function m(e){if((0,i.HD)(e))return s.createSelectAllFromTable((0,u.G2)(e));throw Error(`invalid value selectAll expression: ${JSON.stringify(e)}`)}},6217:(e,t,r)=>{"use strict";r.d(t,{G2:()=>h,Lr:()=>l,_V:()=>d,hm:()=>u});var i=r(96547),n=r(47808),o=r(46840),s=r(89787),a=r(24886);function d(e){return(0,i.DM)(e)?e.map(e=>l(e)):[l(e)]}function l(e){return(0,i.HD)(e)?u(e):(0,s.Jx)(e)}function u(e){let t=" as ";if(!e.includes(t))return h(e);{let[r,i]=e.split(t).map(c);return n.i.create(h(r),a.T.create(i))}}function h(e){if(!e.includes("."))return o.F.create(e);{let[t,r]=e.split(".").map(c);return o.F.createWithSchema(t,r)}}function c(e){return e.trim()}},43388:(e,t,r)=>{"use strict";r.d(t,{G:()=>o});var i=r(96547);let n=(0,i.vV)({is:e=>"TopNode"===e.kind,create:(e,t)=>(0,i.vV)({kind:"TopNode",expression:e,modifiers:t})});function o(e,t){if(!(0,i.hj)(e)&&!(0,i.C4)(e))throw Error(`Invalid top expression: ${e}`);if(!(0,i.o8)(t)&&!("percent"===t||"with ties"===t||"percent with ties"===t))throw Error(`Invalid top modifiers: ${t}`);return n.create(e,t)}},76922:(e,t,r)=>{"use strict";r.d(t,{$0:()=>u,AB:()=>h,j2:()=>l,wZ:()=>d});var i=r(78624),n=r(51935),o=r(23708),s=r(96547),a=r(89787);function d(e){return(0,s.DM)(e)?e.some(a.Yb)?n.F.create(e.map(e=>l(e))):i.c.create(e):l(e)}function l(e){return(0,a.Yb)(e)?(0,a.BJ)(e):o.g.create(e)}function u(e){return(0,s.hj)(e)||(0,s.jn)(e)||(0,s.Ft)(e)}function h(e){if(!u(e))throw Error(`unsafe immediate value ${JSON.stringify(e)}`);return o.g.createImmediate(e)}},64545:(e,t,r)=>{"use strict";r.d(t,{v:()=>u});var i=r(47808),n=r(24886),o=r(34603),s=r(38118),a=r(46840);let d=(0,r(96547).vV)({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});class l extends o.s{#U;#$=new Set;#Z=new Set;constructor(e){super(),this.#U=e}transformNodeImpl(e){if(!this.#Q(e))return super.transformNodeImpl(e);let t=this.#J(e);for(let e of t)this.#Z.add(e);let r=this.#K(e);for(let e of r)this.#$.add(e);let i=super.transformNodeImpl(e);for(let e of r)this.#$.delete(e);for(let e of t)this.#Z.delete(e);return i}transformSchemableIdentifier(e){let t=super.transformSchemableIdentifier(e);return t.schema||!this.#$.has(e.identifier.name)?t:{...t,schema:n.T.create(this.#U)}}transformReferences(e){let t=super.transformReferences(e);return t.table.table.schema?t:{...t,table:a.F.createWithSchema(this.#U,t.table.table.identifier.name)}}#Q(e){return e.kind in d}#K(e){let t=new Set;if("name"in e&&e.name&&s.j.is(e.name)&&this.#z(e.name,t),"from"in e&&e.from)for(let r of e.from.froms)this.#H(r,t);if("into"in e&&e.into&&this.#H(e.into,t),"table"in e&&e.table&&this.#H(e.table,t),"joins"in e&&e.joins)for(let r of e.joins)this.#H(r.table,t);return"using"in e&&e.using&&this.#H(e.using,t),t}#J(e){let t=new Set;return"with"in e&&e.with&&this.#X(e.with,t),t}#H(e,t){let r=a.F.is(e)?e:i.i.is(e)&&a.F.is(e.node)?e.node:null;r&&this.#z(r.table,t)}#z(e,t){let r=e.identifier.name;this.#$.has(r)||this.#Z.has(r)||t.add(r)}#X(e,t){for(let r of e.expressions){let e=r.name.table.table.identifier.name;this.#Z.has(e)||t.add(e)}}}class u{#x;constructor(e){this.#x=new l(e)}transformQuery(e){return this.#x.transformNode(e.node)}async transformResult(e){return e.result}}},59686:(e,t,r)=>{"use strict";r.d(t,{wY:()=>l});var i=r(13032),n=r(96547),o=r(74712),s=r(67069),a=r(74962),d=r(76922);class l{#o;constructor(e){this.#o=(0,n.vV)(e)}when(...e){return new u({...this.#o,node:o.j.cloneWithWhen(this.#o.node,s.$.create((0,a.k0)(e)))})}}class u{#o;constructor(e){this.#o=(0,n.vV)(e)}then(e){return new h({...this.#o,node:o.j.cloneWithThen(this.#o.node,(0,d.$0)(e)?(0,d.AB)(e):(0,d.j2)(e))})}}class h{#o;constructor(e){this.#o=(0,n.vV)(e)}when(...e){return new u({...this.#o,node:o.j.cloneWithWhen(this.#o.node,s.$.create((0,a.k0)(e)))})}else(e){return new c({...this.#o,node:o.j.cloneWith(this.#o.node,{else:(0,d.$0)(e)?(0,d.AB)(e):(0,d.j2)(e)})})}end(){return new i.Pc(o.j.cloneWith(this.#o.node,{isStatement:!1}))}endCase(){return new i.Pc(o.j.cloneWith(this.#o.node,{isStatement:!0}))}}class c{#o;constructor(e){this.#o=(0,n.vV)(e)}end(){return new i.Pc(o.j.cloneWith(this.#o.node,{isStatement:!1}))}endCase(){return new i.Pc(o.j.cloneWith(this.#o.node,{isStatement:!0}))}}},84462:(e,t,r)=>{"use strict";r.d(t,{W:()=>g});var i=r(13032),n=r(96547),o=r(15025);let s=(0,n.vV)({is:e=>"AggregateFunctionNode"===e.kind,create:(e,t=[])=>(0,n.vV)({kind:"AggregateFunctionNode",func:e,aggregated:t}),cloneWithDistinct:e=>(0,n.vV)({...e,distinct:!0}),cloneWithFilter:(e,t)=>(0,n.vV)({...e,filter:e.filter?o.F.cloneWithOperation(e.filter,"And",t):o.F.create(t)}),cloneWithOrFilter:(e,t)=>(0,n.vV)({...e,filter:e.filter?o.F.cloneWithOperation(e.filter,"Or",t):o.F.create(t)}),cloneWithOver:(e,t)=>(0,n.vV)({...e,over:t})}),a=(0,n.vV)({is:e=>"FunctionNode"===e.kind,create:(e,t)=>(0,n.vV)({kind:"FunctionNode",func:e,arguments:t})});var d=r(3646),l=r(32473),u=r(47808),h=r(24886),c=r(48888),p=r(19417),m=r(74962);class f{#o;constructor(e){this.#o=(0,n.vV)(e)}get expressionType(){}as(e){return new y(this,e)}distinct(){return new f({...this.#o,aggregateFunctionNode:s.cloneWithDistinct(this.#o.aggregateFunctionNode)})}filterWhere(...e){return new f({...this.#o,aggregateFunctionNode:s.cloneWithFilter(this.#o.aggregateFunctionNode,(0,m.k0)(e))})}filterWhereRef(e,t,r){return new f({...this.#o,aggregateFunctionNode:s.cloneWithFilter(this.#o.aggregateFunctionNode,(0,m.L4)(e,t,r))})}over(e){let t=(0,p.gs)();return new f({...this.#o,aggregateFunctionNode:s.cloneWithOver(this.#o.aggregateFunctionNode,(e?e(t):t).toOperationNode())})}$call(e){return e(this)}$castTo(){return new f(this.#o)}$notNull(){return new f(this.#o)}toOperationNode(){return this.#o.aggregateFunctionNode}}(0,c.q)(f,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class y{#Y;#u;constructor(e,t){this.#Y=e,this.#u=t}get expression(){return this.#Y}get alias(){return this.#u}toOperationNode(){return u.i.create(this.#Y.toOperationNode(),h.T.create(this.#u))}}var v=r(6217);function g(){let e=(e,t)=>new i.Pc(a.create(e,(0,d.ik)(t??[]))),t=(e,t)=>new f({aggregateFunctionNode:s.create(e,t?(0,d.ik)(t):void 0)});return Object.assign(e,{agg:t,avg:e=>t("avg",[e]),coalesce:(...t)=>e("coalesce",t),count:e=>t("count",[e]),countAll:e=>new f({aggregateFunctionNode:s.create("count",(0,l.L)(e))}),max:e=>t("max",[e]),min:e=>t("min",[e]),sum:e=>t("sum",[e]),any:t=>e("any",[t]),jsonAgg:e=>new f({aggregateFunctionNode:s.create("json_agg",[(0,n.HD)(e)?(0,v.G2)(e):e.toOperationNode()])}),toJson:e=>new i.Pc(a.create("to_json",[(0,n.HD)(e)?(0,v.G2)(e):e.toOperationNode()]))})}},67681:(e,t,r)=>{"use strict";r.d(t,{G:()=>i,b:()=>n});class i extends Error{node;constructor(e){super("no result"),this.node=e}}function n(e){return Object.prototype.hasOwnProperty.call(e,"prototype")}},59882:(e,t,r)=>{"use strict";r.d(t,{u:()=>C});var i=r(47808),n=r(96547);let o=(0,n.vV)({is:e=>"SelectModifierNode"===e.kind,create:(e,t)=>(0,n.vV)({kind:"SelectModifierNode",modifier:e,of:t}),createWithExpression:e=>(0,n.vV)({kind:"SelectModifierNode",rawModifier:e})});var s=r(26861),a=r(6217),d=r(32473),l=r(3646),u=r(21746),h=r(84377),c=r(6801),p=r(48888),m=r(72549);let f=(0,n.vV)({is:e=>"OffsetNode"===e.kind,create:e=>(0,n.vV)({kind:"OffsetNode",offset:e})}),y=(0,n.vV)({is:e=>"GroupByItemNode"===e.kind,create:e=>(0,n.vV)({kind:"GroupByItemNode",groupBy:e})});var v=r(82790),g=r(67681),N=r(24886),w=r(60329),b=r(89787);function _(e,t,r){return(0,n.mf)(t)&&(t=t((0,v.b)())),(0,n.DM)(t)||(t=[t]),t.map(t=>w.M.create(e,(0,b.BJ)(t),r))}var x=r(74962),T=r(13032),P=r(76922),O=r(23708);let S={create:(e,t)=>({kind:"FetchNode",rowCount:O.g.create(e),modifier:t})};var E=r(43388);class k{#o;constructor(e){this.#o=(0,n.vV)(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new k({...this.#o,queryNode:h.V.cloneWithWhere(this.#o.queryNode,(0,x.k0)(e))})}whereRef(e,t,r){return new k({...this.#o,queryNode:h.V.cloneWithWhere(this.#o.queryNode,(0,x.L4)(e,t,r))})}having(...e){return new k({...this.#o,queryNode:u.a.cloneWithHaving(this.#o.queryNode,(0,x.k0)(e))})}havingRef(e,t,r){return new k({...this.#o,queryNode:u.a.cloneWithHaving(this.#o.queryNode,(0,x.L4)(e,t,r))})}select(e){return new k({...this.#o,queryNode:u.a.cloneWithSelections(this.#o.queryNode,(0,d.A)(e))})}distinctOn(e){return new k({...this.#o,queryNode:u.a.cloneWithDistinctOn(this.#o.queryNode,(0,l.ik)(e))})}modifyFront(e){return new k({...this.#o,queryNode:u.a.cloneWithFrontModifier(this.#o.queryNode,o.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new k({...this.#o,queryNode:u.a.cloneWithEndModifier(this.#o.queryNode,o.createWithExpression(e.toOperationNode()))})}distinct(){return new k({...this.#o,queryNode:u.a.cloneWithFrontModifier(this.#o.queryNode,o.create("Distinct"))})}forUpdate(e){return new k({...this.#o,queryNode:u.a.cloneWithEndModifier(this.#o.queryNode,o.create("ForUpdate",e?(0,n._2)(e).map(a.G2):void 0))})}forShare(e){return new k({...this.#o,queryNode:u.a.cloneWithEndModifier(this.#o.queryNode,o.create("ForShare",e?(0,n._2)(e).map(a.G2):void 0))})}forKeyShare(e){return new k({...this.#o,queryNode:u.a.cloneWithEndModifier(this.#o.queryNode,o.create("ForKeyShare",e?(0,n._2)(e).map(a.G2):void 0))})}forNoKeyUpdate(e){return new k({...this.#o,queryNode:u.a.cloneWithEndModifier(this.#o.queryNode,o.create("ForNoKeyUpdate",e?(0,n._2)(e).map(a.G2):void 0))})}skipLocked(){return new k({...this.#o,queryNode:u.a.cloneWithEndModifier(this.#o.queryNode,o.create("SkipLocked"))})}noWait(){return new k({...this.#o,queryNode:u.a.cloneWithEndModifier(this.#o.queryNode,o.create("NoWait"))})}selectAll(e){return new k({...this.#o,queryNode:u.a.cloneWithSelections(this.#o.queryNode,(0,d.L)(e))})}innerJoin(...e){return new k({...this.#o,queryNode:h.V.cloneWithJoin(this.#o.queryNode,(0,s.h)("InnerJoin",e))})}leftJoin(...e){return new k({...this.#o,queryNode:h.V.cloneWithJoin(this.#o.queryNode,(0,s.h)("LeftJoin",e))})}rightJoin(...e){return new k({...this.#o,queryNode:h.V.cloneWithJoin(this.#o.queryNode,(0,s.h)("RightJoin",e))})}fullJoin(...e){return new k({...this.#o,queryNode:h.V.cloneWithJoin(this.#o.queryNode,(0,s.h)("FullJoin",e))})}innerJoinLateral(...e){return new k({...this.#o,queryNode:h.V.cloneWithJoin(this.#o.queryNode,(0,s.h)("LateralInnerJoin",e))})}leftJoinLateral(...e){return new k({...this.#o,queryNode:h.V.cloneWithJoin(this.#o.queryNode,(0,s.h)("LateralLeftJoin",e))})}orderBy(...e){return new k({...this.#o,queryNode:u.a.cloneWithOrderByItems(this.#o.queryNode,(0,c.bX)(e))})}groupBy(e){var t;return new k({...this.#o,queryNode:u.a.cloneWithGroupByItems(this.#o.queryNode,(t=e,t=(0,n.mf)(t)?t((0,v.Z)()):t,(0,l.ik)(t).map(y.create)))})}limit(e){return new k({...this.#o,queryNode:u.a.cloneWithLimit(this.#o.queryNode,m.Z.create((0,P.j2)(e)))})}offset(e){return new k({...this.#o,queryNode:u.a.cloneWithOffset(this.#o.queryNode,f.create((0,P.j2)(e)))})}fetch(e,t="only"){return new k({...this.#o,queryNode:u.a.cloneWithFetch(this.#o.queryNode,function(e,t){if(!(0,n.hj)(e)&&!(0,n.C4)(e))throw Error(`Invalid fetch row count: ${e}`);if(!("only"===t||"with ties"===t))throw Error(`Invalid fetch modifier: ${t}`);return S.create(e,t)}(e,t))})}top(e,t){return new k({...this.#o,queryNode:h.V.cloneWithTop(this.#o.queryNode,(0,E.G)(e,t))})}union(e){return new k({...this.#o,queryNode:u.a.cloneWithSetOperations(this.#o.queryNode,_("union",e,!1))})}unionAll(e){return new k({...this.#o,queryNode:u.a.cloneWithSetOperations(this.#o.queryNode,_("union",e,!0))})}intersect(e){return new k({...this.#o,queryNode:u.a.cloneWithSetOperations(this.#o.queryNode,_("intersect",e,!1))})}intersectAll(e){return new k({...this.#o,queryNode:u.a.cloneWithSetOperations(this.#o.queryNode,_("intersect",e,!0))})}except(e){return new k({...this.#o,queryNode:u.a.cloneWithSetOperations(this.#o.queryNode,_("except",e,!1))})}exceptAll(e){return new k({...this.#o,queryNode:u.a.cloneWithSetOperations(this.#o.queryNode,_("except",e,!0))})}as(e){return new I(this,e)}clearSelect(){return new k({...this.#o,queryNode:u.a.cloneWithoutSelections(this.#o.queryNode)})}clearWhere(){return new k({...this.#o,queryNode:h.V.cloneWithoutWhere(this.#o.queryNode)})}clearLimit(){return new k({...this.#o,queryNode:u.a.cloneWithoutLimit(this.#o.queryNode)})}clearOffset(){return new k({...this.#o,queryNode:u.a.cloneWithoutOffset(this.#o.queryNode)})}clearOrderBy(){return new k({...this.#o,queryNode:u.a.cloneWithoutOrderBy(this.#o.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new k({...this.#o})}$castTo(){return new k(this.#o)}$narrowType(){return new k(this.#o)}$assertType(){return new k(this.#o)}$asTuple(){return new T.Pc(this.toOperationNode())}withPlugin(e){return new k({...this.#o,executor:this.#o.executor.withPlugin(e)})}toOperationNode(){return this.#o.executor.transformQuery(this.#o.queryNode,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){let e=this.compile();return(await this.#o.executor.executeQuery(e,this.#o.queryId)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=g.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,g.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let r of this.#o.executor.stream(t,e,this.#o.queryId))yield*r.rows}async explain(e,t){let r=new k({...this.#o,queryNode:h.V.cloneWithExplain(this.#o.queryNode,e,t)});return await r.execute()}}function C(e){return new k(e)}(0,p.q)(k,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class I{#ee;#u;constructor(e,t){this.#ee=e,this.#u=t}get expression(){return this.#ee}get alias(){return this.#u}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return i.i.create(this.#ee.toOperationNode(),N.T.create(this.#u))}}(0,p.q)(I,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.")},12448:(e,t,r)=>{"use strict";r.d(t,{x:()=>ep});var i=r(59882),n=r(32473),o=r(53130),s=r(78624),a=r(51935),d=r(96547),l=r(76922);let u=(0,d.vV)({is:e=>"ValuesNode"===e.kind,create:e=>(0,d.vV)({kind:"ValuesNode",values:(0,d.vV)(e)})});var h=r(89787);let c=(0,d.vV)({is:e=>"DefaultInsertValueNode"===e.kind,create:()=>(0,d.vV)({kind:"DefaultInsertValueNode"})});var p=r(82790);function m(e){let t=(0,d.mf)(e)?e((0,p.Z)()):e;return function(e){let t=function(e){let t=new Map;for(let r of e)for(let e of Object.keys(r))t.has(e)||void 0===r[e]||t.set(e,t.size);return t}(e);return[(0,d.vV)([...t.keys()].map(o.k.create)),u.create(e.map(e=>(function(e,t){let r=Object.keys(e),i=Array.from({length:t.size}),n=!1;for(let o of r){let r=t.get(o);if((0,d.o8)(r))continue;let s=e[o];((0,d.o8)(s)||(0,h.Yb)(s))&&(n=!0),i[r]=s}if(r.length<t.size||n){let e=c.create();return a.F.create(i.map(t=>(0,d.o8)(t)?e:(0,l.j2)(t)))}return s.c.create(i)})(e,t)))]}((0,d.DM)(t)?t:(0,d.vV)([t]))}var f=r(18160),y=r(84377);let v=(0,d.vV)({is:e=>"ColumnUpdateNode"===e.kind,create:(e,t)=>(0,d.vV)({kind:"ColumnUpdateNode",column:e,value:t})});var g=r(3646);function N(e){return Object.entries((0,d.mf)(e)?e((0,p.Z)()):e).filter(([e,t])=>void 0!==t).map(([e,t])=>v.create(o.k.create(e),(0,l.j2)(t)))}var w=r(48888);let b=(0,d.vV)({is:e=>"OnDuplicateKeyNode"===e.kind,create:e=>(0,d.vV)({kind:"OnDuplicateKeyNode",updates:e})});class _{insertId;numInsertedOrUpdatedRows;constructor(e,t){this.insertId=e,this.numInsertedOrUpdatedRows=t}}var x=r(67681),T=r(24886),P=r(15025);let O=(0,d.vV)({is:e=>"OnConflictNode"===e.kind,create:()=>(0,d.vV)({kind:"OnConflictNode"}),cloneWith:(e,t)=>(0,d.vV)({...e,...t}),cloneWithIndexWhere:(e,t)=>(0,d.vV)({...e,indexWhere:e.indexWhere?P.F.cloneWithOperation(e.indexWhere,"And",t):P.F.create(t)}),cloneWithIndexOrWhere:(e,t)=>(0,d.vV)({...e,indexWhere:e.indexWhere?P.F.cloneWithOperation(e.indexWhere,"Or",t):P.F.create(t)}),cloneWithUpdateWhere:(e,t)=>(0,d.vV)({...e,updateWhere:e.updateWhere?P.F.cloneWithOperation(e.updateWhere,"And",t):P.F.create(t)}),cloneWithUpdateOrWhere:(e,t)=>(0,d.vV)({...e,updateWhere:e.updateWhere?P.F.cloneWithOperation(e.updateWhere,"Or",t):P.F.create(t)}),cloneWithoutIndexWhere:e=>(0,d.vV)({...e,indexWhere:void 0}),cloneWithoutUpdateWhere:e=>(0,d.vV)({...e,updateWhere:void 0})});var S=r(74962);class E{#o;constructor(e){this.#o=(0,d.vV)(e)}column(e){let t=o.k.create(e);return new E({...this.#o,onConflictNode:O.cloneWith(this.#o.onConflictNode,{columns:this.#o.onConflictNode.columns?(0,d.vV)([...this.#o.onConflictNode.columns,t]):(0,d.vV)([t])})})}columns(e){let t=e.map(o.k.create);return new E({...this.#o,onConflictNode:O.cloneWith(this.#o.onConflictNode,{columns:this.#o.onConflictNode.columns?(0,d.vV)([...this.#o.onConflictNode.columns,...t]):(0,d.vV)(t)})})}constraint(e){return new E({...this.#o,onConflictNode:O.cloneWith(this.#o.onConflictNode,{constraint:T.T.create(e)})})}expression(e){return new E({...this.#o,onConflictNode:O.cloneWith(this.#o.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new E({...this.#o,onConflictNode:O.cloneWithIndexWhere(this.#o.onConflictNode,(0,S.k0)(e))})}whereRef(e,t,r){return new E({...this.#o,onConflictNode:O.cloneWithIndexWhere(this.#o.onConflictNode,(0,S.L4)(e,t,r))})}clearWhere(){return new E({...this.#o,onConflictNode:O.cloneWithoutIndexWhere(this.#o.onConflictNode)})}doNothing(){return new k({...this.#o,onConflictNode:O.cloneWith(this.#o.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new C({...this.#o,onConflictNode:O.cloneWith(this.#o.onConflictNode,{updates:N(e)})})}$call(e){return e(this)}}(0,w.q)(E,"don't await OnConflictBuilder instances.");class k{#o;constructor(e){this.#o=(0,d.vV)(e)}toOperationNode(){return this.#o.onConflictNode}}(0,w.q)(k,"don't await OnConflictDoNothingBuilder instances.");class C{#o;constructor(e){this.#o=(0,d.vV)(e)}where(...e){return new C({...this.#o,onConflictNode:O.cloneWithUpdateWhere(this.#o.onConflictNode,(0,S.k0)(e))})}whereRef(e,t,r){return new C({...this.#o,onConflictNode:O.cloneWithUpdateWhere(this.#o.onConflictNode,(0,S.L4)(e,t,r))})}clearWhere(){return new C({...this.#o,onConflictNode:O.cloneWithoutUpdateWhere(this.#o.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#o.onConflictNode}}(0,w.q)(C,"don't await OnConflictUpdateBuilder instances.");var I=r(43388);class V{#o;constructor(e){this.#o=(0,d.vV)(e)}values(e){let[t,r]=m(e);return new V({...this.#o,queryNode:f.P.cloneWith(this.#o.queryNode,{columns:t,values:r})})}columns(e){return new V({...this.#o,queryNode:f.P.cloneWith(this.#o.queryNode,{columns:(0,d.vV)(e.map(o.k.create))})})}expression(e){return new V({...this.#o,queryNode:f.P.cloneWith(this.#o.queryNode,{values:(0,h.BJ)(e)})})}defaultValues(){return new V({...this.#o,queryNode:f.P.cloneWith(this.#o.queryNode,{defaultValues:!0})})}ignore(){return new V({...this.#o,queryNode:f.P.cloneWith(this.#o.queryNode,{ignore:!0})})}top(e,t){return new V({...this.#o,queryNode:y.V.cloneWithTop(this.#o.queryNode,(0,I.G)(e,t))})}onConflict(e){return new V({...this.#o,queryNode:f.P.cloneWith(this.#o.queryNode,{onConflict:e(new E({onConflictNode:O.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new V({...this.#o,queryNode:f.P.cloneWith(this.#o.queryNode,{onDuplicateKey:b.create(N(e))})})}returning(e){return new V({...this.#o,queryNode:y.V.cloneWithReturning(this.#o.queryNode,(0,n.A)(e))})}returningAll(){return new V({...this.#o,queryNode:y.V.cloneWithReturning(this.#o.queryNode,(0,n.L)())})}clearReturning(){return new V({...this.#o,queryNode:y.V.cloneWithoutReturning(this.#o.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new V({...this.#o})}$castTo(){return new V(this.#o)}$narrowType(){return new V(this.#o)}$assertType(){return new V(this.#o)}withPlugin(e){return new V({...this.#o,executor:this.#o.executor.withPlugin(e)})}toOperationNode(){return this.#o.executor.transformQuery(this.#o.queryNode,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){let e=this.compile(),t=e.query,r=await this.#o.executor.executeQuery(e,this.#o.queryId);return this.#o.executor.adapter.supportsReturning&&t.returning?r.rows:[new _(r.insertId,r.numAffectedRows??r.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=x.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,x.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let r of this.#o.executor.stream(t,e,this.#o.queryId))yield*r.rows}async explain(e,t){let r=new V({...this.#o,queryNode:y.V.cloneWithExplain(this.#o.queryNode,e,t)});return await r.execute()}}(0,w.q)(V,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var A=r(26861),q=r(6217);class W{numDeletedRows;constructor(e){this.numDeletedRows=e}}var R=r(72303),D=r(72549),j=r(6801);class L{#o;constructor(e){this.#o=(0,d.vV)(e)}where(...e){return new L({...this.#o,queryNode:y.V.cloneWithWhere(this.#o.queryNode,(0,S.k0)(e))})}whereRef(e,t,r){return new L({...this.#o,queryNode:y.V.cloneWithWhere(this.#o.queryNode,(0,S.L4)(e,t,r))})}clearWhere(){return new L({...this.#o,queryNode:y.V.cloneWithoutWhere(this.#o.queryNode)})}top(e,t){return new L({...this.#o,queryNode:y.V.cloneWithTop(this.#o.queryNode,(0,I.G)(e,t))})}using(e){return new L({...this.#o,queryNode:R.U.cloneWithUsing(this.#o.queryNode,(0,q._V)(e))})}innerJoin(...e){return new L({...this.#o,queryNode:y.V.cloneWithJoin(this.#o.queryNode,(0,A.h)("InnerJoin",e))})}leftJoin(...e){return new L({...this.#o,queryNode:y.V.cloneWithJoin(this.#o.queryNode,(0,A.h)("LeftJoin",e))})}rightJoin(...e){return new L({...this.#o,queryNode:y.V.cloneWithJoin(this.#o.queryNode,(0,A.h)("RightJoin",e))})}fullJoin(...e){return new L({...this.#o,queryNode:y.V.cloneWithJoin(this.#o.queryNode,(0,A.h)("FullJoin",e))})}returning(e){return new L({...this.#o,queryNode:y.V.cloneWithReturning(this.#o.queryNode,(0,n.A)(e))})}returningAll(e){return new L({...this.#o,queryNode:y.V.cloneWithReturning(this.#o.queryNode,(0,n.L)(e))})}clearReturning(){return new L({...this.#o,queryNode:y.V.cloneWithoutReturning(this.#o.queryNode)})}clearLimit(){return new L({...this.#o,queryNode:R.U.cloneWithoutLimit(this.#o.queryNode)})}clearOrderBy(){return new L({...this.#o,queryNode:R.U.cloneWithoutOrderBy(this.#o.queryNode)})}orderBy(e,t){return new L({...this.#o,queryNode:R.U.cloneWithOrderByItems(this.#o.queryNode,(0,j.bX)([e,t]))})}limit(e){return new L({...this.#o,queryNode:R.U.cloneWithLimit(this.#o.queryNode,D.Z.create((0,l.j2)(e)))})}$call(e){return e(this)}$if(e,t){return e?t(this):new L({...this.#o})}$castTo(){return new L(this.#o)}$narrowType(){return new L(this.#o)}$assertType(){return new L(this.#o)}withPlugin(e){return new L({...this.#o,executor:this.#o.executor.withPlugin(e)})}toOperationNode(){return this.#o.executor.transformQuery(this.#o.queryNode,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){let e=this.compile(),t=e.query,r=await this.#o.executor.executeQuery(e,this.#o.queryId);return this.#o.executor.adapter.supportsReturning&&t.returning?r.rows:[new W(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=x.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,x.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let r of this.#o.executor.stream(t,e,this.#o.queryId))yield*r.rows}async explain(e,t){let r=new L({...this.#o,queryNode:y.V.cloneWithExplain(this.#o.queryNode,e,t)});return await r.execute()}}(0,w.q)(L,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var M=r(54052);class F{numUpdatedRows;numChangedRows;constructor(e,t){this.numUpdatedRows=e,this.numChangedRows=t}}class B{#o;constructor(e){this.#o=(0,d.vV)(e)}where(...e){return new B({...this.#o,queryNode:y.V.cloneWithWhere(this.#o.queryNode,(0,S.k0)(e))})}whereRef(e,t,r){return new B({...this.#o,queryNode:y.V.cloneWithWhere(this.#o.queryNode,(0,S.L4)(e,t,r))})}clearWhere(){return new B({...this.#o,queryNode:y.V.cloneWithoutWhere(this.#o.queryNode)})}top(e,t){return new B({...this.#o,queryNode:y.V.cloneWithTop(this.#o.queryNode,(0,I.G)(e,t))})}from(e){return new B({...this.#o,queryNode:M.j.cloneWithFromItems(this.#o.queryNode,(0,q._V)(e))})}innerJoin(...e){return new B({...this.#o,queryNode:y.V.cloneWithJoin(this.#o.queryNode,(0,A.h)("InnerJoin",e))})}leftJoin(...e){return new B({...this.#o,queryNode:y.V.cloneWithJoin(this.#o.queryNode,(0,A.h)("LeftJoin",e))})}rightJoin(...e){return new B({...this.#o,queryNode:y.V.cloneWithJoin(this.#o.queryNode,(0,A.h)("RightJoin",e))})}fullJoin(...e){return new B({...this.#o,queryNode:y.V.cloneWithJoin(this.#o.queryNode,(0,A.h)("FullJoin",e))})}limit(e){return new B({...this.#o,queryNode:M.j.cloneWithLimit(this.#o.queryNode,D.Z.create((0,l.j2)(e)))})}set(...e){return new B({...this.#o,queryNode:M.j.cloneWithUpdates(this.#o.queryNode,function(...e){return 2===e.length?[v.create((0,g.jI)(e[0]),(0,l.j2)(e[1]))]:N(e[0])}(...e))})}returning(e){return new B({...this.#o,queryNode:y.V.cloneWithReturning(this.#o.queryNode,(0,n.A)(e))})}returningAll(){return new B({...this.#o,queryNode:y.V.cloneWithReturning(this.#o.queryNode,(0,n.L)())})}clearReturning(){return new B({...this.#o,queryNode:y.V.cloneWithoutReturning(this.#o.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new B({...this.#o})}$castTo(){return new B(this.#o)}$narrowType(){return new B(this.#o)}$assertType(){return new B(this.#o)}withPlugin(e){return new B({...this.#o,executor:this.#o.executor.withPlugin(e)})}toOperationNode(){return this.#o.executor.transformQuery(this.#o.queryNode,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.toOperationNode(),this.#o.queryId)}async execute(){let e=this.compile(),t=e.query,r=await this.#o.executor.executeQuery(e,this.#o.queryId);return this.#o.executor.adapter.supportsReturning&&t.returning?r.rows:[new F(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0),r.numChangedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=x.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,x.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let r of this.#o.executor.stream(t,e,this.#o.queryId))yield*r.rows}async explain(e,t){let r=new B({...this.#o,queryNode:y.V.cloneWithExplain(this.#o.queryNode,e,t)});return await r.execute()}}(0,w.q)(B,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var G=r(21746),U=r(46840);let $=(0,d.vV)({is:e=>"CommonTableExpressionNameNode"===e.kind,create:(e,t)=>(0,d.vV)({kind:"CommonTableExpressionNameNode",table:U.F.create(e),columns:t?(0,d.vV)(t.map(o.k.create)):void 0})});var Z=r(19417);let Q=(0,d.vV)({is:e=>"CommonTableExpressionNode"===e.kind,create:(e,t)=>(0,d.vV)({kind:"CommonTableExpressionNode",name:e,expression:t}),cloneWith:(e,t)=>(0,d.vV)({...e,...t})});class J{#o;constructor(e){this.#o=(0,d.vV)(e)}materialized(){return new J({...this.#o,node:Q.cloneWith(this.#o.node,{materialized:!0})})}notMaterialized(){return new J({...this.#o,node:Q.cloneWith(this.#o.node,{materialized:!1})})}toOperationNode(){return this.#o.node}}function K(e,t){let r=t((0,Z.$l)()).toOperationNode();return(0,d.mf)(e)?e(e=>new J({node:Q.create(z(e),r)})).toOperationNode():Q.create(z(e),r)}function z(e){if(!e.includes("("))return $.create(e);{let t=e.split(/[\(\)]/),r=t[0],i=t[1].split(",").map(e=>e.trim());return $.create(r,i)}}(0,w.q)(J,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");let H=(0,d.vV)({is:e=>"WithNode"===e.kind,create:(e,t)=>(0,d.vV)({kind:"WithNode",expressions:(0,d.vV)([e]),...t}),cloneWithExpression:(e,t)=>(0,d.vV)({...e,expressions:(0,d.vV)([...e.expressions,t])})});var X=r(14666),Y=r(64545),ee=r(55936);let et=(0,d.vV)({is:e=>"MatchedNode"===e.kind,create:(e,t=!1)=>(0,d.vV)({kind:"MatchedNode",not:e,bySource:t})});var er=r(63516),ei=r(33856),en=r(67069);function eo(e,t,r){return en.$.create((0,S.QX)([et.create(!e.isMatched,e.bySource),...t&&t.length>0?[3===t.length&&r?(0,S.L4)(t[0],t[1],t[2]):(0,S.k0)(t)]:[]],"and",!1))}function es(e){return(0,d.HD)(e)?ei.x.create([e],[]):(0,er.x)(e)?e.toOperationNode():e}var ea=r(73733);class ed{numChangedRows;constructor(e){this.numChangedRows=e}}class el{#o;constructor(e){this.#o=(0,d.vV)(e)}top(e,t){return new el({...this.#o,queryNode:y.V.cloneWithTop(this.#o.queryNode,(0,I.G)(e,t))})}using(...e){return new eu({...this.#o,queryNode:ee.F.cloneWithUsing(this.#o.queryNode,(0,A.h)("Using",e))})}}(0,w.q)(el,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class eu{#o;constructor(e){this.#o=(0,d.vV)(e)}top(e,t){return new eu({...this.#o,queryNode:y.V.cloneWithTop(this.#o.queryNode,(0,I.G)(e,t))})}whenMatched(){return this.#et([])}whenMatchedAnd(...e){return this.#et(e)}whenMatchedAndRef(e,t,r){return this.#et([e,t,r],!0)}#et(e,t){return new eh({...this.#o,queryNode:ee.F.cloneWithWhen(this.#o.queryNode,eo({isMatched:!0},e,t))})}whenNotMatched(){return this.#er([])}whenNotMatchedAnd(...e){return this.#er(e)}whenNotMatchedAndRef(e,t,r){return this.#er([e,t,r],!0)}whenNotMatchedBySource(){return this.#er([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#er(e,!1,!0)}whenNotMatchedBySourceAndRef(e,t,r){return this.#er([e,t,r],!0,!0)}#er(e,t=!1,r=!1){let i={...this.#o,queryNode:ee.F.cloneWithWhen(this.#o.queryNode,eo({isMatched:!1,bySource:r},e,t))};return new(r?eh:ec)(i)}$call(e){return e(this)}$if(e,t){return e?t(this):new eu({...this.#o})}toOperationNode(){return this.#o.executor.transformQuery(this.#o.queryNode,this.#o.queryId)}compile(){return this.#o.executor.compileQuery(this.#o.queryNode,this.#o.queryId)}async execute(){let e=this.compile();return[new ed((await this.#o.executor.executeQuery(e,this.#o.queryId)).numAffectedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=x.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,x.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}}(0,w.q)(eu,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class eh{#o;constructor(e){this.#o=(0,d.vV)(e)}thenDelete(){return new eu({...this.#o,queryNode:ee.F.cloneWithThen(this.#o.queryNode,es("delete"))})}thenDoNothing(){return new eu({...this.#o,queryNode:ee.F.cloneWithThen(this.#o.queryNode,es("do nothing"))})}thenUpdate(e){return new eu({...this.#o,queryNode:ee.F.cloneWithThen(this.#o.queryNode,es(e(new B({queryId:this.#o.queryId,executor:ea.H,queryNode:M.j.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(t=>t.set(...e))}}(0,w.q)(eh,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class ec{#o;constructor(e){this.#o=(0,d.vV)(e)}thenDoNothing(){return new eu({...this.#o,queryNode:ee.F.cloneWithThen(this.#o.queryNode,es("do nothing"))})}thenInsertValues(e){let[t,r]=m(e);return new eu({...this.#o,queryNode:ee.F.cloneWithThen(this.#o.queryNode,es(f.P.cloneWith(f.P.createWithoutInto(),{columns:t,values:r})))})}}(0,w.q)(ec,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class ep{#o;constructor(e){this.#o=(0,d.vV)(e)}selectFrom(e){return(0,i.u)({queryId:(0,X.y)(),executor:this.#o.executor,queryNode:G.a.createFrom((0,q._V)(e),this.#o.withNode)})}selectNoFrom(e){return(0,i.u)({queryId:(0,X.y)(),executor:this.#o.executor,queryNode:G.a.cloneWithSelections(G.a.create(this.#o.withNode),(0,n.A)(e))})}insertInto(e){return new V({queryId:(0,X.y)(),executor:this.#o.executor,queryNode:f.P.create((0,q.G2)(e),this.#o.withNode)})}replaceInto(e){return new V({queryId:(0,X.y)(),executor:this.#o.executor,queryNode:f.P.create((0,q.G2)(e),this.#o.withNode,!0)})}deleteFrom(e){return new L({queryId:(0,X.y)(),executor:this.#o.executor,queryNode:R.U.create((0,q._V)(e),this.#o.withNode)})}updateTable(e){return new B({queryId:(0,X.y)(),executor:this.#o.executor,queryNode:M.j.create((0,q.Lr)(e),this.#o.withNode)})}mergeInto(e){return new el({queryId:(0,X.y)(),executor:this.#o.executor,queryNode:ee.F.create((0,q.hm)(e),this.#o.withNode)})}with(e,t){let r=K(e,t);return new ep({...this.#o,withNode:this.#o.withNode?H.cloneWithExpression(this.#o.withNode,r):H.create(r)})}withRecursive(e,t){let r=K(e,t);return new ep({...this.#o,withNode:this.#o.withNode?H.cloneWithExpression(this.#o.withNode,r):H.create(r,{recursive:!0})})}withPlugin(e){return new ep({...this.#o,executor:this.#o.executor.withPlugin(e)})}withoutPlugins(){return new ep({...this.#o,executor:this.#o.executor.withoutPlugins()})}withSchema(e){return new ep({...this.#o,executor:this.#o.executor.withPluginAtFront(new Y.v(e))})}}},73733:(e,t,r)=>{"use strict";r.d(t,{H:()=>o});var i=r(11874);class n extends i.u{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin(e){return new n([...this.plugins,e])}withPlugins(e){return new n([...this.plugins,...e])}withPluginAtFront(e){return new n([e,...this.plugins])}withoutPlugins(){return new n([])}}let o=new n},11874:(e,t,r)=>{"use strict";r.d(t,{u:()=>a});var i=r(96547);class n{#ei;#en;#eo;constructor(){this.#ei=new Promise((e,t)=>{this.#eo=t,this.#en=e})}get promise(){return this.#ei}resolve=e=>{this.#en&&this.#en(e)};reject=e=>{this.#eo&&this.#eo(e)}}let o=new Set,s=(0,i.vV)([]);class a{#es;constructor(e=s){this.#es=e}get plugins(){return this.#es}transformQuery(e,t){for(let r of this.#es){let i=r.transformQuery({node:e,queryId:t});if(i.kind===e.kind)e=i;else throw Error(`KyselyPlugin.transformQuery must return a node of the same kind that was given to it. The plugin was given a ${e.kind} but it returned a ${i.kind}`)}return e}async executeQuery(e,t){return await this.provideConnection(async r=>{let i=await r.executeQuery(e),n=await this.#ea(i,t);return function(e,t){let{numAffectedRows:r}=e;if((void 0!==r||void 0!==e.numUpdatedOrDeletedRows)&&(void 0===r||void 0===t.numAffectedRows)){var i;i="kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.",o.has(i)||(o.add(i),console.log(i))}}(i,n),n})}async *stream(e,t,r){let i=new n,o=new n;this.provideConnection(async e=>(i.resolve(e),await o.promise)).catch(e=>i.reject(e));let s=await i.promise;try{for await(let i of s.streamQuery(e,t))yield await this.#ea(i,r)}finally{o.resolve()}}async #ea(e,t){for(let r of this.#es)e=await r.transformResult({result:e,queryId:t});return e}}},96547:(e,t,r)=>{"use strict";function i(e){return void 0===e||void 0===e}function n(e){return"string"==typeof e}function o(e){return"number"==typeof e}function s(e){return"boolean"==typeof e}function a(e){return null===e}function d(e){return e instanceof Date}function l(e){return"bigint"==typeof e}function u(e){return"function"==typeof e}function h(e){return"object"==typeof e&&null!==e}function c(e){return Object.freeze(e)}function p(e){return m(e)?e:[e]}function m(e){return Array.isArray(e)}function f(e){return e}r.d(t,{C4:()=>l,DM:()=>m,Ft:()=>a,HD:()=>n,J_:()=>d,Kn:()=>h,ZT:()=>f,_2:()=>p,hj:()=>o,jn:()=>s,mf:()=>u,o8:()=>i,vV:()=>c})},48888:(e,t,r)=>{"use strict";function i(e,t){Object.defineProperties(e.prototype,{then:{enumerable:!1,value:()=>{throw Error(t)}}})}r.d(t,{q:()=>i})},14666:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});let i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function n(){return new o}class o{#ed;get queryId(){return void 0===this.#ed&&(this.#ed=function(e){let t="";for(let e=0;e<8;++e)t+=i[~~(Math.random()*i.length)];return t}(0)),this.#ed}}},40609:(e,t,r)=>{"use strict";r.d(t,{h:()=>iJ});var i={};r.r(i),r.d(i,{StripeAPIError:()=>I,StripeAuthenticationError:()=>V,StripeCardError:()=>k,StripeConnectionError:()=>W,StripeError:()=>E,StripeIdempotencyError:()=>D,StripeInvalidGrantError:()=>j,StripeInvalidRequestError:()=>C,StripePermissionError:()=>A,StripeRateLimitError:()=>q,StripeSignatureVerificationError:()=>R,StripeUnknownError:()=>L,generate:()=>S});var n={};r.r(n),r.d(n,{Account:()=>tY,AccountLinks:()=>t1,AccountSessions:()=>t2,Accounts:()=>tY,ApplePayDomains:()=>t8,ApplicationFees:()=>t7,Apps:()=>iO,Balance:()=>t5,BalanceTransactions:()=>rt,BillingPortal:()=>iS,Charges:()=>ri,Checkout:()=>iE,Climate:()=>ik,CountrySpecs:()=>ro,Coupons:()=>ra,CreditNotes:()=>rl,CustomerSessions:()=>rh,Customers:()=>rp,Disputes:()=>rf,EphemeralKeys:()=>rv,Events:()=>rN,ExchangeRates:()=>rb,FileLinks:()=>rx,Files:()=>rO,FinancialConnections:()=>iC,Identity:()=>iI,InvoiceItems:()=>rE,Invoices:()=>rC,Issuing:()=>iV,Mandates:()=>rV,OAuth:()=>rW,PaymentIntents:()=>rD,PaymentLinks:()=>rL,PaymentMethodConfigurations:()=>rF,PaymentMethodDomains:()=>rG,PaymentMethods:()=>r$,Payouts:()=>rQ,Plans:()=>rK,Prices:()=>rH,Products:()=>rY,PromotionCodes:()=>r1,Quotes:()=>r2,Radar:()=>iA,Refunds:()=>r8,Reporting:()=>iq,Reviews:()=>r7,SetupAttempts:()=>r5,SetupIntents:()=>it,ShippingRates:()=>ii,Sigma:()=>iW,Sources:()=>is,SubscriptionItems:()=>id,SubscriptionSchedules:()=>iu,Subscriptions:()=>ic,Tax:()=>iR,TaxCodes:()=>im,TaxRates:()=>iv,Terminal:()=>iD,TestHelpers:()=>ij,Tokens:()=>iN,Topups:()=>ib,Transfers:()=>ix,Treasury:()=>iL,WebhookEndpoints:()=>iP});var o=r(6113),s=r(82361);class a{computeHMACSignature(e,t){throw Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,t){throw Error("computeHMACSignatureAsync not implemented.")}}class d extends Error{}class l extends a{computeHMACSignature(e,t){return o.createHmac("sha256",t).update(e,"utf8").digest("hex")}async computeHMACSignatureAsync(e,t){return await this.computeHMACSignature(e,t)}}var u=r(13685),h=r.t(u,2),c=r(95687),p=r.t(c,2);class m{getClientName(){throw Error("getClientName not implemented.")}makeRequest(e,t,r,i,n,o,s,a){throw Error("makeRequest not implemented.")}static makeTimeoutError(){let e=TypeError(m.TIMEOUT_ERROR_CODE);return e.code=m.TIMEOUT_ERROR_CODE,e}}m.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"],m.TIMEOUT_ERROR_CODE="ETIMEDOUT";class f{constructor(e,t){this._statusCode=e,this._headers=t}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw Error("getRawResponse not implemented.")}toStream(e){throw Error("toStream not implemented.")}toJSON(){throw Error("toJSON not implemented.")}}let y=u||h,v=c||p,g=new y.Agent({keepAlive:!0}),N=new v.Agent({keepAlive:!0});class w extends m{constructor(e){super(),this._agent=e}getClientName(){return"node"}makeRequest(e,t,r,i,n,o,s,a){let d="http"===s,l=this._agent;return l||(l=d?g:N),new Promise((s,u)=>{let h=(d?y:v).request({host:e,port:t,path:r,method:i,agent:l,headers:n,ciphers:"DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!MD5"});h.setTimeout(a,()=>{h.destroy(m.makeTimeoutError())}),h.on("response",e=>{s(new b(e))}),h.on("error",e=>{u(e)}),h.once("socket",e=>{e.connecting?e.once(d?"connect":"secureConnect",()=>{h.write(o),h.end()}):(h.write(o),h.end())})})}}class b extends f{constructor(e){super(e.statusCode,e.headers||{}),this._res=e}getRawResponse(){return this._res}toStream(e){return this._res.once("end",()=>e()),this._res}toJSON(){return new Promise((e,t)=>{let r="";this._res.setEncoding("utf8"),this._res.on("data",e=>{r+=e}),this._res.once("end",()=>{try{e(JSON.parse(r))}catch(e){t(e)}})})}}class _ extends m{constructor(e){if(super(),!e){if(!globalThis.fetch)throw Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=_.makeFetchWithAbortTimeout(e):this._fetchFn=_.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(t,r,i)=>{let n;let o=new Promise((e,t)=>{n=setTimeout(()=>{n=null,t(m.makeTimeoutError())},i)});return Promise.race([e(t,r),o]).finally(()=>{n&&clearTimeout(n)})}}static makeFetchWithAbortTimeout(e){return async(t,r,i)=>{let n=new AbortController,o=setTimeout(()=>{o=null,n.abort(m.makeTimeoutError())},i);try{return await e(t,Object.assign(Object.assign({},r),{signal:n.signal}))}catch(e){if("AbortError"===e.name)throw m.makeTimeoutError();throw e}finally{o&&clearTimeout(o)}}}getClientName(){return"fetch"}async makeRequest(e,t,r,i,n,o,s,a){let d=new URL(r,`${"http"===s?"http":"https"}://${e}`);d.port=t;let l="POST"==i||"PUT"==i||"PATCH"==i;return new x(await this._fetchFn(d.toString(),{method:i,headers:n,body:o||(l?"":void 0)},a))}}class x extends f{constructor(e){super(e.status,x._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){let t={};for(let r of e){if(!Array.isArray(r)||2!=r.length)throw Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");t[r[0]]=r[1]}return t}}class T extends a{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,t){throw new d("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,t){let r=new TextEncoder,i=await this.subtleCrypto.importKey("raw",r.encode(t),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=new Uint8Array(await this.subtleCrypto.sign("hmac",i,r.encode(e))),o=Array(n.length);for(let e=0;e<n.length;e++)o[e]=P[n[e]];return o.join("")}}let P=Array(256);for(let e=0;e<P.length;e++)P[e]=e.toString(16).padStart(2,"0");class O{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}secureCompare(e,t){if(e.length!==t.length)return!1;let r=e.length,i=0;for(let n=0;n<r;++n)i|=e.charCodeAt(n)^t.charCodeAt(n);return 0===i}createEmitter(){throw Error("createEmitter not implemented.")}tryBufferData(e){throw Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new _(e)}createDefaultHttpClient(){throw Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new T(e)}createDefaultCryptoProvider(){throw Error("createDefaultCryptoProvider not implemented.")}}let S=e=>{switch(e.type){case"card_error":return new k(e);case"invalid_request_error":return new C(e);case"api_error":return new I(e);case"authentication_error":return new V(e);case"rate_limit_error":return new q(e);case"idempotency_error":return new D(e);case"invalid_grant":return new j(e);default:return new L(e)}};class E extends Error{constructor(e={}){super(e.message),this.type=this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=e.message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}}E.generate=S;class k extends E{}class C extends E{}class I extends E{}class V extends E{}class A extends E{}class q extends E{}class W extends E{}class R extends E{constructor(e,t,r={}){super(r),this.header=e,this.payload=t}}class D extends E{}class j extends E{}class L extends E{}var M=r(22907);let F=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host"];function B(e){return e&&"object"==typeof e&&F.some(t=>Object.prototype.hasOwnProperty.call(e,t))}function G(e){return M.stringify(e,{serializeDate:e=>Math.floor(e.getTime()/1e3).toString()}).replace(/%5B/g,"[").replace(/%5D/g,"]")}let U=(()=>{let e={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return t=>{let r=t.replace(/["\n\r\u2028\u2029]/g,t=>e[t]);return e=>r.replace(/\{([\s\S]+?)\}/g,(t,r)=>encodeURIComponent(e[r]||""))}})();function $(e){if(!Array.isArray(e)||!e[0]||"object"!=typeof e[0])return{};if(!B(e[0]))return e.shift();let t=Object.keys(e[0]),r=t.filter(e=>F.includes(e));return r.length>0&&r.length!==t.length&&J(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function Z(e){if("object"!=typeof e)throw Error("Argument must be an object");return Object.keys(e).reduce((t,r)=>(null!=e[r]&&(t[r]=e[r]),t),{})}function Q(e,t){return t?e.then(e=>{setTimeout(()=>{t(null,e)},0)},e=>{setTimeout(()=>{t(e,null)},0)}):e}function J(e){return"function"!=typeof process.emitWarning?console.warn(`Stripe: ${e}`):process.emitWarning(e,"Stripe")}function K(e,t,r){if(!Number.isInteger(t)){if(void 0!==r)return r;throw Error(`${e} must be an integer`)}return t}var z=r(32081);class H extends E{}class X extends O{constructor(){super(),this._exec=z.exec,this._UNAME_CACHE=null}uuid4(){return o.randomUUID?o.randomUUID():super.uuid4()}getUname(){return this._UNAME_CACHE||(this._UNAME_CACHE=new Promise((e,t)=>{try{this._exec("uname -a",(t,r)=>{if(t)return e(null);e(r)})}catch(t){e(null)}})),this._UNAME_CACHE}secureCompare(e,t){if(!e||!t)throw Error("secureCompare must receive two arguments");if(e.length!==t.length)return!1;if(o.timingSafeEqual){let r=new TextEncoder,i=r.encode(e),n=r.encode(t);return o.timingSafeEqual(i,n)}return super.secureCompare(e,t)}createEmitter(){return new s.EventEmitter}tryBufferData(e){if(!(e.file.data instanceof s.EventEmitter))return Promise.resolve(e);let t=[];return new Promise((r,i)=>{e.file.data.on("data",e=>{t.push(e)}).once("end",()=>{let i=Object.assign({},e);i.file.data=function(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{t.set(e,r),r+=e.length}),t}(t),r(i)}).on("error",e=>{i(new H({message:"An error occurred while attempting to process the file for upload.",detail:e}))})})}createNodeHttpClient(e){return new w(e)}createDefaultHttpClient(){return new w}createNodeCryptoProvider(){return new l}createDefaultCryptoProvider(){return this.createNodeCryptoProvider()}}function Y(e,t){for(let r in t){let i=r[0].toLowerCase()+r.substring(1),n=new t[r](e);this[i]=n}}function ee(e,t){return function(e){return new Y(e,t)}}class et{constructor(e,t,r,i){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=t,this.spec=r,this.stripeResource=i}async iterate(e){if(!(e&&e.data&&"number"==typeof e.data.length))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let t=es(this.requestArgs);if(this.index<e.data.length){let r=t?e.data.length-1-this.index:this.index,i=e.data[r];return this.index+=1,{value:i,done:!1}}if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);let t=await this.pagePromise;return this.iterate(t)}return{done:!0,value:void 0}}getNextPage(e){throw Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let e=(async()=>{let e=await this._next();return this.promiseCache.currentPromise=null,e})();return this.promiseCache.currentPromise=e,e}}class er extends et{getNextPage(e){let t=es(this.requestArgs),r=function(e,t){let r=t?0:e.data.length-1,i=e.data[r],n=i&&i.id;if(!n)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return n}(e,t);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[t?"ending_before":"starting_after"]:r})}}class ei extends et{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}}let en=(e,t,r,i)=>"search"===r.methodType?eo(new ei(i,t,r,e)):"list"===r.methodType?eo(new er(i,t,r,e)):null,eo=e=>{var t;let r=(t=(...t)=>e.next(...t),function(){let e=[].slice.call(arguments),r=function(e){if(0===e.length)return;let t=e[0];if("function"!=typeof t)throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof t}`);if(2===t.length)return t;if(t.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${t}`);return function(e,r){r(t(e))}}(e),i=function(e){if(e.length<2)return null;let t=e[1];if("function"!=typeof t)throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof t}`);return t}(e);if(e.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${e}`);return Q(new Promise((e,i)=>{t().then(function i(n){if(n.done){e();return}let o=n.value;return new Promise(e=>{r(o,e)}).then(e=>!1===e?i({done:!0,value:void 0}):t().then(i))}).catch(i)}),i)}),i={autoPagingEach:r,autoPagingToArray:function(e,t){let i=e&&e.limit;if(!i)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(i>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");return Q(new Promise((e,t)=>{let n=[];r(e=>{if(n.push(e),n.length>=i)return!1}).then(()=>{e(n)}).catch(t)}),t)},next:()=>e.next(),return:()=>({}),["undefined"!=typeof Symbol&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"]:()=>i};return i};function es(e){return!!$([].slice.call(e)).ending_before}function ea(e,t){if(this._stripe=e,t)throw Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=U(this.basePath||e.getApiField("basePath")),this.resourcePath=this.path,this.path=U(this.path),this.initialize(...arguments)}ea.extend=function(e){let t=this,r=Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(...e){t.apply(this,e)};return Object.assign(r,t),r.prototype=Object.create(t.prototype),Object.assign(r.prototype,e),r},ea.method=function(e){if(void 0!==e.path&&void 0!==e.fullPath)throw Error(`Method spec specified both a 'path' (${e.path}) and a 'fullPath' (${e.fullPath}).`);return function(...t){let r="function"==typeof t[t.length-1]&&t.pop();e.urlParams=function(e){let t=e.match(/\{\w+\}/g);return t?t.map(e=>e.replace(/[{}]/g,"")):[]}(e.fullPath||this.createResourcePathWithSymbols(e.path||""));let i=Q(this._makeRequest(t,e,{}),r);return Object.assign(i,en(this,t,e,i)),i}},ea.MAX_BUFFERED_REQUEST_METRICS=100,ea.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(e,t){let r=[this.basePath(t),this.path(t)];if("function"==typeof e){let i=e(t);i&&r.push(i)}else r.push(e);return this._joinUrlParts(r)},createResourcePathWithSymbols(e){return e?`/${this._joinUrlParts([this.resourcePath,e])}`:`/${this.resourcePath}`},_joinUrlParts:e=>e.join("/").replace(/\/{2,}/g,"/"),_getRequestOpts(e,t,r){let i=(t.method||"GET").toUpperCase(),n=t.usage||[],o=t.urlParams||[],s=t.encode||(e=>e),a=!!t.fullPath,d=U(a?t.fullPath:t.path||""),l=a?t.fullPath:this.createResourcePathWithSymbols(t.path),u=[].slice.call(e),h=o.reduce((e,t)=>{let r=u.shift();if("string"!=typeof r)throw Error(`Stripe: Argument "${t}" must be a string, but got: ${r} (on API request to \`${i} ${l}\`)`);return e[t]=r,e},{}),c=s(Object.assign({},$(u),r)),p=function(e){let t={auth:null,host:null,headers:{},settings:{}};if(e.length>0){let r=e[e.length-1];if("string"==typeof r)t.auth=e.pop();else if(B(r)){let r=Object.assign({},e.pop()),i=Object.keys(r).filter(e=>!F.includes(e));i.length&&J(`Invalid options found (${i.join(", ")}); ignoring.`),r.apiKey&&(t.auth=r.apiKey),r.idempotencyKey&&(t.headers["Idempotency-Key"]=r.idempotencyKey),r.stripeAccount&&(t.headers["Stripe-Account"]=r.stripeAccount),r.apiVersion&&(t.headers["Stripe-Version"]=r.apiVersion),Number.isInteger(r.maxNetworkRetries)&&(t.settings.maxNetworkRetries=r.maxNetworkRetries),Number.isInteger(r.timeout)&&(t.settings.timeout=r.timeout),r.host&&(t.host=r.host)}}return t}(u),m=p.host||t.host,f=!!t.streaming;if(u.filter(e=>null!=e).length)throw Error(`Stripe: Unknown arguments (${u}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${i} \`${l}\`)`);let y=a?d(h):this.createFullPath(d,h),v=Object.assign(p.headers,t.headers);t.validator&&t.validator(c,{headers:v});let g="GET"===t.method||"DELETE"===t.method;return{requestMethod:i,requestPath:y,bodyData:g?{}:c,queryData:g?c:{},auth:p.auth,headers:v,host:null!=m?m:null,streaming:f,settings:p.settings,usage:n}},_makeRequest(e,t,r){return new Promise((i,n)=>{var o;let s;try{s=this._getRequestOpts(e,t,r)}catch(e){n(e);return}let a=0===Object.keys(s.queryData).length,d=[s.requestPath,a?"":"?",G(s.queryData)].join(""),{headers:l,settings:u}=s;this._stripe._requestSender._request(s.requestMethod,s.host,d,s.bodyData,s.auth,{headers:l,settings:u,streaming:s.streaming},s.usage,function(e,r){e?n(e):i(t.transformResponseData?t.transformResponseData(r):r)},null===(o=this.requestDataProcessor)||void 0===o?void 0:o.bind(this))})}};let ed=ea.method,el=ea.extend({retrieve:ed({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:ed({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:ed({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:ed({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:ed({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:ed({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:ed({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),eu=ea.method,eh=ea.extend({create:eu({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:eu({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:eu({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),increment:eu({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),reverse:eu({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),ec=ea.method,ep=ea.extend({retrieve:ec({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:ec({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:ec({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:ec({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:ec({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),em=ea.method,ef=ea.extend({create:em({method:"POST",fullPath:"/v1/tax/calculations"}),listLineItems:em({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),ey=ea.method,ev=ea.extend({create:ey({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:ey({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:ey({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:ey({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),eg=ea.method,eN=ea.extend({deliverCard:eg({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:eg({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:eg({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:eg({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"})}),ew=ea.method,eb=ea.extend({create:ew({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:ew({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:ew({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:ew({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),e_=ea.method,ex=ea.extend({create:e_({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:e_({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:e_({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:e_({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),eT=ea.method,eP=ea.extend({create:eT({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:eT({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:eT({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:eT({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:eT({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),eO=ea.method,eS=ea.extend({create:eO({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),eE=ea.method,ek=ea.extend({create:eE({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:eE({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:eE({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),eC=ea.method,eI=ea.extend({fundCashBalance:eC({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),eV=ea.method,eA=ea.extend({create:eV({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:eV({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:eV({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),eq=ea.method,eW=ea.extend({create:eq({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:eq({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:eq({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:eq({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:eq({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),eR=ea.method,eD=ea.extend({retrieve:eR({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:eR({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),ej=ea.method,eL=ea.extend({create:ej({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:ej({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:ej({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:ej({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),retrieveFeatures:ej({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:ej({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),eM=ea.method,eF=ea.extend({fail:eM({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:eM({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:eM({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),eB=ea.method,eG=ea.extend({create:eB({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:eB({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:eB({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:eB({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),eU=ea.method,e$=ea.extend({create:eU({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:eU({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:eU({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:eU({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:eU({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),eZ=ea.method,eQ=ea.extend({create:eZ({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:eZ({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:eZ({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:eZ({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:eZ({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),eJ=ea.method,eK=ea.extend({fail:eJ({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:eJ({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:eJ({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),ez=ea.method,eH=ea.extend({create:ez({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:ez({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:ez({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:ez({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),eX=ea.method,eY=ea.extend({fail:eX({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:eX({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:eX({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),e0=ea.method,e1=ea.extend({create:e0({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:e0({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:e0({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:e0({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),e6=ea.method,e2=ea.extend({retrieve:e6({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:e6({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),e4=ea.method,e8=ea.extend({presentPaymentMethod:e4({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"})}),e3=ea.method,e7=ea.extend({create:e3({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:e3({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:e3({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:e3({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:e3({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:e3({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),processPaymentIntent:e3({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:e3({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:e3({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:e3({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),e9=ea.method,e5=ea.extend({create:e9({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),te=ea.method,tt=ea.extend({retrieve:te({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:te({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),tr=ea.method,ti=ea.extend({create:tr({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),tn=ea.method,to=ea.extend({retrieve:tn({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:tn({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),ts=ea.method,ta=ea.extend({expire:ts({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),td=ea.method,tl=ea.extend({create:td({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:td({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:td({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:td({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),tu=ea.method,th=ea.extend({create:tu({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:tu({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:tu({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),tc=ea.method,tp=ea.extend({retrieve:tc({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:tc({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),tm=ea.method,tf=ea.extend({retrieve:tm({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:tm({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),ty=ea.method,tv=ea.extend({create:ty({method:"POST",fullPath:"/v1/apps/secrets"}),list:ty({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:ty({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:ty({method:"GET",fullPath:"/v1/apps/secrets/find"})}),tg=ea.method,tN=ea.extend({create:tg({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),tw=ea.method,tb=ea.extend({create:tw({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:tw({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),list:tw({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:tw({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:tw({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),t_=ea.method,tx=ea.extend({create:t_({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:t_({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),tT=ea.method,tP=ea.extend({retrieve:tT({method:"GET",fullPath:"/v1/tax/settings"}),update:tT({method:"POST",fullPath:"/v1/tax/settings"})}),tO=ea.method,tS=ea.extend({retrieve:tO({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:tO({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),tE=ea.method,tk=ea.extend({create:tE({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:tE({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:tE({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:tE({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:tE({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),tC=ea.method,tI=ea.extend({retrieve:tC({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:tC({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:tC({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),tV=ea.method,tA=ea.extend({retrieve:tV({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:tV({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),tq=ea.method,tW=ea.extend({createForceCapture:tq({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:tq({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:tq({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),tR=ea.method,tD=ea.extend({retrieve:tR({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:tR({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),tj=ea.method,tL=ea.extend({retrieve:tj({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:tj({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:tj({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),tM=ea.method,tF=ea.extend({retrieve:tM({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:tM({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:tM({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:tM({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),tB=ea.method,tG=ea.extend({retrieve:tB({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:tB({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),tU=ea.method,t$=ea.extend({create:tU({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:tU({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:tU({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:tU({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),tZ=ea.method,tQ=ea.extend({create:tZ({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:tZ({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:tZ({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:tZ({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:tZ({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),tJ=ea.method,tK=ea.extend({retrieve:tJ({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:tJ({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),tz=ea.method,tH=ea.extend({create:tz({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:tz({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:tz({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:tz({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:tz({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:tz({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),tX=ea.method,tY=ea.extend({create:tX({method:"POST",fullPath:"/v1/accounts"}),retrieve(e,...t){return"string"==typeof e?tX({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[e,...t]):(null==e&&[].shift.apply([e,...t]),tX({method:"GET",fullPath:"/v1/account"}).apply(this,[e,...t]))},update:tX({method:"POST",fullPath:"/v1/accounts/{account}"}),list:tX({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:tX({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:tX({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:tX({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:tX({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:tX({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:tX({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:tX({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:tX({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:tX({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:tX({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCapability:tX({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:tX({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:tX({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:tX({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:tX({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:tX({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),t0=ea.method,t1=ea.extend({create:t0({method:"POST",fullPath:"/v1/account_links"})}),t6=ea.method,t2=ea.extend({create:t6({method:"POST",fullPath:"/v1/account_sessions"})}),t4=ea.method,t8=ea.extend({create:t4({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:t4({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:t4({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:t4({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),t3=ea.method,t7=ea.extend({retrieve:t3({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:t3({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:t3({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:t3({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:t3({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:t3({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),t9=ea.method,t5=ea.extend({retrieve:t9({method:"GET",fullPath:"/v1/balance"})}),re=ea.method,rt=ea.extend({retrieve:re({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:re({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),rr=ea.method,ri=ea.extend({create:rr({method:"POST",fullPath:"/v1/charges"}),retrieve:rr({method:"GET",fullPath:"/v1/charges/{charge}"}),update:rr({method:"POST",fullPath:"/v1/charges/{charge}"}),list:rr({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:rr({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:rr({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),rn=ea.method,ro=ea.extend({retrieve:rn({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:rn({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),rs=ea.method,ra=ea.extend({create:rs({method:"POST",fullPath:"/v1/coupons"}),retrieve:rs({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:rs({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:rs({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:rs({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),rd=ea.method,rl=ea.extend({create:rd({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:rd({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:rd({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:rd({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:rd({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:rd({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:rd({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:rd({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),ru=ea.method,rh=ea.extend({create:ru({method:"POST",fullPath:"/v1/customer_sessions"})}),rc=ea.method,rp=ea.extend({create:rc({method:"POST",fullPath:"/v1/customers"}),retrieve:rc({method:"GET",fullPath:"/v1/customers/{customer}"}),update:rc({method:"POST",fullPath:"/v1/customers/{customer}"}),list:rc({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:rc({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createFundingInstructions:rc({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createBalanceTransaction:rc({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createSource:rc({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:rc({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:rc({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:rc({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:rc({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listPaymentMethods:rc({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listBalanceTransactions:rc({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:rc({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listSources:rc({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:rc({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrievePaymentMethod:rc({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveBalanceTransaction:rc({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:rc({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:rc({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrieveSource:rc({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:rc({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:rc({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:rc({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:rc({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:rc({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:rc({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),rm=ea.method,rf=ea.extend({retrieve:rm({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:rm({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:rm({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:rm({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),ry=ea.method,rv=ea.extend({create:ry({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(e,t)=>{if(!t.headers||!t.headers["Stripe-Version"])throw Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:ry({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),rg=ea.method,rN=ea.extend({retrieve:rg({method:"GET",fullPath:"/v1/events/{id}"}),list:rg({method:"GET",fullPath:"/v1/events",methodType:"list"})}),rw=ea.method,rb=ea.extend({retrieve:rw({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:rw({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),r_=ea.method,rx=ea.extend({create:r_({method:"POST",fullPath:"/v1/file_links"}),retrieve:r_({method:"GET",fullPath:"/v1/file_links/{link}"}),update:r_({method:"POST",fullPath:"/v1/file_links/{link}"}),list:r_({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),rT=(e,t,r)=>{let i=(Math.round(1e16*Math.random())+Math.round(1e16*Math.random())).toString();r["Content-Type"]=`multipart/form-data; boundary=${i}`;let n=new TextEncoder,o=new Uint8Array(0),s=n.encode("\r\n");function a(e){let t=o,r=e instanceof Uint8Array?e:new Uint8Array(n.encode(e));(o=new Uint8Array(t.length+r.length+2)).set(t),o.set(r,t.length),o.set(s,o.length-2)}function d(e){return`"${e.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}let l=function(e){let t={},r=(e,i)=>{Object.keys(e).forEach(n=>{let o=e[n],s=i?`${i}[${n}]`:n;if(function(e){let t=typeof e;return("function"===t||"object"===t)&&!!e}(o)){if(!(o instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(o,"data"))return r(o,s);t[s]=o}else t[s]=String(o)})};return r(e,null),t}(t);for(let e in l){let t=l[e];a(`--${i}`),Object.prototype.hasOwnProperty.call(t,"data")?(a(`Content-Disposition: form-data; name=${d(e)}; filename=${d(t.name||"blob")}`),a(`Content-Type: ${t.type||"application/octet-stream"}`),a(""),a(t.data)):(a(`Content-Disposition: form-data; name=${d(e)}`),a(""),a(t))}return a(`--${i}--`),o},rP=ea.method,rO=ea.extend({create:rP({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:rP({method:"GET",fullPath:"/v1/files/{file}"}),list:rP({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:function(e,t,r,i){if(t=t||{},"POST"!==e)return i(null,G(t));this._stripe._platformFunctions.tryBufferData(t).then(t=>i(null,rT(e,t,r))).catch(e=>i(e,null))}}),rS=ea.method,rE=ea.extend({create:rS({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:rS({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:rS({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:rS({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:rS({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),rk=ea.method,rC=ea.extend({create:rk({method:"POST",fullPath:"/v1/invoices"}),retrieve:rk({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:rk({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:rk({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:rk({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),finalizeInvoice:rk({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:rk({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),listUpcomingLines:rk({method:"GET",fullPath:"/v1/invoices/upcoming/lines",methodType:"list"}),markUncollectible:rk({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:rk({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),retrieveUpcoming:rk({method:"GET",fullPath:"/v1/invoices/upcoming"}),search:rk({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:rk({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),voidInvoice:rk({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),rI=ea.method,rV=ea.extend({retrieve:rI({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),rA=ea.method,rq="connect.stripe.com",rW=ea.extend({basePath:"/",authorizeUrl(e,t){e=e||{};let r="oauth/authorize";return(t=t||{}).express&&(r=`express/${r}`),e.response_type||(e.response_type="code"),e.client_id||(e.client_id=this._stripe.getClientId()),e.scope||(e.scope="read_write"),`https://${rq}/${r}?${G(e)}`},token:rA({method:"POST",path:"oauth/token",host:rq}),deauthorize(e,...t){return e.client_id||(e.client_id=this._stripe.getClientId()),rA({method:"POST",path:"oauth/deauthorize",host:rq}).apply(this,[e,...t])}}),rR=ea.method,rD=ea.extend({create:rR({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:rR({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:rR({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:rR({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:rR({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:rR({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:rR({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:rR({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:rR({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:rR({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:rR({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),rj=ea.method,rL=ea.extend({create:rj({method:"POST",fullPath:"/v1/payment_links"}),retrieve:rj({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:rj({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:rj({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:rj({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),rM=ea.method,rF=ea.extend({create:rM({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:rM({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:rM({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:rM({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),rB=ea.method,rG=ea.extend({create:rB({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:rB({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:rB({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:rB({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:rB({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),rU=ea.method,r$=ea.extend({create:rU({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:rU({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:rU({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:rU({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:rU({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:rU({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),rZ=ea.method,rQ=ea.extend({create:rZ({method:"POST",fullPath:"/v1/payouts"}),retrieve:rZ({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:rZ({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:rZ({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:rZ({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:rZ({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),rJ=ea.method,rK=ea.extend({create:rJ({method:"POST",fullPath:"/v1/plans"}),retrieve:rJ({method:"GET",fullPath:"/v1/plans/{plan}"}),update:rJ({method:"POST",fullPath:"/v1/plans/{plan}"}),list:rJ({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:rJ({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),rz=ea.method,rH=ea.extend({create:rz({method:"POST",fullPath:"/v1/prices"}),retrieve:rz({method:"GET",fullPath:"/v1/prices/{price}"}),update:rz({method:"POST",fullPath:"/v1/prices/{price}"}),list:rz({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:rz({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),rX=ea.method,rY=ea.extend({create:rX({method:"POST",fullPath:"/v1/products"}),retrieve:rX({method:"GET",fullPath:"/v1/products/{id}"}),update:rX({method:"POST",fullPath:"/v1/products/{id}"}),list:rX({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:rX({method:"DELETE",fullPath:"/v1/products/{id}"}),search:rX({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),r0=ea.method,r1=ea.extend({create:r0({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:r0({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:r0({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:r0({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),r6=ea.method,r2=ea.extend({create:r6({method:"POST",fullPath:"/v1/quotes"}),retrieve:r6({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:r6({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:r6({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:r6({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:r6({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:r6({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:r6({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:r6({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:r6({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),r4=ea.method,r8=ea.extend({create:r4({method:"POST",fullPath:"/v1/refunds"}),retrieve:r4({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:r4({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:r4({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:r4({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),r3=ea.method,r7=ea.extend({retrieve:r3({method:"GET",fullPath:"/v1/reviews/{review}"}),list:r3({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:r3({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),r9=ea.method,r5=ea.extend({list:r9({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),ie=ea.method,it=ea.extend({create:ie({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:ie({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:ie({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:ie({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:ie({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:ie({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:ie({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),ir=ea.method,ii=ea.extend({create:ir({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:ir({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:ir({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:ir({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),io=ea.method,is=ea.extend({create:io({method:"POST",fullPath:"/v1/sources"}),retrieve:io({method:"GET",fullPath:"/v1/sources/{source}"}),update:io({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:io({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:io({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),ia=ea.method,id=ea.extend({create:ia({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:ia({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:ia({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:ia({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:ia({method:"DELETE",fullPath:"/v1/subscription_items/{item}"}),createUsageRecord:ia({method:"POST",fullPath:"/v1/subscription_items/{subscription_item}/usage_records"}),listUsageRecordSummaries:ia({method:"GET",fullPath:"/v1/subscription_items/{subscription_item}/usage_record_summaries",methodType:"list"})}),il=ea.method,iu=ea.extend({create:il({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:il({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:il({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:il({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:il({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:il({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),ih=ea.method,ic=ea.extend({create:ih({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:ih({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:ih({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:ih({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:ih({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:ih({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),resume:ih({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:ih({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),ip=ea.method,im=ea.extend({retrieve:ip({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:ip({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),iy=ea.method,iv=ea.extend({create:iy({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:iy({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:iy({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:iy({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),ig=ea.method,iN=ea.extend({create:ig({method:"POST",fullPath:"/v1/tokens"}),retrieve:ig({method:"GET",fullPath:"/v1/tokens/{token}"})}),iw=ea.method,ib=ea.extend({create:iw({method:"POST",fullPath:"/v1/topups"}),retrieve:iw({method:"GET",fullPath:"/v1/topups/{topup}"}),update:iw({method:"POST",fullPath:"/v1/topups/{topup}"}),list:iw({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:iw({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),i_=ea.method,ix=ea.extend({create:i_({method:"POST",fullPath:"/v1/transfers"}),retrieve:i_({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:i_({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:i_({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:i_({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:i_({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:i_({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:i_({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),iT=ea.method,iP=ea.extend({create:iT({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:iT({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:iT({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:iT({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:iT({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),iO=ee("apps",{Secrets:tv}),iS=ee("billingPortal",{Configurations:ex,Sessions:tN}),iE=ee("checkout",{Sessions:tb}),ik=ee("climate",{Orders:eQ,Products:e2,Suppliers:tS}),iC=ee("financialConnections",{Accounts:el,Sessions:tx,Transactions:tD}),iI=ee("identity",{VerificationReports:tK,VerificationSessions:tH}),iV=ee("issuing",{Authorizations:ep,Cardholders:ev,Cards:eb,Disputes:eW,Tokens:tI,Transactions:tL}),iA=ee("radar",{EarlyFraudWarnings:eD,ValueListItems:t$,ValueLists:tQ}),iq=ee("reporting",{ReportRuns:th,ReportTypes:tp}),iW=ee("sigma",{ScheduledQueryRuns:tf}),iR=ee("tax",{Calculations:ef,Registrations:tl,Settings:tP,Transactions:tF}),iD=ee("terminal",{Configurations:eP,ConnectionTokens:eS,Locations:e$,Readers:e7}),ij=ee("testHelpers",{Customers:eI,Refunds:ta,TestClocks:tk,Issuing:ee("issuing",{Authorizations:eh,Cards:eN,Transactions:tW}),Terminal:ee("terminal",{Readers:e8}),Treasury:ee("treasury",{InboundTransfers:eF,OutboundPayments:eK,OutboundTransfers:eY,ReceivedCredits:e5,ReceivedDebits:ti})}),iL=ee("treasury",{CreditReversals:ek,DebitReversals:eA,FinancialAccounts:eL,InboundTransfers:eG,OutboundPayments:eH,OutboundTransfers:e1,ReceivedCredits:tt,ReceivedDebits:to,TransactionEntries:tA,Transactions:tG});class iM{constructor(e,t){this._stripe=e,this._maxBufferedRequestMetric=t}_addHeadersDirectlyToObject(e,t){e.requestId=t["request-id"],e.stripeAccount=e.stripeAccount||t["stripe-account"],e.apiVersion=e.apiVersion||t["stripe-version"],e.idempotencyKey=e.idempotencyKey||t["idempotency-key"]}_makeResponseEvent(e,t,r){let i=Date.now(),n=i-e.request_start_time;return Z({api_version:r["stripe-version"],account:r["stripe-account"],idempotency_key:r["idempotency-key"],method:e.method,path:e.path,status:t,request_id:this._getRequestId(r),elapsed:n,request_start_time:e.request_start_time,request_end_time:i})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,t,r){return i=>{let n=i.getHeaders(),o=i.toStream(()=>{let r=this._makeResponseEvent(e,i.getStatusCode(),n);this._stripe._emitter.emit("response",r),this._recordRequestMetrics(this._getRequestId(n),r.elapsed,t)});return this._addHeadersDirectlyToObject(o,n),r(null,o)}}_jsonResponseHandler(e,t,r){return i=>{let n=i.getHeaders(),o=this._getRequestId(n),s=i.getStatusCode(),a=this._makeResponseEvent(e,s,n);this._stripe._emitter.emit("response",a),i.toJSON().then(e=>{if(e.error)throw"string"==typeof e.error&&(e.error={type:e.error,message:e.error_description}),e.error.headers=n,e.error.statusCode=s,e.error.requestId=o,401===s?new V(e.error):403===s?new A(e.error):429===s?new q(e.error):E.generate(e.error);return e},e=>{throw new I({message:"Invalid JSON received from the Stripe API",exception:e,requestId:n["request-id"]})}).then(e=>{this._recordRequestMetrics(o,a.elapsed,t);let s=i.getRawResponse();this._addHeadersDirectlyToObject(s,n),Object.defineProperty(e,"lastResponse",{enumerable:!1,writable:!1,value:s}),r(null,e)},e=>r(e,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,t,r,i){return!!(i&&0===t&&m.CONNECTION_CLOSED_ERROR_CODES.includes(i.code))||!(t>=r)&&(!e||"false"!==e.getHeaders()["stripe-should-retry"]&&!!("true"===e.getHeaders()["stripe-should-retry"]||409===e.getStatusCode()||e.getStatusCode()>=500))}_getSleepTimeInMS(e,t=null){let r=this._stripe.getInitialNetworkRetryDelay(),i=Math.min(r*Math.pow(e-1,2),this._stripe.getMaxNetworkRetryDelay());return i*=.5*(1+Math.random()),i=Math.max(r,i),Number.isInteger(t)&&t<=60&&(i=Math.max(i,t)),1e3*i}_getMaxNetworkRetries(e={}){return void 0!==e.maxNetworkRetries&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,t){let r=this._getMaxNetworkRetries(t);return"POST"===e&&r>0?`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`:null}_makeHeaders(e,t,r,i,n,o,s){let a={Authorization:e?`Bearer ${e}`:this._stripe.getApiField("auth"),Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","User-Agent":this._getUserAgentString(),"X-Stripe-Client-User-Agent":i,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":r,"Stripe-Account":this._stripe.getApiField("stripeAccount"),"Idempotency-Key":this._defaultIdempotencyKey(n,s)},d="POST"==n||"PUT"==n||"PATCH"==n;return(d||t)&&(d||J(`${n} method had non-zero contentLength but no payload is expected for this verb`),a["Content-Length"]=t),Object.assign(Z(a),o&&"object"==typeof o?Object.keys(o).reduce((e,t)=>(e[t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")]=o[t],e),{}):o)}_getUserAgentString(){let e=this._stripe.getConstant("PACKAGE_VERSION"),t=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/v1 NodeBindings/${e} ${t}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0)return JSON.stringify({last_request_metrics:this._stripe._prevRequestMetrics.shift()})}_recordRequestMetrics(e,t,r){if(this._stripe.getTelemetryEnabled()&&e){if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)J("Request metrics buffer is full, dropping telemetry message.");else{let i={request_id:e,request_duration_ms:t};r&&r.length>0&&(i.usage=r),this._stripe._prevRequestMetrics.push(i)}}}_request(e,t,r,i,n,o={},s=[],a,d=null){let l;let u=(e,t,r,i,n)=>setTimeout(e,this._getSleepTimeInMS(i,n),t,r,i+1),h=(i,n,d)=>{let c=o.settings&&o.settings.timeout&&Number.isInteger(o.settings.timeout)&&o.settings.timeout>=0?o.settings.timeout:this._stripe.getApiField("timeout"),p=this._stripe.getApiField("httpClient").makeRequest(t||this._stripe.getApiField("host"),this._stripe.getApiField("port"),r,e,n,l,this._stripe.getApiField("protocol"),c),f=Date.now(),y=Z({api_version:i,account:n["Stripe-Account"],idempotency_key:n["Idempotency-Key"],method:e,path:r,request_start_time:f}),v=d||0,g=this._getMaxNetworkRetries(o.settings||{});this._stripe._emitter.emit("request",y),p.then(e=>iM._shouldRetry(e,v,g)?u(h,i,n,v,e.getHeaders()["retry-after"]):o.streaming&&400>e.getStatusCode()?this._streamingResponseHandler(y,s,a)(e):this._jsonResponseHandler(y,s,a)(e)).catch(e=>iM._shouldRetry(null,v,g,e)?u(h,i,n,v,null):a(new W({message:e.code&&e.code===m.TIMEOUT_ERROR_CODE?`Request aborted due to timeout being reached (${c}ms)`:iM._generateConnectionErrorMessage(v),detail:e})))},c=(t,r)=>{if(t)return a(t);l=r,this._stripe.getClientUserAgent(t=>{var r,i;let s=this._stripe.getApiField("version"),a=this._makeHeaders(n,l.length,s,t,e,null!==(r=o.headers)&&void 0!==r?r:null,null!==(i=o.settings)&&void 0!==i?i:{});h(s,a,0)})};d?d(e,i,o.headers,c):c(null,G(i||{}))}}function iF(e){let t={DEFAULT_TOLERANCE:300,signature:null,constructEvent(e,r,i,n,o,s){try{this.signature.verifyHeader(e,r,i,n||t.DEFAULT_TOLERANCE,o,s)}catch(e){throw e instanceof d&&(e.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),e}return e instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(e)):JSON.parse(e)},async constructEventAsync(e,r,i,n,o,s){return await this.signature.verifyHeaderAsync(e,r,i,n||t.DEFAULT_TOLERANCE,o,s),e instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(e)):JSON.parse(e)},generateTestHeaderString:function(e){if(!e)throw new E({message:"Options are required"});return e.timestamp=Math.floor(e.timestamp)||Math.floor(Date.now()/1e3),e.scheme=e.scheme||r.EXPECTED_SCHEME,e.cryptoProvider=e.cryptoProvider||a(),e.signature=e.signature||e.cryptoProvider.computeHMACSignature(e.timestamp+"."+e.payload,e.secret),["t="+e.timestamp,e.scheme+"="+e.signature].join(",")}},r={EXPECTED_SCHEME:"v1",verifyHeader(e,t,r,s,d,l){let{decodedHeader:u,decodedPayload:h,details:c,suspectPayloadType:p}=n(e,t,this.EXPECTED_SCHEME),m=/\s/.test(r),f=(d=d||a()).computeHMACSignature(i(h,c),r);return o(h,u,c,f,s,p,m,l),!0},async verifyHeaderAsync(e,t,r,s,d,l){let{decodedHeader:u,decodedPayload:h,details:c,suspectPayloadType:p}=n(e,t,this.EXPECTED_SCHEME),m=/\s/.test(r);d=d||a();let f=await d.computeHMACSignatureAsync(i(h,c),r);return o(h,u,c,f,s,p,m,l)}};function i(e,t){return`${t.timestamp}.${e}`}function n(e,t,r){if(!e)throw new R(t,e,{message:"No webhook payload was provided."});let i="string"!=typeof e&&!(e instanceof Uint8Array),n=new TextDecoder("utf8"),o=e instanceof Uint8Array?n.decode(e):e;if(Array.isArray(t))throw Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(null==t||""==t)throw new R(t,e,{message:"No stripe-signature header value was provided."});let s=t instanceof Uint8Array?n.decode(t):t,a="string"!=typeof s?null:s.split(",").reduce((e,t)=>{let i=t.split("=");return"t"===i[0]&&(e.timestamp=parseInt(i[1],10)),i[0]===r&&e.signatures.push(i[1]),e},{timestamp:-1,signatures:[]});if(!a||-1===a.timestamp)throw new R(s,o,{message:"Unable to extract timestamp and signatures from header"});if(!a.signatures.length)throw new R(s,o,{message:"No signatures found with expected scheme"});return{decodedPayload:o,decodedHeader:s,details:a,suspectPayloadType:i}}function o(t,r,i,n,o,s,a,d){let l=!!i.signatures.filter(e.secureCompare.bind(e,n)).length,u="\nLearn more about webhook signing and explore webhook integration examples for various frameworks at https://github.com/stripe/stripe-node#webhook-signing",h=a?"\n\nNote: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value":"";if(!l){if(s)throw new R(r,t,{message:"Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. \nSignature verification is impossible without access to the original signed material. \n"+u+"\n"+h});throw new R(r,t,{message:"No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? \n If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.\n"+u+"\n"+h})}let c=Math.floor(("number"==typeof d?d:Date.now())/1e3)-i.timestamp;if(o>0&&c>o)throw new R(r,t,{message:"Timestamp outside the tolerance zone"});return!0}let s=null;function a(){return s||(s=e.createDefaultCryptoProvider()),s}return t.signature=r,t}let iB="api.stripe.com",iG="/v1/",iU="2023-10-16",i$=["name","version","url","partner_id"],iZ=["apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount"],iQ=e=>new iM(e,ea.MAX_BUFFERED_REQUEST_METRICS),iJ=function(e,t=iQ){function r(t=e){return iF(t)}function o(n,s={}){if(!(this instanceof o))return new o(n,s);let a=this._getPropsFromConfig(s);this._platformFunctions=e,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=o.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);let d=a.httpAgent||null;this._api={auth:null,host:a.host||iB,port:a.port||"443",protocol:a.protocol||"https",basePath:iG,version:a.apiVersion||iU,timeout:K("timeout",a.timeout,8e4),maxNetworkRetries:K("maxNetworkRetries",a.maxNetworkRetries,1),agent:d,httpClient:a.httpClient||(d?this._platformFunctions.createNodeHttpClient(d):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:a.stripeAccount||null};let l=a.typescript||!1;l!==o.USER_AGENT.typescript&&(o.USER_AGENT.typescript=l),a.appInfo&&this._setAppInfo(a.appInfo),this._prepResources(),this._setApiKey(n),this.errors=i,this.webhooks=r(),this._prevRequestMetrics=[],this._enableTelemetry=!1!==a.telemetry,this._requestSender=t(this),this.StripeResource=o.StripeResource}return o.PACKAGE_VERSION="14.15.0",o.USER_AGENT=Object.assign({bindings_version:o.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},"undefined"==typeof process?{}:{lang_version:process.version,platform:process.platform}),o.StripeResource=ea,o.resources=n,o.HttpClient=m,o.HttpClientResponse=f,o.CryptoProvider=a,o.webhooks=Object.assign(r,iF(e)),o.errors=i,o.createNodeHttpClient=e.createNodeHttpClient,o.createFetchHttpClient=e.createFetchHttpClient,o.createNodeCryptoProvider=e.createNodeCryptoProvider,o.createSubtleCryptoProvider=e.createSubtleCryptoProvider,o.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,_setApiKey(e){e&&this._setApiField("auth",`Bearer ${e}`)},_setAppInfo(e){if(e&&"object"!=typeof e)throw Error("AppInfo must be an object.");if(e&&!e.name)throw Error("AppInfo.name is required");e=e||{},this._appInfo=i$.reduce((t,r)=>("string"==typeof e[r]&&((t=t||{})[r]=e[r]),t),void 0)},_setApiField(e,t){this._api[e]=t},getApiField(e){return this._api[e]},setClientId(e){this._clientId=e},getClientId(){return this._clientId},getConstant:e=>{switch(e){case"DEFAULT_HOST":return iB;case"DEFAULT_PORT":return"443";case"DEFAULT_BASE_PATH":return iG;case"DEFAULT_API_VERSION":return iU;case"DEFAULT_TIMEOUT":return 8e4;case"MAX_NETWORK_RETRY_DELAY_SEC":return 2;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return .5}return o[e]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(e,t,r){let i=K(e,t,r);this._setApiField(e,i)},getMaxNetworkRetryDelay:()=>2,getInitialNetworkRetryDelay:()=>.5,getClientUserAgent(e){return this.getClientUserAgentSeeded(o.USER_AGENT,e)},getClientUserAgentSeeded(e,t){this._platformFunctions.getUname().then(r=>{var i;let n={};for(let t in e)n[t]=encodeURIComponent(null!==(i=e[t])&&void 0!==i?i:"null");n.uname=encodeURIComponent(r||"UNKNOWN");let o=this.getApiField("httpClient");o&&(n.httplib=encodeURIComponent(o.getClientName())),this._appInfo&&(n.application=this._appInfo),t(JSON.stringify(n))})},getAppInfoAsString(){if(!this._appInfo)return"";let e=this._appInfo.name;return this._appInfo.version&&(e+=`/${this._appInfo.version}`),this._appInfo.url&&(e+=` (${this._appInfo.url})`),e},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let e in n)this["OAuth"===e?"oauth":e[0].toLowerCase()+e.substring(1)]=new n[e](this)},_getPropsFromConfig(e){if(!e)return{};let t="string"==typeof e;if(!(e===Object(e)&&!Array.isArray(e))&&!t)throw Error("Config must either be an object or a string");if(t)return{apiVersion:e};if(Object.keys(e).filter(e=>!iZ.includes(e)).length>0)throw Error(`Config object may only contain the following: ${iZ.join(", ")}`);return e}},o}(new X)},2766:(e,t,r)=>{"use strict";let i;r.d(t,{Z_:()=>ew,jm:()=>a,z:()=>e4}),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),i={};for(let e of r)i[e]=t[e];return e.objectValues(i)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(e0||(e0={})),(e1||(e1={})).mergeShapes=(e,t)=>({...e,...t});let n=e0.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),o=e=>{switch(typeof e){case"undefined":return n.undefined;case"string":return n.string;case"number":return isNaN(e)?n.nan:n.number;case"boolean":return n.boolean;case"function":return n.function;case"bigint":return n.bigint;case"symbol":return n.symbol;case"object":if(Array.isArray(e))return n.array;if(null===e)return n.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return n.promise;if("undefined"!=typeof Map&&e instanceof Map)return n.map;if("undefined"!=typeof Set&&e instanceof Set)return n.set;if("undefined"!=typeof Date&&e instanceof Date)return n.date;return n.object;default:return n.unknown}},s=e0.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class a extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},r={_errors:[]},i=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(i);else if("invalid_return_type"===n.code)i(n.returnTypeError);else if("invalid_arguments"===n.code)i(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,i=0;for(;i<n.path.length;){let r=n.path[i];i===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,e0.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}a.create=e=>new a(e);let d=(e,t)=>{let r;switch(e.code){case s.invalid_type:r=e.received===n.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case s.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,e0.jsonStringifyReplacer)}`;break;case s.unrecognized_keys:r=`Unrecognized key(s) in object: ${e0.joinValues(e.keys,", ")}`;break;case s.invalid_union:r="Invalid input";break;case s.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${e0.joinValues(e.options)}`;break;case s.invalid_enum_value:r=`Invalid enum value. Expected ${e0.joinValues(e.options)}, received '${e.received}'`;break;case s.invalid_arguments:r="Invalid function arguments";break;case s.invalid_return_type:r="Invalid function return type";break;case s.invalid_date:r="Invalid date";break;case s.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:e0.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case s.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case s.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case s.custom:r="Invalid input";break;case s.invalid_intersection_types:r="Intersection results could not be merged";break;case s.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case s.not_finite:r="Number must be finite";break;default:r=t.defaultError,e0.assertNever(e)}return{message:r}},l=d;function u(){return l}let h=e=>{let{data:t,path:r,errorMaps:i,issueData:n}=e,o=[...r,...n.path||[]],s={...n,path:o},a="";for(let e of i.filter(e=>!!e).slice().reverse())a=e(s,{data:t,defaultError:a}).message;return{...n,path:o,message:n.message||a}};function c(e,t){let r=h({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,u(),d].filter(e=>!!e)});e.common.issues.push(r)}class p{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let i of t){if("aborted"===i.status)return m;"dirty"===i.status&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t)r.push({key:await e.key,value:await e.value});return p.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let i of t){let{key:t,value:n}=i;if("aborted"===t.status||"aborted"===n.status)return m;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||i.alwaysSet)&&(r[t.value]=n.value)}return{status:e.value,value:r}}}let m=Object.freeze({status:"aborted"}),f=e=>({status:"dirty",value:e}),y=e=>({status:"valid",value:e}),v=e=>"aborted"===e.status,g=e=>"dirty"===e.status,N=e=>"valid"===e.status,w=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(e6||(e6={}));class b{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let _=(e,t)=>{if(N(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new a(e.common.issues);return this._error=t,this._error}}};function x(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:i,description:n}=e;if(t&&(r||i))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=i?i:t.defaultError}:{message:null!=r?r:t.defaultError},description:n}}class T{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return o(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:o(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new p,ctx:{common:e.parent.common,data:e.data,parsedType:o(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(w(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let i={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:o(e)},n=this._parseSync({data:e,path:i.path,parent:i});return _(i,n)}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:o(e)},i=this._parse({data:e,path:r.path,parent:r});return _(r,await (w(i)?i:Promise.resolve(i)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,i)=>{let n=e(t),o=()=>i.addIssue({code:s.custom,...r(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(o(),!1)):!!n||(o(),!1)})}refinement(e,t){return this._refinement((r,i)=>!!e(r)||(i.addIssue("function"==typeof t?t(r,i):t),!1))}_refinement(e){return new ed({schema:this,typeName:e2.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return el.create(this,this._def)}nullable(){return eu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $.create(this,this._def)}promise(){return ea.create(this,this._def)}or(e){return Q.create([this,e],this._def)}and(e){return z.create(this,e,this._def)}transform(e){return new ed({...x(this._def),schema:this,typeName:e2.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eh({...x(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:e2.ZodDefault})}brand(){return new ef({typeName:e2.ZodBranded,type:this,...x(this._def)})}catch(e){return new ec({...x(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:e2.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return ey.create(this,e)}readonly(){return ev.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let P=/^c[^\s-]{8,}$/i,O=/^[a-z][a-z0-9]*$/,S=/^[0-9A-HJKMNP-TV-Z]{26}$/,E=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,k=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,C=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,I=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,V=e=>e.precision?e.offset?RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):0===e.precision?e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");class A extends T{_parse(e){let t;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==n.string){let t=this._getOrReturnCtx(e);return c(t,{code:s.invalid_type,expected:n.string,received:t.parsedType}),m}let r=new p;for(let n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(c(t=this._getOrReturnCtx(e,t),{code:s.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if("max"===n.kind)e.data.length>n.value&&(c(t=this._getOrReturnCtx(e,t),{code:s.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if("length"===n.kind){let i=e.data.length>n.value,o=e.data.length<n.value;(i||o)&&(t=this._getOrReturnCtx(e,t),i?c(t,{code:s.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):o&&c(t,{code:s.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),r.dirty())}else if("email"===n.kind)k.test(e.data)||(c(t=this._getOrReturnCtx(e,t),{validation:"email",code:s.invalid_string,message:n.message}),r.dirty());else if("emoji"===n.kind)i||(i=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),i.test(e.data)||(c(t=this._getOrReturnCtx(e,t),{validation:"emoji",code:s.invalid_string,message:n.message}),r.dirty());else if("uuid"===n.kind)E.test(e.data)||(c(t=this._getOrReturnCtx(e,t),{validation:"uuid",code:s.invalid_string,message:n.message}),r.dirty());else if("cuid"===n.kind)P.test(e.data)||(c(t=this._getOrReturnCtx(e,t),{validation:"cuid",code:s.invalid_string,message:n.message}),r.dirty());else if("cuid2"===n.kind)O.test(e.data)||(c(t=this._getOrReturnCtx(e,t),{validation:"cuid2",code:s.invalid_string,message:n.message}),r.dirty());else if("ulid"===n.kind)S.test(e.data)||(c(t=this._getOrReturnCtx(e,t),{validation:"ulid",code:s.invalid_string,message:n.message}),r.dirty());else if("url"===n.kind)try{new URL(e.data)}catch(i){c(t=this._getOrReturnCtx(e,t),{validation:"url",code:s.invalid_string,message:n.message}),r.dirty()}else if("regex"===n.kind)n.regex.lastIndex=0,n.regex.test(e.data)||(c(t=this._getOrReturnCtx(e,t),{validation:"regex",code:s.invalid_string,message:n.message}),r.dirty());else if("trim"===n.kind)e.data=e.data.trim();else if("includes"===n.kind)e.data.includes(n.value,n.position)||(c(t=this._getOrReturnCtx(e,t),{code:s.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),r.dirty());else if("toLowerCase"===n.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===n.kind)e.data=e.data.toUpperCase();else if("startsWith"===n.kind)e.data.startsWith(n.value)||(c(t=this._getOrReturnCtx(e,t),{code:s.invalid_string,validation:{startsWith:n.value},message:n.message}),r.dirty());else if("endsWith"===n.kind)e.data.endsWith(n.value)||(c(t=this._getOrReturnCtx(e,t),{code:s.invalid_string,validation:{endsWith:n.value},message:n.message}),r.dirty());else if("datetime"===n.kind)V(n).test(e.data)||(c(t=this._getOrReturnCtx(e,t),{code:s.invalid_string,validation:"datetime",message:n.message}),r.dirty());else if("ip"===n.kind){var o,a;o=e.data,("v4"===(a=n.version)||!a)&&C.test(o)||("v6"===a||!a)&&I.test(o)||(c(t=this._getOrReturnCtx(e,t),{validation:"ip",code:s.invalid_string,message:n.message}),r.dirty())}else e0.assertNever(n);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:s.invalid_string,...e6.errToObj(r)})}_addCheck(e){return new A({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...e6.errToObj(e)})}url(e){return this._addCheck({kind:"url",...e6.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...e6.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...e6.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...e6.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...e6.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...e6.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...e6.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...e6.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...e6.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...e6.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...e6.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...e6.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...e6.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...e6.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...e6.errToObj(t)})}nonempty(e){return this.min(1,e6.errToObj(e))}trim(){return new A({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new A({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new A({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}A.create=e=>{var t;return new A({checks:[],typeName:e2.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...x(e)})};class q extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==n.number){let t=this._getOrReturnCtx(e);return c(t,{code:s.invalid_type,expected:n.number,received:t.parsedType}),m}let r=new p;for(let i of this._def.checks)"int"===i.kind?e0.isInteger(e.data)||(c(t=this._getOrReturnCtx(e,t),{code:s.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(c(t=this._getOrReturnCtx(e,t),{code:s.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(c(t=this._getOrReturnCtx(e,t),{code:s.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"multipleOf"===i.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,n=r>i?r:i;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}(e.data,i.value)&&(c(t=this._getOrReturnCtx(e,t),{code:s.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(c(t=this._getOrReturnCtx(e,t),{code:s.not_finite,message:i.message}),r.dirty()):e0.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,e6.toString(t))}gt(e,t){return this.setLimit("min",e,!1,e6.toString(t))}lte(e,t){return this.setLimit("max",e,!0,e6.toString(t))}lt(e,t){return this.setLimit("max",e,!1,e6.toString(t))}setLimit(e,t,r,i){return new q({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:e6.toString(i)}]})}_addCheck(e){return new q({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:e6.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:e6.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:e6.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:e6.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:e6.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:e6.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:e6.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:e6.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:e6.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&e0.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}q.create=e=>new q({checks:[],typeName:e2.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...x(e)});class W extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==n.bigint){let t=this._getOrReturnCtx(e);return c(t,{code:s.invalid_type,expected:n.bigint,received:t.parsedType}),m}let r=new p;for(let i of this._def.checks)"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(c(t=this._getOrReturnCtx(e,t),{code:s.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(c(t=this._getOrReturnCtx(e,t),{code:s.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(c(t=this._getOrReturnCtx(e,t),{code:s.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):e0.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,e6.toString(t))}gt(e,t){return this.setLimit("min",e,!1,e6.toString(t))}lte(e,t){return this.setLimit("max",e,!0,e6.toString(t))}lt(e,t){return this.setLimit("max",e,!1,e6.toString(t))}setLimit(e,t,r,i){return new W({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:e6.toString(i)}]})}_addCheck(e){return new W({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:e6.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:e6.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:e6.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:e6.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:e6.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}W.create=e=>{var t;return new W({checks:[],typeName:e2.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...x(e)})};class R extends T{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==n.boolean){let t=this._getOrReturnCtx(e);return c(t,{code:s.invalid_type,expected:n.boolean,received:t.parsedType}),m}return y(e.data)}}R.create=e=>new R({typeName:e2.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...x(e)});class D extends T{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==n.date){let t=this._getOrReturnCtx(e);return c(t,{code:s.invalid_type,expected:n.date,received:t.parsedType}),m}if(isNaN(e.data.getTime()))return c(this._getOrReturnCtx(e),{code:s.invalid_date}),m;let r=new p;for(let i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(c(t=this._getOrReturnCtx(e,t),{code:s.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(c(t=this._getOrReturnCtx(e,t),{code:s.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):e0.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new D({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:e6.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:e6.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}D.create=e=>new D({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:e2.ZodDate,...x(e)});class j extends T{_parse(e){if(this._getType(e)!==n.symbol){let t=this._getOrReturnCtx(e);return c(t,{code:s.invalid_type,expected:n.symbol,received:t.parsedType}),m}return y(e.data)}}j.create=e=>new j({typeName:e2.ZodSymbol,...x(e)});class L extends T{_parse(e){if(this._getType(e)!==n.undefined){let t=this._getOrReturnCtx(e);return c(t,{code:s.invalid_type,expected:n.undefined,received:t.parsedType}),m}return y(e.data)}}L.create=e=>new L({typeName:e2.ZodUndefined,...x(e)});class M extends T{_parse(e){if(this._getType(e)!==n.null){let t=this._getOrReturnCtx(e);return c(t,{code:s.invalid_type,expected:n.null,received:t.parsedType}),m}return y(e.data)}}M.create=e=>new M({typeName:e2.ZodNull,...x(e)});class F extends T{constructor(){super(...arguments),this._any=!0}_parse(e){return y(e.data)}}F.create=e=>new F({typeName:e2.ZodAny,...x(e)});class B extends T{constructor(){super(...arguments),this._unknown=!0}_parse(e){return y(e.data)}}B.create=e=>new B({typeName:e2.ZodUnknown,...x(e)});class G extends T{_parse(e){let t=this._getOrReturnCtx(e);return c(t,{code:s.invalid_type,expected:n.never,received:t.parsedType}),m}}G.create=e=>new G({typeName:e2.ZodNever,...x(e)});class U extends T{_parse(e){if(this._getType(e)!==n.undefined){let t=this._getOrReturnCtx(e);return c(t,{code:s.invalid_type,expected:n.void,received:t.parsedType}),m}return y(e.data)}}U.create=e=>new U({typeName:e2.ZodVoid,...x(e)});class $ extends T{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==n.array)return c(t,{code:s.invalid_type,expected:n.array,received:t.parsedType}),m;if(null!==i.exactLength){let e=t.data.length>i.exactLength.value,n=t.data.length<i.exactLength.value;(e||n)&&(c(t,{code:e?s.too_big:s.too_small,minimum:n?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&(c(t,{code:s.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&(c(t,{code:s.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>i.type._parseAsync(new b(t,e,t.path,r)))).then(e=>p.mergeArray(r,e));let o=[...t.data].map((e,r)=>i.type._parseSync(new b(t,e,t.path,r)));return p.mergeArray(r,o)}get element(){return this._def.type}min(e,t){return new $({...this._def,minLength:{value:e,message:e6.toString(t)}})}max(e,t){return new $({...this._def,maxLength:{value:e,message:e6.toString(t)}})}length(e,t){return new $({...this._def,exactLength:{value:e,message:e6.toString(t)}})}nonempty(e){return this.min(1,e)}}$.create=(e,t)=>new $({type:e,minLength:null,maxLength:null,exactLength:null,typeName:e2.ZodArray,...x(t)});class Z extends T{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=e0.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==n.object){let t=this._getOrReturnCtx(e);return c(t,{code:s.invalid_type,expected:n.object,received:t.parsedType}),m}let{status:t,ctx:r}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof G&&"strip"===this._def.unknownKeys))for(let e in r.data)o.includes(e)||a.push(e);let d=[];for(let e of o){let t=i[e],n=r.data[e];d.push({key:{status:"valid",value:e},value:t._parse(new b(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof G){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of a)d.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)a.length>0&&(c(r,{code:s.unrecognized_keys,keys:a}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of a){let i=r.data[t];d.push({key:{status:"valid",value:t},value:e._parse(new b(r,i,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of d){let r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e}).then(e=>p.mergeObjectSync(t,e)):p.mergeObjectSync(t,d)}get shape(){return this._def.shape()}strict(e){return e6.errToObj,new Z({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var i,n,o,s;let a=null!==(o=null===(n=(i=this._def).errorMap)||void 0===n?void 0:n.call(i,t,r).message)&&void 0!==o?o:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=e6.errToObj(e).message)&&void 0!==s?s:a}:{message:a}}}:{}})}strip(){return new Z({...this._def,unknownKeys:"strip"})}passthrough(){return new Z({...this._def,unknownKeys:"passthrough"})}extend(e){return new Z({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Z({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:e2.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Z({...this._def,catchall:e})}pick(e){let t={};return e0.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new Z({...this._def,shape:()=>t})}omit(e){let t={};return e0.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new Z({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof Z){let r={};for(let i in t.shape){let n=t.shape[i];r[i]=el.create(e(n))}return new Z({...t._def,shape:()=>r})}return t instanceof $?new $({...t._def,type:e(t.element)}):t instanceof el?el.create(e(t.unwrap())):t instanceof eu?eu.create(e(t.unwrap())):t instanceof H?H.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};return e0.objectKeys(this.shape).forEach(r=>{let i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new Z({...this._def,shape:()=>t})}required(e){let t={};return e0.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof el;)e=e._def.innerType;t[r]=e}}),new Z({...this._def,shape:()=>t})}keyof(){return en(e0.objectKeys(this.shape))}}Z.create=(e,t)=>new Z({shape:()=>e,unknownKeys:"strip",catchall:G.create(),typeName:e2.ZodObject,...x(t)}),Z.strictCreate=(e,t)=>new Z({shape:()=>e,unknownKeys:"strict",catchall:G.create(),typeName:e2.ZodObject,...x(t)}),Z.lazycreate=(e,t)=>new Z({shape:e,unknownKeys:"strip",catchall:G.create(),typeName:e2.ZodObject,...x(t)});class Q extends T{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new a(e.ctx.common.issues));return c(t,{code:s.invalid_union,unionErrors:r}),m});{let e;let i=[];for(let n of r){let r={...t,common:{...t.common,issues:[]},parent:null},o=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===o.status)return o;"dirty"!==o.status||e||(e={result:o,ctx:r}),r.common.issues.length&&i.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=i.map(e=>new a(e));return c(t,{code:s.invalid_union,unionErrors:n}),m}}get options(){return this._def.options}}Q.create=(e,t)=>new Q({options:e,typeName:e2.ZodUnion,...x(t)});let J=e=>{if(e instanceof er)return J(e.schema);if(e instanceof ed)return J(e.innerType());if(e instanceof ei)return[e.value];if(e instanceof eo)return e.options;if(e instanceof es)return Object.keys(e.enum);if(e instanceof eh)return J(e._def.innerType);if(e instanceof L)return[void 0];else if(e instanceof M)return[null];else return null};class K extends T{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==n.object)return c(t,{code:s.invalid_type,expected:n.object,received:t.parsedType}),m;let r=this.discriminator,i=t.data[r],o=this.optionsMap.get(i);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(c(t,{code:s.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),m)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let i=new Map;for(let r of t){let t=J(r.shape[e]);if(!t)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let n of t){if(i.has(n))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);i.set(n,r)}}return new K({typeName:e2.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...x(r)})}}class z extends T{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=(e,i)=>{if(v(e)||v(i))return m;let a=function e(t,r){let i=o(t),s=o(r);if(t===r)return{valid:!0,data:t};if(i===n.object&&s===n.object){let i=e0.objectKeys(r),n=e0.objectKeys(t).filter(e=>-1!==i.indexOf(e)),o={...t,...r};for(let i of n){let n=e(t[i],r[i]);if(!n.valid)return{valid:!1};o[i]=n.data}return{valid:!0,data:o}}if(i===n.array&&s===n.array){if(t.length!==r.length)return{valid:!1};let i=[];for(let n=0;n<t.length;n++){let o=e(t[n],r[n]);if(!o.valid)return{valid:!1};i.push(o.data)}return{valid:!0,data:i}}return i===n.date&&s===n.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}(e.value,i.value);return a.valid?((g(e)||g(i))&&t.dirty(),{status:t.value,value:a.data}):(c(r,{code:s.invalid_intersection_types}),m)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>i(e,t)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}z.create=(e,t,r)=>new z({left:e,right:t,typeName:e2.ZodIntersection,...x(r)});class H extends T{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==n.array)return c(r,{code:s.invalid_type,expected:n.array,received:r.parsedType}),m;if(r.data.length<this._def.items.length)return c(r,{code:s.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),m;!this._def.rest&&r.data.length>this._def.items.length&&(c(r,{code:s.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let i=[...r.data].map((e,t)=>{let i=this._def.items[t]||this._def.rest;return i?i._parse(new b(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(i).then(e=>p.mergeArray(t,e)):p.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new H({...this._def,rest:e})}}H.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new H({items:e,typeName:e2.ZodTuple,rest:null,...x(t)})};class X extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==n.object)return c(r,{code:s.invalid_type,expected:n.object,received:r.parsedType}),m;let i=[],o=this._def.keyType,a=this._def.valueType;for(let e in r.data)i.push({key:o._parse(new b(r,e,r.path,e)),value:a._parse(new b(r,r.data[e],r.path,e))});return r.common.async?p.mergeObjectAsync(t,i):p.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return new X(t instanceof T?{keyType:e,valueType:t,typeName:e2.ZodRecord,...x(r)}:{keyType:A.create(),valueType:e,typeName:e2.ZodRecord,...x(t)})}}class Y extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==n.map)return c(r,{code:s.invalid_type,expected:n.map,received:r.parsedType}),m;let i=this._def.keyType,o=this._def.valueType,a=[...r.data.entries()].map(([e,t],n)=>({key:i._parse(new b(r,e,r.path,[n,"key"])),value:o._parse(new b(r,t,r.path,[n,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of a){let i=await r.key,n=await r.value;if("aborted"===i.status||"aborted"===n.status)return m;("dirty"===i.status||"dirty"===n.status)&&t.dirty(),e.set(i.value,n.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of a){let i=r.key,n=r.value;if("aborted"===i.status||"aborted"===n.status)return m;("dirty"===i.status||"dirty"===n.status)&&t.dirty(),e.set(i.value,n.value)}return{status:t.value,value:e}}}}Y.create=(e,t,r)=>new Y({valueType:t,keyType:e,typeName:e2.ZodMap,...x(r)});class ee extends T{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==n.set)return c(r,{code:s.invalid_type,expected:n.set,received:r.parsedType}),m;let i=this._def;null!==i.minSize&&r.data.size<i.minSize.value&&(c(r,{code:s.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&r.data.size>i.maxSize.value&&(c(r,{code:s.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let o=this._def.valueType;function a(e){let r=new Set;for(let i of e){if("aborted"===i.status)return m;"dirty"===i.status&&t.dirty(),r.add(i.value)}return{status:t.value,value:r}}let d=[...r.data.values()].map((e,t)=>o._parse(new b(r,e,r.path,t)));return r.common.async?Promise.all(d).then(e=>a(e)):a(d)}min(e,t){return new ee({...this._def,minSize:{value:e,message:e6.toString(t)}})}max(e,t){return new ee({...this._def,maxSize:{value:e,message:e6.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ee.create=(e,t)=>new ee({valueType:e,minSize:null,maxSize:null,typeName:e2.ZodSet,...x(t)});class et extends T{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==n.function)return c(t,{code:s.invalid_type,expected:n.function,received:t.parsedType}),m;function r(e,r){return h({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,u(),d].filter(e=>!!e),issueData:{code:s.invalid_arguments,argumentsError:r}})}function i(e,r){return h({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,u(),d].filter(e=>!!e),issueData:{code:s.invalid_return_type,returnTypeError:r}})}let o={errorMap:t.common.contextualErrorMap},l=t.data;if(this._def.returns instanceof ea){let e=this;return y(async function(...t){let n=new a([]),s=await e._def.args.parseAsync(t,o).catch(e=>{throw n.addIssue(r(t,e)),n}),d=await Reflect.apply(l,this,s);return await e._def.returns._def.type.parseAsync(d,o).catch(e=>{throw n.addIssue(i(d,e)),n})})}{let e=this;return y(function(...t){let n=e._def.args.safeParse(t,o);if(!n.success)throw new a([r(t,n.error)]);let s=Reflect.apply(l,this,n.data),d=e._def.returns.safeParse(s,o);if(!d.success)throw new a([i(s,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new et({...this._def,args:H.create(e).rest(B.create())})}returns(e){return new et({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new et({args:e||H.create([]).rest(B.create()),returns:t||B.create(),typeName:e2.ZodFunction,...x(r)})}}class er extends T{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}er.create=(e,t)=>new er({getter:e,typeName:e2.ZodLazy,...x(t)});class ei extends T{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return c(t,{received:t.data,code:s.invalid_literal,expected:this._def.value}),m}return{status:"valid",value:e.data}}get value(){return this._def.value}}function en(e,t){return new eo({values:e,typeName:e2.ZodEnum,...x(t)})}ei.create=(e,t)=>new ei({value:e,typeName:e2.ZodLiteral,...x(t)});class eo extends T{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return c(t,{expected:e0.joinValues(r),received:t.parsedType,code:s.invalid_type}),m}if(-1===this._def.values.indexOf(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return c(t,{received:t.data,code:s.invalid_enum_value,options:r}),m}return y(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return eo.create(e)}exclude(e){return eo.create(this.options.filter(t=>!e.includes(t)))}}eo.create=en;class es extends T{_parse(e){let t=e0.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==n.string&&r.parsedType!==n.number){let e=e0.objectValues(t);return c(r,{expected:e0.joinValues(e),received:r.parsedType,code:s.invalid_type}),m}if(-1===t.indexOf(e.data)){let e=e0.objectValues(t);return c(r,{received:r.data,code:s.invalid_enum_value,options:e}),m}return y(e.data)}get enum(){return this._def.values}}es.create=(e,t)=>new es({values:e,typeName:e2.ZodNativeEnum,...x(t)});class ea extends T{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==n.promise&&!1===t.common.async?(c(t,{code:s.invalid_type,expected:n.promise,received:t.parsedType}),m):y((t.parsedType===n.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ea.create=(e,t)=>new ea({type:e,typeName:e2.ZodPromise,...x(t)});class ed extends T{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===e2.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,n={addIssue:e=>{c(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===i.type){let e=i.transform(r.data,n);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then(e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r})):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===i.type){let e=e=>{let t=i.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?m:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===i.status?m:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}}if("transform"===i.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>N(e)?Promise.resolve(i.transform(e.value,n)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!N(e))return e;let o=i.transform(e.value,n);if(o instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}}e0.assertNever(i)}}ed.create=(e,t,r)=>new ed({schema:e,typeName:e2.ZodEffects,effect:t,...x(r)}),ed.createWithPreprocess=(e,t,r)=>new ed({schema:t,effect:{type:"preprocess",transform:e},typeName:e2.ZodEffects,...x(r)});class el extends T{_parse(e){return this._getType(e)===n.undefined?y(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}el.create=(e,t)=>new el({innerType:e,typeName:e2.ZodOptional,...x(t)});class eu extends T{_parse(e){return this._getType(e)===n.null?y(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eu.create=(e,t)=>new eu({innerType:e,typeName:e2.ZodNullable,...x(t)});class eh extends T{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===n.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eh.create=(e,t)=>new eh({innerType:e,typeName:e2.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...x(t)});class ec extends T{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return w(i)?i.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new a(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new a(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ec.create=(e,t)=>new ec({innerType:e,typeName:e2.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...x(t)});class ep extends T{_parse(e){if(this._getType(e)!==n.nan){let t=this._getOrReturnCtx(e);return c(t,{code:s.invalid_type,expected:n.nan,received:t.parsedType}),m}return{status:"valid",value:e.data}}}ep.create=e=>new ep({typeName:e2.ZodNaN,...x(e)});let em=Symbol("zod_brand");class ef extends T{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class ey extends T{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?m:"dirty"===e.status?(t.dirty(),f(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?m:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new ey({in:e,out:t,typeName:e2.ZodPipeline})}}class ev extends T{_parse(e){let t=this._def.innerType._parse(e);return N(t)&&(t.value=Object.freeze(t.value)),t}}ev.create=(e,t)=>new ev({innerType:e,typeName:e2.ZodReadonly,...x(t)});let eg=(e,t={},r)=>e?F.create().superRefine((i,n)=>{var o,s;if(!e(i)){let e="function"==typeof t?t(i):"string"==typeof t?{message:t}:t,a=null===(s=null!==(o=e.fatal)&&void 0!==o?o:r)||void 0===s||s;n.addIssue({code:"custom",..."string"==typeof e?{message:e}:e,fatal:a})}}):F.create(),eN={object:Z.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(e2||(e2={}));let ew=A.create,eb=q.create,e_=ep.create,ex=W.create,eT=R.create,eP=D.create,eO=j.create,eS=L.create,eE=M.create,ek=F.create,eC=B.create,eI=G.create,eV=U.create,eA=$.create,eq=Z.create,eW=Z.strictCreate,eR=Q.create,eD=K.create,ej=z.create,eL=H.create,eM=X.create,eF=Y.create,eB=ee.create,eG=et.create,eU=er.create,e$=ei.create,eZ=eo.create,eQ=es.create,eJ=ea.create,eK=ed.create,ez=el.create,eH=eu.create,eX=ed.createWithPreprocess,eY=ey.create;var e0,e1,e6,e2,e4=Object.freeze({__proto__:null,defaultErrorMap:d,setErrorMap:function(e){l=e},getErrorMap:u,makeIssue:h,EMPTY_PATH:[],addIssueToContext:c,ParseStatus:p,INVALID:m,DIRTY:f,OK:y,isAborted:v,isDirty:g,isValid:N,isAsync:w,get util(){return e0},get objectUtil(){return e1},ZodParsedType:n,getParsedType:o,ZodType:T,ZodString:A,ZodNumber:q,ZodBigInt:W,ZodBoolean:R,ZodDate:D,ZodSymbol:j,ZodUndefined:L,ZodNull:M,ZodAny:F,ZodUnknown:B,ZodNever:G,ZodVoid:U,ZodArray:$,ZodObject:Z,ZodUnion:Q,ZodDiscriminatedUnion:K,ZodIntersection:z,ZodTuple:H,ZodRecord:X,ZodMap:Y,ZodSet:ee,ZodFunction:et,ZodLazy:er,ZodLiteral:ei,ZodEnum:eo,ZodNativeEnum:es,ZodPromise:ea,ZodEffects:ed,ZodTransformer:ed,ZodOptional:el,ZodNullable:eu,ZodDefault:eh,ZodCatch:ec,ZodNaN:ep,BRAND:em,ZodBranded:ef,ZodPipeline:ey,ZodReadonly:ev,custom:eg,Schema:T,ZodSchema:T,late:eN,get ZodFirstPartyTypeKind(){return e2},coerce:{string:e=>A.create({...e,coerce:!0}),number:e=>q.create({...e,coerce:!0}),boolean:e=>R.create({...e,coerce:!0}),bigint:e=>W.create({...e,coerce:!0}),date:e=>D.create({...e,coerce:!0})},any:ek,array:eA,bigint:ex,boolean:eT,date:eP,discriminatedUnion:eD,effect:eK,enum:eZ,function:eG,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>eg(t=>t instanceof e,t),intersection:ej,lazy:eU,literal:e$,map:eF,nan:e_,nativeEnum:eQ,never:eI,null:eE,nullable:eH,number:eb,object:eq,oboolean:()=>eT().optional(),onumber:()=>eb().optional(),optional:ez,ostring:()=>ew().optional(),pipeline:eY,preprocess:eX,promise:eJ,record:eM,set:eB,strictObject:eW,string:ew,symbol:eO,transformer:eK,tuple:eL,undefined:eS,union:eR,unknown:eC,void:eV,NEVER:m,ZodIssueCode:s,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:a})}};